"use strict";var Hq=Object.defineProperty,$q=Object.defineProperties,Gq=Object.getOwnPropertyDescriptors,iB=Object.getOwnPropertySymbols,zq=Object.prototype.hasOwnProperty,Wq=Object.prototype.propertyIsEnumerable,sB=(Je,we,F)=>we in Je?Hq(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:F}):Je[we]=F,oB=(Je,we)=>{for(var F in we||(we={}))zq.call(we,F)&&sB(Je,F,we[F]);if(iB)for(var F of iB(we))Wq.call(we,F)&&sB(Je,F,we[F]);return Je},aB=(Je,we)=>$q(Je,Gq(we));(self.webpackChunkAngularDeploymentTesting=self.webpackChunkAngularDeploymentTesting||[]).push([[179],{2011:(Je,we,F)=>{F.d(we,{Dh:()=>de,GT:()=>ye,cc:()=>Ne,hO:()=>ze,on:()=>W,pX:()=>oe,xv:()=>pe});var f=F(5e3),ne=F(127),L=F(5813);Je=F.hmd(Je);const fe=["ngOnDestroy"],oe=(Te,We,Ye,Se={})=>new Proxy(Te,{get:(Ie,De)=>Ye.runOutsideAngular(()=>{var He;if(Te[De])return(null===(He=null==Se?void 0:Se.spy)||void 0===He?void 0:He.get)&&Se.spy.get(De,Te[De]),Te[De];if(fe.indexOf(De)>-1)return()=>{};const $e=We.toPromise().then(z=>{const Ce=z&&z[De];return"function"==typeof Ce?Ce.bind(z):Ce&&Ce.then?Ce.then(J=>Ye.run(()=>J)):Ye.run(()=>Ce)});return new Proxy(()=>{},{get:(z,Ce)=>$e[Ce],apply:(z,Ce,J)=>$e.then(ae=>{var ie;const ve=ae&&ae(...J);return(null===(ie=null==Se?void 0:Se.spy)||void 0===ie?void 0:ie.apply)&&Se.spy.apply(De,J,ve),ve})})})}),ye=(Te,We)=>{We.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Se=>{Object.defineProperty(Te.prototype,Se,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Se))})})};class ue{constructor(We){return We}}const de=new f.OlP("angularfire2.app.options"),pe=new f.OlP("angularfire2.app.name");function W(Te,We,Ye){const Ie="object"==typeof Ye&&Ye||{};Ie.name=Ie.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const He=ne.Z.apps.filter($e=>$e&&$e.name===Ie.name)[0]||We.runOutsideAngular(()=>ne.Z.initializeApp(Te,Ie));try{JSON.stringify(Te)!==JSON.stringify(He.options)&&G("error",`${He.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ue(He)}const G=(Te,...We)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Te](...We)},se={provide:ue,useFactory:W,deps:[de,f.R0b,[new f.FiY,pe]]};let ze=(()=>{class Te{constructor(Ye){ne.Z.registerVersion("angularfire",L.q4.full,"core"),ne.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ne.Z.registerVersion("angular",f.q4F.full,Ye.toString())}static initializeApp(Ye,Se){return{ngModule:Te,providers:[{provide:de,useValue:Ye},{provide:pe,useValue:Se}]}}}return Te.\u0275fac=function(Ye){return new(Ye||Te)(f.LFG(f.Lbi))},Te.\u0275mod=f.oAB({type:Te}),Te.\u0275inj=f.cJS({providers:[se]}),Te})();function Ne(Te,We,Ye,Se,Ie){const[,De,He]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Te)||[];if(De)return function Le(Te,We){try{return Te.toString()===We.toString()}catch(Ye){return Te===We}}(Ie,He)||(me("error",`${We} was already initialized on the ${Ye} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Ie,was:He})),De;{const $e=Se();return globalThis.\u0275AngularfireInstanceCache.push([Te,$e,Ie]),$e}}const je=!!Je.hot,me=(Te,...We)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Te](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,F)=>{F.d(we,{q4:()=>nl,iC:()=>oc,HU:()=>wf,vb:()=>sm,JM:()=>il});var f=F(5e3),ne=F(5867),L=F(5861),fe=F(9681),oe=F(2090),ye=F(4859),ue=F(1877),de=F(8766);const pe="@firebase/installations",W="0.5.9",se=`w:${W}`,ze="FIS_v2",We=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(D){return D instanceof oe.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ie(D){return{token:D.token,requestStatus:2,expiresIn:ae(D.expiresIn),creationTime:Date.now()}}function De(D,S){return He.apply(this,arguments)}function He(){return(He=(0,L.Z)(function*(D,S){const U=(yield S.json()).error;return We.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function z(D,{refreshToken:S}){const N=$e(D);return N.append("Authorization",function ie(D){return`${ze} ${D}`}(S)),N}function Ce(D){return J.apply(this,arguments)}function J(){return(J=(0,L.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function ae(D){return Number(D.replace("s","000"))}function ve(D,S){return he.apply(this,arguments)}function he(){return(he=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:N}){const U=Se(D),X=$e(D),le=S.getImmediate({optional:!0});if(le){const Ct=yield le.getHeartbeatsHeader();Ct&&X.append("x-firebase-client",Ct)}const rt={method:"POST",headers:X,body:JSON.stringify({fid:N,authVersion:ze,appId:D.appId,sdkVersion:se})},it=yield Ce(()=>fetch(U,rt));if(it.ok){const Ct=yield it.json();return{fid:Ct.fid||N,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:Ie(Ct.authToken)}}throw yield De("Create Installation",it)})).apply(this,arguments)}function Ve(D){return new Promise(S=>{setTimeout(S,D)})}const Zt=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function on(D){return function pt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Zt.test(N)?N:""}catch(D){return""}}function kn(D){return`${D.appName}!${D.appId}`}const cn=new Map;function Xt(D,S){const N=kn(D);Ut(N,S),function Xi(D,S){const N=function yr(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=D=>{Ut(D.data.key,D.data.fid)}),ui}();N&&N.postMessage({key:D,fid:S}),function Nr(){0===cn.size&&ui&&(ui.close(),ui=null)}()}(N,S)}function Ut(D,S){const N=cn.get(D);if(N)for(const U of N)U(S)}let ui=null;const zr="firebase-installations-store";let Ri=null;function bt(){return Ri||(Ri=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(zr)}})),Ri}function ci(D,S){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,L.Z)(function*(D,S){const N=kn(D),X=(yield bt()).transaction(zr,"readwrite"),le=X.objectStore(zr),Fe=yield le.get(N);return yield le.put(S,N),yield X.done,(!Fe||Fe.fid!==S.fid)&&Xt(D,S.fid),S})).apply(this,arguments)}function On(D){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(D){const S=kn(D),U=(yield bt()).transaction(zr,"readwrite");yield U.objectStore(zr).delete(S),yield U.done})).apply(this,arguments)}function Wr(D,S){return rr.apply(this,arguments)}function rr(){return(rr=(0,L.Z)(function*(D,S){const N=kn(D),X=(yield bt()).transaction(zr,"readwrite"),le=X.objectStore(zr),Fe=yield le.get(N),rt=S(Fe);return void 0===rt?yield le.delete(N):yield le.put(rt,N),yield X.done,rt&&(!Fe||Fe.fid!==rt.fid)&&Xt(D,rt.fid),rt})).apply(this,arguments)}function Pn(D){return di.apply(this,arguments)}function di(){return(di=(0,L.Z)(function*(D){let S;const N=yield Wr(D.appConfig,U=>{const X=vo(U),le=Yt(D,X);return S=le.registrationPromise,le.installationEntry});return""===N.fid?{installationEntry:yield S}:{installationEntry:N,registrationPromise:S}})).apply(this,arguments)}function vo(D){return bo(D||{fid:Ze(),registrationStatus:0})}function Yt(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(We.create("app-offline"))};const N={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function lt(D,S){return wt.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:vr(D)}:{installationEntry:S}}function wt(){return(wt=(0,L.Z)(function*(D,S){try{const N=yield ve(D,S);return ci(D.appConfig,N)}catch(N){throw Ye(N)&&409===N.customData.serverCode?yield On(D.appConfig):yield ci(D.appConfig,{fid:S.fid,registrationStatus:0}),N}})).apply(this,arguments)}function vr(D){return hi.apply(this,arguments)}function hi(){return(hi=(0,L.Z)(function*(D){let S=yield Wt(D.appConfig);for(;1===S.registrationStatus;)yield Ve(100),S=yield Wt(D.appConfig);if(0===S.registrationStatus){const{installationEntry:N,registrationPromise:U}=yield Pn(D);return U||N}return S})).apply(this,arguments)}function Wt(D){return Wr(D,S=>{if(!S)throw We.create("installation-not-found");return bo(S)})}function bo(D){return function br(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Er(D,S){return H.apply(this,arguments)}function H(){return(H=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},N){const U=K(D,N),X=z(D,N),le=S.getImmediate({optional:!0});if(le){const Ct=yield le.getHeartbeatsHeader();Ct&&X.append("x-firebase-client",Ct)}const rt={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:se,appId:D.appId}})},it=yield Ce(()=>fetch(U,rt));if(it.ok)return Ie(yield it.json());throw yield De("Generate Auth Token",it)})).apply(this,arguments)}function K(D,{fid:S}){return`${Se(D)}/${S}/authTokens:generate`}function Y(D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(D,S=!1){let N;const U=yield Wr(D.appConfig,le=>{if(!At(le))throw We.create("not-registered");const Fe=le.authToken;if(!S&&vn(Fe))return le;if(1===Fe.requestStatus)return N=q(D,S),le;{if(!navigator.onLine)throw We.create("app-offline");const rt=Yn(le);return N=Xe(D,rt),rt}});return N?yield N:U.authToken})).apply(this,arguments)}function q(D,S){return te.apply(this,arguments)}function te(){return(te=(0,L.Z)(function*(D,S){let N=yield ke(D.appConfig);for(;1===N.authToken.requestStatus;)yield Ve(100),N=yield ke(D.appConfig);const U=N.authToken;return 0===U.requestStatus?Y(D,S):U})).apply(this,arguments)}function ke(D){return Wr(D,S=>{if(!At(S))throw We.create("not-registered");return function kr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Xe(D,S){return _t.apply(this,arguments)}function _t(){return(_t=(0,L.Z)(function*(D,S){try{const N=yield Er(D,S),U=Object.assign(Object.assign({},S),{authToken:N});return yield ci(D.appConfig,U),N}catch(N){if(!Ye(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ci(D.appConfig,U)}else yield On(D.appConfig);throw N}})).apply(this,arguments)}function At(D){return void 0!==D&&2===D.registrationStatus}function vn(D){return 2===D.requestStatus&&!function Dt(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function Yn(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function Ba(){return(Ba=(0,L.Z)(function*(D){const S=D,{installationEntry:N,registrationPromise:U}=yield Pn(S);return U?U.catch(console.error):Y(S).catch(console.error),N.fid})).apply(this,arguments)}function Ua(){return(Ua=(0,L.Z)(function*(D,S=!1){const N=D;return yield Qn(N),(yield Y(N,S)).token})).apply(this,arguments)}function Qn(D){return Or.apply(this,arguments)}function Or(){return(Or=(0,L.Z)(function*(D){const{registrationPromise:S}=yield Pn(D);S&&(yield S)})).apply(this,arguments)}function na(D){return We.create("missing-app-config-values",{valueName:D})}const Kr="installations",ft=D=>{const S=D.getProvider("app").getImmediate(),N=function cr(D){if(!D||!D.options)throw na("App Configuration");if(!D.name)throw na("App Name");const S=["projectId","apiKey","appId"];for(const N of S)if(!D.options[N])throw na(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:N,heartbeatServiceProvider:(0,fe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},dn=D=>{const S=D.getProvider("app").getImmediate(),N=(0,fe._getProvider)(S,Kr).getImmediate();return{getId:()=>function Dl(D){return Ba.apply(this,arguments)}(N),getToken:X=>function Tl(D){return Ua.apply(this,arguments)}(N,X)}};(function Zr(){(0,fe._registerComponent)(new ye.wA(Kr,ft,"PUBLIC")),(0,fe._registerComponent)(new ye.wA("installations-internal",dn,"PRIVATE"))})(),(0,fe.registerVersion)(pe,W),(0,fe.registerVersion)(pe,W,"esm2017");const ts="@firebase/remote-config",Fn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zg{constructor(S,N,U,X){this.client=S,this.storage=N,this.storageCache=U,this.logger=X}isCachedDataFresh(S,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-N,X=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var N=this;return(0,L.Z)(function*(){const[U,X]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(X&&N.isCachedDataFresh(S.cacheMaxAgeMillis,U))return X;S.eTag=X&&X.eTag;const le=yield N.client.fetch(S),Fe=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Fe.push(N.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Fe),le})()}}function ed(D=navigator){return D.languages&&D.languages[0]||D.language}class wr{constructor(S,N,U,X,le,Fe){this.firebaseInstallations=S,this.sdkVersion=N,this.namespace=U,this.projectId=X,this.apiKey=le,this.appId=Fe}fetch(S){var N=this;return(0,L.Z)(function*(){const[U,X]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},it={sdk_version:N.sdkVersion,app_instance_id:U,app_instance_id_token:X,app_id:N.appId,language_code:ed()},Ct={method:"POST",headers:rt,body:JSON.stringify(it)},Kt=fetch(Fe,Ct),St=new Promise((ar,ti)=>{S.signal.addEventListener(()=>{const Ea=new Error("The operation was aborted.");Ea.name="AbortError",ti(Ea)})});let Vn;try{yield Promise.race([Kt,St]),Vn=yield Kt}catch(ar){let ti="fetch-client-network";throw"AbortError"===ar.name&&(ti="fetch-timeout"),Fn.create(ti,{originalErrorMessage:ar.message})}let pr=Vn.status;const ho=Vn.headers.get("ETag")||void 0;let hs,ei;if(200===Vn.status){let ar;try{ar=yield Vn.json()}catch(ti){throw Fn.create("fetch-client-parse",{originalErrorMessage:ti.message})}hs=ar.entries,ei=ar.state}if("INSTANCE_STATE_UNSPECIFIED"===ei?pr=500:"NO_CHANGE"===ei?pr=304:("NO_TEMPLATE"===ei||"EMPTY_CONFIG"===ei)&&(hs={}),304!==pr&&200!==pr)throw Fn.create("fetch-status",{httpStatus:pr});return{status:pr,eTag:ho,config:hs}})()}}class Wg{constructor(S,N){this.client=S,this.storage=N}fetch(S){var N=this;return(0,L.Z)(function*(){const U=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:N,backoffCount:U}){var X=this;return(0,L.Z)(function*(){yield function ro(D,S){return new Promise((N,U)=>{const X=Math.max(S-Date.now(),0),le=setTimeout(N,X);D.addEventListener(()=>{clearTimeout(le),U(Fn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,N);try{const le=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),le}catch(le){if(!function td(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const Fe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(Fe),X.attemptFetch(S,Fe)}})()}}class nd{constructor(S,N,U,X,le){this.app=S,this._client=N,this._storageCache=U,this._storage=X,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ou(D,S){const N=D.target.error||void 0;return Fn.create(S,{originalErrorMessage:N&&N.message})}const io="app_namespace_store";class Yg{constructor(S,N,U,X=function Zg(){return new Promise((D,S)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=U=>{S(Ou(U,"storage-open"))},N.onsuccess=U=>{D(U.target.result)},N.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(io,{keyPath:"compositeKey"})}}catch(N){S(Fn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=S,this.appName=N,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var N=this;return(0,L.Z)(function*(){const U=yield N.openDbPromise;return new Promise((X,le)=>{const rt=U.transaction([io],"readonly").objectStore(io),it=N.createCompositeKey(S);try{const Ct=rt.get(it);Ct.onerror=Kt=>{le(Ou(Kt,"storage-get"))},Ct.onsuccess=Kt=>{const St=Kt.target.result;X(St?St.value:void 0)}}catch(Ct){le(Fn.create("storage-get",{originalErrorMessage:Ct&&Ct.message}))}})})()}set(S,N){var U=this;return(0,L.Z)(function*(){const X=yield U.openDbPromise;return new Promise((le,Fe)=>{const it=X.transaction([io],"readwrite").objectStore(io),Ct=U.createCompositeKey(S);try{const Kt=it.put({compositeKey:Ct,value:N});Kt.onerror=St=>{Fe(Ou(St,"storage-set"))},Kt.onsuccess=()=>{le()}}catch(Kt){Fe(Fn.create("storage-set",{originalErrorMessage:Kt&&Kt.message}))}})})()}delete(S){var N=this;return(0,L.Z)(function*(){const U=yield N.openDbPromise;return new Promise((X,le)=>{const rt=U.transaction([io],"readwrite").objectStore(io),it=N.createCompositeKey(S);try{const Ct=rt.delete(it);Ct.onerror=Kt=>{le(Ou(Kt,"storage-delete"))},Ct.onsuccess=()=>{X()}}catch(Ct){le(Fn.create("storage-delete",{originalErrorMessage:Ct&&Ct.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class id{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const N=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),le=yield N;le&&(S.lastFetchStatus=le);const Fe=yield U;Fe&&(S.lastSuccessfulFetchTimestampMillis=Fe);const rt=yield X;rt&&(S.activeConfig=rt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function xl(){return sd.apply(this,arguments)}function sd(){return(sd=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(D){return!1}})).apply(this,arguments)}!function ra(){(0,fe._registerComponent)(new ye.wA("remote-config",function D(S,{instanceIdentifier:N}){const U=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Fn.create("registration-window");if(!(0,oe.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:le,apiKey:Fe,appId:rt}=U.options;if(!le)throw Fn.create("registration-project-id");if(!Fe)throw Fn.create("registration-api-key");if(!rt)throw Fn.create("registration-app-id");const it=new Yg(rt,U.name,N=N||"firebase"),Ct=new id(it),Kt=new ue.Yd(ts);Kt.logLevel=ue.in.ERROR;const St=new wr(X,fe.SDK_VERSION,N,le,Fe,rt),Vn=new Wg(St,it),pr=new zg(Vn,it,Ct,Kt),ho=new nd(U,pr,Ct,it,Kt);return function pn(D){const S=(0,oe.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ho),ho},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(ts,"0.3.8"),(0,fe.registerVersion)(ts,"0.3.8","esm2017")}();const od="/firebase-messaging-sw.js",Cr="/firebase-cloud-messaging-push-scope",Co="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="google.c.a.c_id",ad="google.c.a.c_l",hf="google.c.a.ts",Pu="google.c.a.e";var sa=(()=>{return(D=sa||(sa={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",sa;var D})();function Fr(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ld(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(N),X=new Uint8Array(U.length);for(let le=0;le<U.length;++le)X[le]=U.charCodeAt(le);return X}const Ir="fcm_token_details_db",fi="fcm_token_object_Store";function Fu(D){return ud.apply(this,arguments)}function ud(){return ud=(0,L.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Ir))return null;let S=null;return(yield(0,de.X3)(Ir,5,{upgrade:(U=(0,L.Z)(function*(X,le,Fe,rt){var it;if(le<2||!X.objectStoreNames.contains(fi))return;const Ct=rt.objectStore(fi),Kt=yield Ct.index("fcmSenderId").get(D);if(yield Ct.clear(),Kt)if(2===le){const St=Kt;if(!St.auth||!St.p256dh||!St.endpoint)return;S={token:St.fcmToken,createTime:null!==(it=St.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:Fr(St.vapidKey)}}}else if(3===le){const St=Kt;S={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Fr(St.auth),p256dh:Fr(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Fr(St.vapidKey)}}}else if(4===le){const St=Kt;S={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Fr(St.auth),p256dh:Fr(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Fr(St.vapidKey)}}}}),function(le,Fe,rt,it){return U.apply(this,arguments)})})).close(),yield(0,de.Lj)(Ir),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Lu(S)?S:null;var U}),ud.apply(this,arguments)}function Lu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const os="firebase-messaging-store";let ff=null;function gn(){return ff||(ff=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(os)}})),ff}function za(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,L.Z)(function*(D){const S=hr(D),U=yield(yield gn()).transaction(os).objectStore(os).get(S);if(U)return U;{const X=yield Fu(D.appConfig.senderId);if(X)return yield rn(D,X),X}})).apply(this,arguments)}function rn(D,S){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,L.Z)(function*(D,S){const N=hr(D),X=(yield gn()).transaction(os,"readwrite");return yield X.objectStore(os).put(S,N),yield X.done,S})).apply(this,arguments)}function Rl(D){return so.apply(this,arguments)}function so(){return(so=(0,L.Z)(function*(D){const S=hr(D),U=(yield gn()).transaction(os,"readwrite");yield U.objectStore(os).delete(S),yield U.done})).apply(this,arguments)}function hr({appConfig:D}){return D.appId}const Tn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function as(D,S){return fr.apply(this,arguments)}function fr(){return(fr=(0,L.Z)(function*(D,S){const N=yield la(D),U=oo(S),X={method:"POST",headers:N,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(ls(D.appConfig),X)).json()}catch(Fe){throw Tn.create("token-subscribe-failed",{errorInfo:Fe})}if(le.error)throw Tn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Tn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function To(D,S){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(D,S){const N=yield la(D),U=oo(S.subscriptionOptions),X={method:"PATCH",headers:N,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(`${ls(D.appConfig)}/${S.token}`,X)).json()}catch(Fe){throw Tn.create("token-update-failed",{errorInfo:Fe})}if(le.error)throw Tn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Tn.create("token-update-no-token");return le.token})).apply(this,arguments)}function qa(D,S){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,L.Z)(function*(D,S){const U={method:"DELETE",headers:yield la(D)};try{const le=yield(yield fetch(`${ls(D.appConfig)}/${S}`,U)).json();if(le.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(X){throw Tn.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function ls({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function la(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,L.Z)(function*({appConfig:D,installations:S}){const N=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function oo({p256dh:D,auth:S,endpoint:N,vapidKey:U}){const X={web:{endpoint:N,auth:S,p256dh:D}};return U!==Co&&(X.web.applicationPubKey=U),X}const Uu=6048e5;function Ka(D){return ju.apply(this,arguments)}function ju(){return(ju=(0,L.Z)(function*(D){const S=yield Ao(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Fr(S.getKey("auth")),p256dh:Fr(S.getKey("p256dh"))},U=yield za(D.firebaseDependencies);if(U){if(Ol(U.subscriptionOptions,N))return Date.now()>=U.createTime+Uu?Hu(D,{token:U.token,createTime:Date.now(),subscriptionOptions:N}):U.token;try{yield qa(D.firebaseDependencies,U.token)}catch(X){console.warn(X)}return xe(D.firebaseDependencies,N)}return xe(D.firebaseDependencies,N)})).apply(this,arguments)}function Nl(D){return kl.apply(this,arguments)}function kl(){return(kl=(0,L.Z)(function*(D){const S=yield za(D.firebaseDependencies);S&&(yield qa(D.firebaseDependencies,S.token),yield Rl(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Hu(D,S){return ua.apply(this,arguments)}function ua(){return(ua=(0,L.Z)(function*(D,S){try{const N=yield To(D.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:N,createTime:Date.now()});return yield rn(D.firebaseDependencies,U),N}catch(N){throw yield Nl(D),N}})).apply(this,arguments)}function xe(D,S){return jt.apply(this,arguments)}function jt(){return(jt=(0,L.Z)(function*(D,S){const U={token:yield as(D,S),createTime:Date.now(),subscriptionOptions:S};return yield rn(D,U),U.token})).apply(this,arguments)}function Ao(D,S){return wn.apply(this,arguments)}function wn(){return(wn=(0,L.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ld(S)})})).apply(this,arguments)}function Ol(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function So(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function pi(D,S){if(!S.notification)return;D.notification={};const N=S.notification.title;N&&(D.notification.title=N);const U=S.notification.body;U&&(D.notification.body=U);const X=S.notification.image;X&&(D.notification.image=X)}(S,D),function $u(D,S){!S.data||(D.data=S.data)}(S,D),function Gu(D,S){if(!S.fcmOptions)return;D.fcmOptions={};const N=S.fcmOptions.link;N&&(D.fcmOptions.link=N);const U=S.fcmOptions.analytics_label;U&&(D.fcmOptions.analyticsLabel=U)}(S,D),S}function zu(D){return"object"==typeof D&&!!D&&ia in D}function cd(D,S){const N=[];for(let U=0;U<D.length;U++)N.push(D.charAt(U)),U<S.length&&N.push(S.charAt(U));return N.join("")}function Ts(D){return Tn.create("missing-app-config-values",{valueName:D})}cd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Dr{constructor(S,N,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Qg(D){if(!D||!D.options)throw Ts("App Configuration Object");if(!D.name)throw Ts("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const U of S)if(!N[U])throw Ts(U);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:N,analyticsProvider:U}}_delete(){return Promise.resolve()}}function gi(D){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,L.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(od,{scope:Cr}),D.swRegistration.update().catch(()=>{})}catch(S){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function ao(D,S){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,L.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield gi(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Wu(D,S){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,L.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=Co)})).apply(this,arguments)}function qu(){return(qu=(0,L.Z)(function*(D,S){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield Wu(D,null==S?void 0:S.vapidKey),yield ao(D,null==S?void 0:S.serviceWorkerRegistration),Ka(D)})).apply(this,arguments)}function ca(D,S,N){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,L.Z)(function*(D,S,N){const U=Bl(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:N[ia],message_name:N[ad],message_time:N[hf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bl(D){switch(D){case sa.NOTIFICATION_CLICKED:return"notification_open";case sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function hd(){return(hd=(0,L.Z)(function*(D,S){const N=S.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===sa.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(So(N)):D.onMessageHandler.next(So(N)));const U=N.data;zu(U)&&"1"===U[Pu]&&(yield ca(D,N.messageType,U))})).apply(this,arguments)}const Ul="@firebase/messaging",fd=D=>{const S=new Dr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function dd(D,S){return hd.apply(this,arguments)}(S,N)),S},da=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:U=>function Ll(D,S){return qu.apply(this,arguments)}(S,U)}};function jl(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pd(){(0,fe._registerComponent)(new ye.wA("messaging",fd,"PUBLIC")),(0,fe._registerComponent)(new ye.wA("messaging-internal",da,"PRIVATE")),(0,fe.registerVersion)(Ul,"0.9.13"),(0,fe.registerVersion)(Ul,"0.9.13","esm2017")}();const gd="analytics",Jg="firebase_id",As="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ro="https://www.googletagmanager.com/gtag/js",Xn=new ue.Yd("@firebase/analytics");function md(D){return Promise.all(D.map(S=>S.catch(N=>N)))}function Xg(D,S){const N=document.createElement("script");N.src=`${Ro}?l=${D}&id=${S}`,N.async=!0,document.head.appendChild(N)}function ha(D,S,N,U,X,le){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,L.Z)(function*(D,S,N,U,X,le){const Fe=U[X];try{if(Fe)yield S[Fe];else{const it=(yield md(N)).find(Ct=>Ct.measurementId===X);it&&(yield S[it.appId])}}catch(rt){Xn.error(rt)}D("config",X,le)})).apply(this,arguments)}function em(D,S,N,U,X){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,L.Z)(function*(D,S,N,U,X){try{let le=[];if(X&&X.send_to){let Fe=X.send_to;Array.isArray(Fe)||(Fe=[Fe]);const rt=yield md(N);for(const it of Fe){const Ct=rt.find(St=>St.measurementId===it),Kt=Ct&&S[Ct.appId];if(!Kt){le=[];break}le.push(Kt)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),D("event",U,X||{})}catch(le){Xn.error(le)}})).apply(this,arguments)}function An(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Ro))return S;return null}const Li=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fa=new class us{constructor(S={},N=1e3){this.throttleMetadata=S,this.intervalMillis=N}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,N){this.throttleMetadata[S]=N}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function _d(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function mi(D){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,L.Z)(function*(D){var S;const{appId:N,apiKey:U}=D,X={method:"GET",headers:_d(U)},le=As.replace("{app-id}",N),Fe=yield fetch(le,X);if(200!==Fe.status&&304!==Fe.status){let rt="";try{const it=yield Fe.json();(null===(S=it.error)||void 0===S?void 0:S.message)&&(rt=it.error.message)}catch(it){}throw Li.create("config-fetch-failed",{httpStatus:Fe.status,responseMessage:rt})}return Fe.json()})).apply(this,arguments)}function Lt(D){return vt.apply(this,arguments)}function vt(){return(vt=(0,L.Z)(function*(D,S=fa,N){const{appId:U,apiKey:X,measurementId:le}=D.options;if(!U)throw Li.create("no-app-id");if(!X){if(le)return{measurementId:le,appId:U};throw Li.create("no-api-key")}const Fe=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},rt=new yd;return setTimeout((0,L.Z)(function*(){rt.abort()}),void 0!==N?N:6e4),pa({appId:U,apiKey:X,measurementId:le},Fe,rt,S)})).apply(this,arguments)}function pa(D,S,N){return ga.apply(this,arguments)}function ga(){return(ga=(0,L.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:N},U,X=fa){const{appId:le,measurementId:Fe}=D;try{yield Gl(U,S)}catch(rt){if(Fe)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:le,measurementId:Fe};throw rt}try{const rt=yield mi(D);return X.deleteThrottleMetadata(le),rt}catch(rt){if(!Zu(rt)){if(X.deleteThrottleMetadata(le),Fe)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:le,measurementId:Fe};throw rt}const it=503===Number(rt.customData.httpStatus)?(0,oe.$s)(N,X.intervalMillis,30):(0,oe.$s)(N,X.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+it,backoffCount:N+1};return X.setThrottleMetadata(le,Ct),Xn.debug(`Calling attemptFetch again in ${it} millis`),pa(D,Ct,U,X)}})).apply(this,arguments)}function Gl(D,S){return new Promise((N,U)=>{const X=Math.max(S-Date.now(),0),le=setTimeout(N,X);D.addEventListener(()=>{clearTimeout(le),U(Li.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Zu(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class yd{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Yu(){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,L.Z)(function*(){if(!(0,oe.hl)())return Xn.warn(Li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(D){return Xn.warn(Li.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function ma(){return(ma=(0,L.Z)(function*(D,S,N,U,X,le,Fe){var rt;const it=Lt(D);it.then(pr=>{N[pr.measurementId]=pr.appId,D.options.measurementId&&pr.measurementId!==D.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${pr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pr=>Xn.error(pr)),S.push(it);const Ct=Yu().then(pr=>{if(pr)return U.getId()}),[Kt,St]=yield Promise.all([it,Ct]);An()||Xg(le,Kt.measurementId),X("js",new Date);const Vn=null!==(rt=null==Fe?void 0:Fe.config)&&void 0!==rt?rt:{};return Vn.origin="firebase",Vn.update=!0,null!=St&&(Vn[Jg]=St),X("config",Kt.measurementId,Vn),Kt.measurementId})).apply(this,arguments)}class lo{constructor(S){this.app=S}_delete(){return delete Tr[this.app.options.appId],Promise.resolve()}}let Tr={},Ya=[];const zl={};let Wl,Cn,xs="dataLayer",Vi=!1;function Qa(D,S,N){!function _a(){const D=[];if((0,oe.ru)()&&D.push("This is a browser extension environment."),(0,oe.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((U,X)=>`(${X+1}) ${U}`).join(" "),N=Li.create("invalid-analytics-context",{errorInfo:S});Xn.warn(N.message)}}();const U=D.options.appId;if(!U)throw Li.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Li.create("no-api-key");Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Tr[U])throw Li.create("already-exists",{id:U});if(!Vi){!function No(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(xs);const{wrappedGtag:le,gtagCore:Fe}=function tm(D,S,N,U,X){let le=function(...Fe){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(le=window[X]),window[X]=function $l(D,S,N,U){function le(){return(le=(0,L.Z)(function*(Fe,rt,it){try{"event"===Fe?yield em(D,S,N,rt,it):"config"===Fe?yield ha(D,S,N,U,rt,it):D("set",rt)}catch(Ct){Xn.error(Ct)}})).apply(this,arguments)}return function X(Fe,rt,it){return le.apply(this,arguments)}}(le,D,S,N),{gtagCore:le,wrappedGtag:window[X]}}(Tr,Ya,zl,xs,"gtag");Cn=le,Wl=Fe,Vi=!0}return Tr[U]=function or(D,S,N,U,X,le,Fe){return ma.apply(this,arguments)}(D,Ya,zl,S,Wl,xs,N),new lo(D)}function Ja(){return(Ja=(0,L.Z)(function*(D,S,N,U,X){if(X&&X.global)D("event",N,U);else{const le=yield S;D("event",N,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function va(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(D){return!1}})).apply(this,arguments)}const vd="@firebase/analytics";!function bd(){(0,fe._registerComponent)(new ye.wA(gd,(S,{options:N})=>Qa(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,fe._registerComponent)(new ye.wA("analytics-internal",function D(S){try{const N=S.getProvider(gd).getImmediate();return{logEvent:(U,X,le)=>function vf(D,S,N,U){D=(0,oe.m9)(D),function Oo(D,S,N,U,X){return Ja.apply(this,arguments)}(Cn,Tr[D.app.options.appId],S,N,U).catch(X=>Xn.error(X))}(N,U,X,le)}}catch(N){throw Li.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,fe.registerVersion)(vd,"0.7.9"),(0,fe.registerVersion)(vd,"0.7.9","esm2017")}();var tc=F(4408),nc=F(7565);const Qr=new class Ln extends nc.v{}(class ba extends tc.o{constructor(S,N){super(S,N),this.scheduler=S,this.work=N}schedule(S,N=0){return N>0?super.schedule(S,N):(this.delay=N,this.state=S,this.scheduler.flush(this),this)}execute(S,N){return N>0||this.closed?super.execute(S,N):this._execute(S,N)}requestAsyncId(S,N,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,N,U):S.flush(this)}});var rc=F(4986),rm=F(8505),Jr=F(9468),Vr=F(5363);const nl=new f.GfV("7.3.0"),uo="__angularfire_symbol__analyticsIsSupportedValue",vi="__angularfire_symbol__analyticsIsSupported",co="__angularfire_symbol__remoteConfigIsSupportedValue",Bi="__angularfire_symbol__remoteConfigIsSupported",rl="__angularfire_symbol__messagingIsSupportedValue",bf="__angularfire_symbol__messagingIsSupported";function il(D,S,N){if(S){if(1===S.length)return S[0];const le=S.filter(Fe=>Fe.app===N);if(1===le.length)return le[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[vi]||(globalThis[vi]=va().then(D=>globalThis[uo]=D).catch(()=>globalThis[uo]=!1)),globalThis[bf]||(globalThis[bf]=jl().then(D=>globalThis[rl]=D).catch(()=>globalThis[rl]=!1)),globalThis[Bi]||(globalThis[Bi]=xl().then(D=>globalThis[co]=D).catch(()=>globalThis[co]=!1));const sm=(D,S)=>{const N=S?[S]:(0,ne.C6)(),U=[];return N.forEach(X=>{X.container.getProvider(D).instances.forEach(Fe=>{U.includes(Fe)||U.push(Fe)})}),U};function cs(){}class wd{constructor(S,N=Qr){this.zone=S,this.delegate=N}now(){return this.delegate.now()}schedule(S,N,U){const X=this.zone;return this.delegate.schedule(function(Fe){X.runGuarded(()=>{S.apply(this,[Fe])})},N,U)}}class ic{constructor(S){this.zone=S,this.task=null}call(S,N){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cs,{},cs,cs)),N.pipe((0,rm.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wf=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new wd(Zone.current)),this.insideAngular=N.run(()=>new wd(Zone.current,rc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function bi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function oc(D){return bi(),function ds(D){return function(N){return(N=N.lift(new ic(D.ngZone))).pipe((0,Jr.R)(D.outsideAngular),(0,Vr.Q)(D.insideAngular))}}(bi())(D)}},2090:(Je,we,F)=>{F.d(we,{$s:()=>Wt,BH:()=>ze,DV:()=>Qt,Dv:()=>Js,G6:()=>$e,GJ:()=>Xt,L:()=>de,LL:()=>he,Mn:()=>De,Pz:()=>Bt,Sg:()=>Ne,UG:()=>me,UI:()=>Xi,US:()=>ye,Wj:()=>Pn,Yr:()=>He,ZB:()=>G,ZR:()=>ve,b$:()=>Ye,cI:()=>Zt,d:()=>Se,dS:()=>vo,eu:()=>Ce,g5:()=>L,gK:()=>Wr,gQ:()=>zr,h$:()=>ue,hl:()=>z,hu:()=>ne,jU:()=>Te,lb:()=>di,m9:()=>Er,ne:()=>Ri,p$:()=>W,pd:()=>Qs,r3:()=>Rr,ru:()=>We,tV:()=>pe,uI:()=>je,ug:()=>Yt,vZ:()=>ui,w1:()=>Ie,w9:()=>cn,xO:()=>Nr,xb:()=>Ut,z$:()=>Le,zI:()=>J,zd:()=>es});const ne=function(H,K){if(!H)throw L(K)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},fe=function(H){const K=[];let Y=0;for(let Ae=0;Ae<H.length;Ae++){let q=H.charCodeAt(Ae);q<128?K[Y++]=q:q<2048?(K[Y++]=q>>6|192,K[Y++]=63&q|128):55296==(64512&q)&&Ae+1<H.length&&56320==(64512&H.charCodeAt(Ae+1))?(q=65536+((1023&q)<<10)+(1023&H.charCodeAt(++Ae)),K[Y++]=q>>18|240,K[Y++]=q>>12&63|128,K[Y++]=q>>6&63|128,K[Y++]=63&q|128):(K[Y++]=q>>12|224,K[Y++]=q>>6&63|128,K[Y++]=63&q|128)}return K},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,K){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=K?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let q=0;q<H.length;q+=3){const te=H[q],ke=q+1<H.length,Xe=ke?H[q+1]:0,_t=q+2<H.length,At=_t?H[q+2]:0;let Yn=(15&Xe)<<2|At>>6,kr=63&At;_t||(kr=64,ke||(Yn=64)),Ae.push(Y[te>>2],Y[(3&te)<<4|Xe>>4],Y[Yn],Y[kr])}return Ae.join("")},encodeString(H,K){return this.HAS_NATIVE_SUPPORT&&!K?btoa(H):this.encodeByteArray(fe(H),K)},decodeString(H,K){return this.HAS_NATIVE_SUPPORT&&!K?atob(H):function(H){const K=[];let Y=0,Ae=0;for(;Y<H.length;){const q=H[Y++];if(q<128)K[Ae++]=String.fromCharCode(q);else if(q>191&&q<224){const te=H[Y++];K[Ae++]=String.fromCharCode((31&q)<<6|63&te)}else if(q>239&&q<365){const _t=((7&q)<<18|(63&H[Y++])<<12|(63&H[Y++])<<6|63&H[Y++])-65536;K[Ae++]=String.fromCharCode(55296+(_t>>10)),K[Ae++]=String.fromCharCode(56320+(1023&_t))}else{const te=H[Y++],ke=H[Y++];K[Ae++]=String.fromCharCode((15&q)<<12|(63&te)<<6|63&ke)}}return K.join("")}(this.decodeStringToByteArray(H,K))},decodeStringToByteArray(H,K){this.init_();const Y=K?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let q=0;q<H.length;){const te=Y[H.charAt(q++)],Xe=q<H.length?Y[H.charAt(q)]:0;++q;const At=q<H.length?Y[H.charAt(q)]:64;++q;const Dt=q<H.length?Y[H.charAt(q)]:64;if(++q,null==te||null==Xe||null==At||null==Dt)throw Error();Ae.push(te<<2|Xe>>4),64!==At&&(Ae.push(Xe<<4&240|At>>2),64!==Dt&&Ae.push(At<<6&192|Dt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ue=function(H){const K=fe(H);return ye.encodeByteArray(K,!0)},de=function(H){return ue(H).replace(/\./g,"")},pe=function(H){try{return ye.decodeString(H,!0)}catch(K){console.error("base64Decode failed: ",K)}return null};function W(H){return G(void 0,H)}function G(H,K){if(!(K instanceof Object))return K;switch(K.constructor){case Date:return new Date(K.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return K}for(const Y in K)!K.hasOwnProperty(Y)||!se(Y)||(H[Y]=G(H[Y],K[Y]));return H}function se(H){return"__proto__"!==H}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((K,Y)=>{this.resolve=K,this.reject=Y})}wrapCallback(K){return(Y,Ae)=>{Y?this.reject(Y):this.resolve(Ae),"function"==typeof K&&(this.promise.catch(()=>{}),1===K.length?K(Y):K(Y,Ae))}}}function Ne(H,K){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=K||"demo-project",q=H.iat||0,te=H.sub||H.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:q,exp:q+3600,auth_time:q,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},H);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ke)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Te(){return"object"==typeof self&&self.self===self}function We(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return Le().indexOf("Electron/")>=0}function Ie(){const H=Le();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function De(){return Le().indexOf("MSAppHost/")>=0}function He(){return!1}function $e(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function Ce(){return new Promise((H,K)=>{try{let Y=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Ae);q.onsuccess=()=>{q.result.close(),Y||self.indexedDB.deleteDatabase(Ae),H(!0)},q.onupgradeneeded=()=>{Y=!1},q.onerror=()=>{var te;K((null===(te=q.error)||void 0===te?void 0:te.message)||"")}}catch(Y){K(Y)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(K,Y,Ae){super(Y),this.code=K,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(K,Y,Ae){this.service=K,this.serviceName=Y,this.errors=Ae}create(K,...Y){const Ae=Y[0]||{},q=`${this.service}/${K}`,te=this.errors[K],ke=te?function Ve(H,K){return H.replace(pt,(Y,Ae)=>{const q=K[Ae];return null!=q?String(q):`<${Ae}?>`})}(te,Ae):"Error";return new ve(q,`${this.serviceName}: ${ke} (${q}).`,Ae)}}const pt=/\{\$([^}]+)}/g;function Zt(H){return JSON.parse(H)}function Bt(H){return JSON.stringify(H)}const Ze=function(H){let K={},Y={},Ae={},q="";try{const te=H.split(".");K=Zt(pe(te[0])||""),Y=Zt(pe(te[1])||""),q=te[2],Ae=Y.d||{},delete Y.d}catch(te){}return{header:K,claims:Y,data:Ae,signature:q}},cn=function(H){const Y=Ze(H).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Xt=function(H){const K=Ze(H).claims;return"object"==typeof K&&!0===K.admin};function Rr(H,K){return Object.prototype.hasOwnProperty.call(H,K)}function Qt(H,K){if(Object.prototype.hasOwnProperty.call(H,K))return H[K]}function Ut(H){for(const K in H)if(Object.prototype.hasOwnProperty.call(H,K))return!1;return!0}function Xi(H,K,Y){const Ae={};for(const q in H)Object.prototype.hasOwnProperty.call(H,q)&&(Ae[q]=K.call(Y,H[q],q,H));return Ae}function ui(H,K){if(H===K)return!0;const Y=Object.keys(H),Ae=Object.keys(K);for(const q of Y){if(!Ae.includes(q))return!1;const te=H[q],ke=K[q];if(yr(te)&&yr(ke)){if(!ui(te,ke))return!1}else if(te!==ke)return!1}for(const q of Ae)if(!Y.includes(q))return!1;return!0}function yr(H){return null!==H&&"object"==typeof H}function Nr(H){const K=[];for(const[Y,Ae]of Object.entries(H))Array.isArray(Ae)?Ae.forEach(q=>{K.push(encodeURIComponent(Y)+"="+encodeURIComponent(q))}):K.push(encodeURIComponent(Y)+"="+encodeURIComponent(Ae));return K.length?"&"+K.join("&"):""}function es(H){const K={};return H.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[q,te]=Ae.split("=");K[decodeURIComponent(q)]=decodeURIComponent(te)}}),K}function Qs(H){const K=H.indexOf("?");if(!K)return"";const Y=H.indexOf("#",K);return H.substring(K,Y>0?Y:void 0)}class zr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let K=1;K<this.blockSize;++K)this.pad_[K]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(K,Y){Y||(Y=0);const Ae=this.W_;if("string"==typeof K)for(let Dt=0;Dt<16;Dt++)Ae[Dt]=K.charCodeAt(Y)<<24|K.charCodeAt(Y+1)<<16|K.charCodeAt(Y+2)<<8|K.charCodeAt(Y+3),Y+=4;else for(let Dt=0;Dt<16;Dt++)Ae[Dt]=K[Y]<<24|K[Y+1]<<16|K[Y+2]<<8|K[Y+3],Y+=4;for(let Dt=16;Dt<80;Dt++){const Yn=Ae[Dt-3]^Ae[Dt-8]^Ae[Dt-14]^Ae[Dt-16];Ae[Dt]=4294967295&(Yn<<1|Yn>>>31)}let At,vn,q=this.chain_[0],te=this.chain_[1],ke=this.chain_[2],Xe=this.chain_[3],_t=this.chain_[4];for(let Dt=0;Dt<80;Dt++){Dt<40?Dt<20?(At=Xe^te&(ke^Xe),vn=1518500249):(At=te^ke^Xe,vn=1859775393):Dt<60?(At=te&ke|Xe&(te|ke),vn=2400959708):(At=te^ke^Xe,vn=3395469782);const Yn=(q<<5|q>>>27)+At+_t+vn+Ae[Dt]&4294967295;_t=Xe,Xe=ke,ke=4294967295&(te<<30|te>>>2),te=q,q=Yn}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+_t&4294967295}update(K,Y){if(null==K)return;void 0===Y&&(Y=K.length);const Ae=Y-this.blockSize;let q=0;const te=this.buf_;let ke=this.inbuf_;for(;q<Y;){if(0===ke)for(;q<=Ae;)this.compress_(K,q),q+=this.blockSize;if("string"==typeof K){for(;q<Y;)if(te[ke]=K.charCodeAt(q),++ke,++q,ke===this.blockSize){this.compress_(te),ke=0;break}}else for(;q<Y;)if(te[ke]=K[q],++ke,++q,ke===this.blockSize){this.compress_(te),ke=0;break}}this.inbuf_=ke,this.total_+=Y}digest(){const K=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&Y,Y/=256;this.compress_(this.buf_);let Ae=0;for(let q=0;q<5;q++)for(let te=24;te>=0;te-=8)K[Ae]=this.chain_[q]>>te&255,++Ae;return K}}function Ri(H,K){const Y=new bt(H,K);return Y.subscribe.bind(Y)}class bt{constructor(K,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{K(this)}).catch(Ae=>{this.error(Ae)})}next(K){this.forEachObserver(Y=>{Y.next(K)})}error(K){this.forEachObserver(Y=>{Y.error(K)}),this.close(K)}complete(){this.forEachObserver(K=>{K.complete()}),this.close()}subscribe(K,Y,Ae){let q;if(void 0===K&&void 0===Y&&void 0===Ae)throw new Error("Missing Observer.");q=function Nn(H,K){if("object"!=typeof H||null===H)return!1;for(const Y of K)if(Y in H&&"function"==typeof H[Y])return!0;return!1}(K,["next","error","complete"])?K:{next:K,error:Y,complete:Ae},void 0===q.next&&(q.next=On),void 0===q.error&&(q.error=On),void 0===q.complete&&(q.complete=On);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(ke){}}),this.observers.push(q),te}unsubscribeOne(K){void 0===this.observers||void 0===this.observers[K]||(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,K)}sendOne(K,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{Y(this.observers[K])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}const Js=function(H,K,Y,Ae){let q;if(Ae<K?q="at least "+K:Ae>Y&&(q=0===Y?"none":"no more than "+Y),q)throw new Error(H+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+q+".")};function Wr(H,K){return`${H} failed: ${K} argument `}function Pn(H,K,Y,Ae){if((!Ae||Y)&&"function"!=typeof Y)throw new Error(Wr(H,K)+"must be a valid function.")}function di(H,K,Y,Ae){if((!Ae||Y)&&("object"!=typeof Y||null===Y))throw new Error(Wr(H,K)+"must be a valid context object.")}const vo=function(H){const K=[];let Y=0;for(let Ae=0;Ae<H.length;Ae++){let q=H.charCodeAt(Ae);if(q>=55296&&q<=56319){const te=q-55296;Ae++,ne(Ae<H.length,"Surrogate pair missing trail surrogate."),q=65536+(te<<10)+(H.charCodeAt(Ae)-56320)}q<128?K[Y++]=q:q<2048?(K[Y++]=q>>6|192,K[Y++]=63&q|128):q<65536?(K[Y++]=q>>12|224,K[Y++]=q>>6&63|128,K[Y++]=63&q|128):(K[Y++]=q>>18|240,K[Y++]=q>>12&63|128,K[Y++]=q>>6&63|128,K[Y++]=63&q|128)}return K},Yt=function(H){let K=0;for(let Y=0;Y<H.length;Y++){const Ae=H.charCodeAt(Y);Ae<128?K++:Ae<2048?K+=2:Ae>=55296&&Ae<=56319?(K+=4,Y++):K+=3}return K};function Wt(H,K=1e3,Y=2){const Ae=K*Math.pow(Y,H),q=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+q)}function Er(H){return H&&H._delegate?H._delegate:H}},2648:(Je,we,F)=>{var f=F(5e3);let ne=null;function L(){return ne}const ue=new f.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function pe(){return(0,f.LFG)(G)}()},providedIn:"platform"}),n})();const W=new f.OlP("Location Initialized");let G=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){se()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){se()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new G((0,f.LFG)(ue))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Te(n){const e=(0,f.LFG)(ue).location;return new Ye((0,f.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new f.OlP("appBaseHref");let Ye=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(We,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+je(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+je(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(We,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le($e(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=Ne,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(f.LFG(me),f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function De(){return new Ie((0,f.LFG)(me),(0,f.LFG)(de))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}class to{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ir=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new to(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,u),wo(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{wo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function wo(n,e){n.context.$implicit=e.item}let dr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function Sl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class $a{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Pr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),ki=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new $a(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Pr,9))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Pu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Io="browser";function oa(n){return"server"===n}let Lu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new aa((0,f.LFG)(ue),window)}),n})();class aa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function os(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Vu(this.window.history)||Vu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Vu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Do extends class za extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){ne||(ne=n)}(new Do)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Wa(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function so(n){Rl=Rl||document.createElement("a"),Rl.setAttribute("href",n);const e=Rl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ha(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Rl,rn=null;const hr=new f.OlP("TRANSITION_ID"),Tn=[{provide:f.ip1,useFactory:function Bu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[hr,ue,f.zs3],multi:!0}];class as{static init(){(0,f.VLi)(new as)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const d=function(_){u=u||_,a--,0==a&&r(u)};i.forEach(function(_){_.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const To=new f.OlP("EventManagerPlugins");let Ds=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(To),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Oi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ls=(()=>{class n extends Oi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(la),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(la))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function la(n){L().remove(n)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oo=/%COMP%/g;function ua(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ua(n,i,t):(i=i.replace(oo,n),t.push(i))}return t}function xe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ao=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new wn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new pi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new $u(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ua(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ds),f.LFG(ls),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class wn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Et[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Et[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Et[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xe(r)):this.eventManager.addEventListener(e,t,xe(r))}}class pi extends wn{constructor(e,t,r,i){super(e),this.component=r;const a=ua(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function kl(n){return"_ngcontent-%COMP%".replace(oo,n)}(i+"-"+r.id),this.hostAttr=function Hu(n){return"_nghost-%COMP%".replace(oo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $u extends wn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ua(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const d=document.createElement("style");d.textContent=a[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gu=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=["alt","control","meta","shift"],Qg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ts={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gi=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(zu.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),u+=_+".")}),u+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=u,d}static getEventFullKey(t){let r="",i=function Pl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ts.hasOwnProperty(e)&&(e=Ts[e]))}return Qg[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zu.forEach(a=>{a!=i&&Dr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ll=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Io},{provide:f.g9A,useValue:function ao(){Do.makeCurrent(),as.init()},multi:!0},{provide:ue,useFactory:function Wu(){return(0,f.RDi)(document),document},deps:[]}]),qu=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Pi(){return new f.qLn},deps:[]},{provide:To,useClass:Gu,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:To,useClass:gi,multi:!0,deps:[ue]},{provide:Ao,useClass:Ao,deps:[Ds,ls,f.AFp]},{provide:f.FYo,useExisting:Ao},{provide:Oi,useExisting:ls},{provide:ls,useClass:ls,deps:[ue]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Ds,useClass:Ds,deps:[To,f.R0b]},{provide:class gn{},useClass:fr,deps:[]}];let ca=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:hr,useExisting:f.AFp},Tn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:qu,imports:[Pu,f.hGG]}),n})();"undefined"!=typeof window&&window;var An=F(8996),Fi=F(8306);const{isArray:Li}=Array,{getPrototypeOf:ko,prototype:mf,keys:us}=Object;function fa(n){if(1===n.length){const e=n[0];if(Li(e))return{args:e,keys:null};if(function _d(n){return n&&"object"==typeof n&&ko(n)===mf}(e)){const t=us(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var mi=F(8421),Lr=F(7669),Lt=F(5403),vt=F(4004);const{isArray:pa}=Array;function Gl(n){return(0,vt.U)(e=>function ga(n,e){return pa(e)?n(...e):n(e)}(n,e))}function Zu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Yu=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ms=(()=>{class n extends Yu{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const or=new f.OlP("NgValueAccessor"),Tr={provide:or,useExisting:(0,f.Gpc)(()=>xs),multi:!0},zl=new f.OlP("CompositionEventMode");let xs=(()=>{class n extends Yu{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ya(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(zl,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([Tr]),f.qOj]}),n})();function _i(n){return null==n||0===n.length}function Wl(n){return null!=n&&"number"==typeof n.length}const Cn=new f.OlP("NgValidators"),Vi=new f.OlP("NgAsyncValidators"),nm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _a{static min(e){return function Qa(n){return e=>{if(_i(e.value)||_i(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Oo(n){return e=>{if(_i(e.value)||_i(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Ja(n){return _i(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Qu(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Rs(n){return _i(n.value)||nm.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Xa(n){return e=>_i(e.value)||!Wl(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ya(n){return e=>Wl(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function el(n){if(!n)return yi;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(_i(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Xu(e)}static composeAsync(e){return _f(e)}}function yi(n){return null}function Po(n){return null!=n}function Ns(n){const e=(0,f.QGY)(n)?(0,An.D)(n):n;return(0,f.CqO)(e),e}function tl(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ql(n,e){return e.map(t=>t(n))}function Ju(n){return n.map(e=>function va(n){return!n.validate}(e)?e:t=>e.validate(t))}function Xu(n){if(!n)return null;const e=n.filter(Po);return 0==e.length?null:function(t){return tl(ql(t,e))}}function In(n){return null!=n?Xu(Ju(n)):null}function _f(n){if(!n)return null;const e=n.filter(Po);return 0==e.length?null:function(t){return function yd(...n){const e=(0,Lr.jO)(n),{args:t,keys:r}=fa(n),i=new Fi.y(a=>{const{length:u}=t;if(!u)return void a.complete();const d=new Array(u);let _=u,b=u;for(let I=0;I<u;I++){let T=!1;(0,mi.Xf)(t[I]).subscribe((0,Lt.x)(a,k=>{T||(T=!0,b--),d[I]=k},()=>_--,void 0,()=>{(!_||!T)&&(b||a.next(r?Zu(r,d):d),a.complete())}))}});return e?i.pipe(Gl(e)):i}(ql(t,e).map(Ns)).pipe((0,vt.U)(tl))}}function yf(n){return null!=n?_f(Ju(n)):null}function vf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vd(n){return n._rawValidators}function ec(n){return n._rawAsyncValidators}function bd(n){return n?Array.isArray(n)?n:[n]:[]}function tc(n,e){return Array.isArray(n)?n.includes(e):n===e}function ba(n,e){const t=bd(e);return bd(n).forEach(i=>{tc(t,i)||t.push(i)}),t}function nc(n,e){return bd(e).filter(t=>!tc(n,t))}class Ln{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=In(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qr extends Ln{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class er extends Ln{get formDirective(){return null}get path(){return null}}class rc{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Vr=(()=>{class n extends rc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Qr,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),nl=(()=>{class n extends rc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(er,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function Fo(n,e){oc(n,e),e.valueAccessor.writeValue(n.value),function sl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&D(n,e)})}(n,e),function S(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ol(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&D(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ui(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ds(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ks(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oc(n,e){const t=vd(n);null!==e.validator?n.setValidators(vf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ec(n);null!==e.asyncValidator?n.setAsyncValidators(vf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ks(e._rawValidators,i),ks(e._rawAsyncValidators,i)}function ds(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=vd(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=ec(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return ks(e._rawValidators,r),ks(e._rawAsyncValidators,r),t}function D(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function N(n,e){oc(n,e)}function Kt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Vn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const hs="VALID",ei="INVALID",ar="PENDING",ti="DISABLED";function Cd(n){return(Zl(n)?n.validators:n)||null}function Id(n){return Array.isArray(n)?In(n):n||null}function Kl(n,e){return(Zl(e)?e.asyncValidators:n)||null}function ac(n){return Array.isArray(n)?yf(n):n||null}function Zl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Dd=n=>n instanceof lc,Cf=n=>n instanceof If;function Ql(n){return Dd(n)?n.value:n.getRawValue()}function Td(n,e){const t=Cf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function dv(n,e){Cf(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class Ad{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Id(this._rawValidators),this._composedAsyncValidatorFn=ac(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hs}get invalid(){return this.status===ei}get pending(){return this.status==ar}get disabled(){return this.status===ti}get enabled(){return this.status!==ti}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Id(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ac(e)}addValidators(e){this.setValidators(ba(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ba(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nc(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nc(e,this._rawAsyncValidators))}hasValidator(e){return tc(this._rawValidators,e)}hasAsyncValidator(e){return tc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ar,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ti,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hs,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hs||this.status===ar)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ti:hs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ar,this._hasOwnPendingAsyncValidator=!0;const t=Ns(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Ea(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Cf(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof Sd)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?ti:this.errors?ei:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ar)?ar:this._anyControlsHaveStatus(ei)?ei:hs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class lc extends Ad{constructor(e=null,t,r){super(Cd(t),Kl(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zl(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class If extends Ad{constructor(e,t,r){super(Cd(t),Kl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){dv(this,e),Object.keys(e).forEach(r=>{Td(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Ql(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Sd extends Ad{constructor(e,t,r){super(Cd(t),Kl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){dv(this,e),e.forEach((r,i)=>{Td(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Ql(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const hv={provide:er,useExisting:(0,f.Gpc)(()=>al)},uc=(()=>Promise.resolve(null))();let al=(()=>{class n extends er{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new If({},In(t),yf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uc.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Fo(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uc.then(()=>{const r=this._findContainer(t.path),i=new If({});N(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){uc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Kt(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cn,10),f.Y36(Vi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([hv]),f.qOj]}),n})(),Af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const am={provide:or,useExisting:(0,f.Gpc)(()=>Sf),multi:!0};let Sf=(()=>{class n extends Ms{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([am]),f.qOj]}),n})(),lm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const xf=new f.OlP("NgModelWithFormControlWarning"),dw={provide:er,useExisting:(0,f.Gpc)(()=>ll)};let ll=(()=>{class n extends er{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ds(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Fo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ui(t.control||null,t,!1),Vn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Kt(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ui(r||null,t),Dd(i)&&(Fo(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);N(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function U(n,e){return ds(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){oc(this.form,this),this._oldForm&&ds(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cn,10),f.Y36(Vi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([dw]),f.qOj,f.TTD]}),n})();const ul={provide:Qr,useExisting:(0,f.Gpc)(()=>eu)};let eu=(()=>{class n extends Qr{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function St(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===xs?t=a:function Ct(n){return Object.getPrototypeOf(n.constructor)===Ms}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function it(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function bi(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(er,13),f.Y36(Cn,10),f.Y36(Vi,10),f.Y36(or,10),f.Y36(xf,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([ul]),f.qOj,f.TTD]}),n})(),_m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[lm]]}),n})(),_w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[_m]}),n})(),hc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[_m]}),n})();var ru=F(4986);function nt(...n){const e=(0,Lr.yG)(n);return(0,An.D)(n,e)}var Lo=F(6451),Vd=F(3099),lr=F(4482);function Br(n,e){return(0,lr.e)((t,r)=>{let i=null,a=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,Lt.x)(r,_=>{null==i||i.unsubscribe();let b=0;const I=a++;(0,mi.Xf)(n(_,I)).subscribe(i=(0,Lt.x)(r,T=>r.next(e?e(_,T,I,b++):T),()=>{i=null,d()}))},()=>{u=!0,d()}))})}function wi(n,e,t,r,i){return(a,u)=>{let d=t,_=e,b=0;a.subscribe((0,Lt.x)(u,I=>{const T=b++;_=d?n(_,I,T):(d=!0,I),r&&u.next(_)},i&&(()=>{d&&u.next(_),u.complete()})))}}function Os(n,e){return(0,lr.e)(wi(n,e,arguments.length>=2,!0))}var Ca=F(4671);function Vf(n,e=Ca.y){return n=null!=n?n:Bd,(0,lr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Lt.x)(r,u=>{const d=e(u);(a||!n(i,d))&&(a=!1,i=d,r.next(u))}))})}function Bd(n,e){return n===e}var Ud=F(5032),Sn=F(5813),Bn=F(2011),bm=(F(8775),F(3942)),Vo=F(4859),be=F(5861),fs=F(9681),P=F(2090),Hi=F(1877);const Hd="@firebase/database";let ps="";function iu(n){ps=n}class wm{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Cm{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Im=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wm(e)}}catch(e){}return new Cm},Bo=Im("localStorage"),Uf=Im("sessionStorage"),su=new Hi.Yd("@firebase/database"),Dm=function(){let n=1;return function(){return n++}}(),dl=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},y=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=y.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let p=null,m=!0;const E=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(su.logLevel=Hi.in.VERBOSE,p=su.log.bind(su),e&&Uf.set("logging_enabled",!0)):"function"==typeof n?p=n:(p=null,Uf.remove("logging_enabled"))},M=function(...n){if(!0===m&&(m=!1,null===p&&!0===Uf.get("logging_enabled")&&E(!0)),p){const e=y.apply(null,n);p(e)}},O=function(n){return function(...e){M(n,...e)}},Q=function(...n){const e="FIREBASE INTERNAL ERROR: "+y(...n);su.error(e)},ce=function(...n){const e=`FIREBASE FATAL ERROR: ${y(...n)}`;throw su.error(e),new Error(e)},Oe=function(...n){const e="FIREBASE WARNING: "+y(...n);su.warn(e)},dt=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},mn="[MIN_NAME]",Un="[MAX_NAME]",gs=function(n,e){if(n===e)return 0;if(n===mn||e===Un)return-1;if(e===mn||n===Un)return 1;{const t=Am(n),r=Am(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},jf=function(n,e){return n===e?0:n<e?-1:1},ou=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},Uo=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=Uo(n[e[r]]);return t+="}",t},fc=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Hf=function(n){(0,P.hu)(!dt(n),"Invalid JSON number");const r=1023;let i,a,u,d,_;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const b=[];for(_=52;_;_-=1)b.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)b.push(a%2?1:0),a=Math.floor(a/2);b.push(i?1:0),b.reverse();const I=b.join("");let T="";for(_=0;_<64;_+=8){let k=parseInt(I.substr(_,8),2).toString(16);1===k.length&&(k="0"+k),T+=k}return T.toLowerCase()},Ev=new RegExp("^-?(0*)\\d{1,10}$"),Gd=-2147483648,Gf=2147483647,Am=function(n){if(Ev.test(n)){const e=Number(n);if(e>=Gd&&e<=Gf)return e}return null},pc=function(n){try{n()}catch(e){setTimeout(()=>{throw Oe("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},zd=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Cv{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Oe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class rA{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(M("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oe(e)}}let zf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const yw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Av="websocket",Sv="long_polling";class Kf{constructor(e,t,r,i,a=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bo.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Zf(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===Av)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Sv)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function bw(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return zn(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class Mm{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const xm={},Yf={};function Rm(n){const e=n.toString();return xm[e]||(xm[e]=new Mm),xm[e]}class Qf{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&pc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class lu{constructor(e,t,r,i,a,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(e),this.stats_=Rm(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Zf(t,Sv,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Qf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Nv((...a)=>{const[u,d,_,b,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&yw.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lu.forceAllow_=!0}static forceDisallow(){lu.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!lu.forceAllow_&&(lu.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=fc(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Nv{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Dm(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Nv.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){M("frame writing exception"),d.stack&&M(d.stack),M(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||M("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{M("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let km=null;"undefined"!=typeof MozWebSocket?km=MozWebSocket:"undefined"!=typeof WebSocket&&(km=WebSocket);let Wd=(()=>{class n{constructor(t,r,i,a,u,d,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=Rm(r),this.connURL=n.connectionURL_(r,d,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const d={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&yw.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),u&&(d.p=u),Zf(t,Av,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bo.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${ps}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,_=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;_&&(u.proxy={origin:_})}this.mySock=new km(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==km&&!n.forceDisallow_}static previouslyFailed(){return Bo.isInMemoryStorage||!0===Bo.get("previous_websocket_failure")}markConnectionHealthy(){Bo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=fc(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Sw=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[lu,Wd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Wd&&Wd.isAvailable();let i=r&&!Wd.previouslyFailed();if(t.webSocketOnly&&(r||Oe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wd];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Pv{constructor(e,t,r,i,a,u,d,_,b,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=_,this.onKill_=b,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new Sw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ou("t",e),r=ou("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ou("t",e),r=ou("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ou("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Q("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Q("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Oe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),zd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dA{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Jf{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class gc extends Jf{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new gc}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class an{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function hn(){return new an("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function uu(n){return n.pieces_.length-n.pieceNum_}function Dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new an(n.pieces_,e)}function Fv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Vm(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Pw(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new an(e,0)}function Wn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof an)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new an(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function Ci(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return Ci(Dn(n),Dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hA(n,e){const t=Vm(n,0),r=Vm(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=gs(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Xf(n,e){if(uu(n)!==uu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function jo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(uu(n)>uu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class ok{constructor(e,t){this.errorPrefix_=t,this.parts_=Vm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);fA(this)}}function fA(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Kd(n))}function Kd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Fw extends Jf{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Fw}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Bm=1e3;let Ho,cu=(()=>{class n extends dA{constructor(t,r,i,a,u,d,_,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=_,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=O("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fw.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&gc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,P.Pz)(u)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:d=>{const _=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[u];void 0===d||a!==d||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const b=_.d,I=_.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Oe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Q("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bm,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let _=!1,b=null;const I=function(){b?b.close():(_=!0,a())};t.realtime_={close:I,sendRequest:function(B){(0,P.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(B)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,j]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);_?M("getToken() completed but was canceled"):(M("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=j&&j.token,b=new Pv(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,re=>{Oe(re+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&Oe(B),I())}}})()}interrupt(t){M("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){M("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Bm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>Uo(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new an(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){M("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){M("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ps.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=gc.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class $t{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new $t(e,t)}}class jm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new $t(mn,e),i=new $t(mn,t);return 0!==this.compare(r,i)}minPost(){return $t.MIN}}class Vv extends jm{static get __EMPTY_NODE(){return Ho}static set __EMPTY_NODE(e){Ho=e}compare(e,t){return gs(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $t.MIN}maxPost(){return new $t(Un,Ho)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new $t(e,Ho)}toString(){return".key"}}const Da=new Vv;class Zd{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let du,$o=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ms.EMPTY_NODE,this.right=null!=u?u:ms.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ms.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ms.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ms{constructor(e,t=ms.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ms(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$o.BLACK,null,null))}remove(e){return new ms(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$o.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zd(this.root_,null,this.comparator_,!0,e)}}function gA(n,e){return gs(n.name,e.name)}function mc(n,e){return gs(n,e)}ms.EMPTY_NODE=new class Vw{copy(e,t,r,i,a){return this}insert(e,t,r){return new $o(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _c=function(n){return"number"==typeof n?"number:"+Hf(n):"string:"+n},Yd=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===du||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===du||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yc,Uv,jv,Qd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yd(this.priorityNode_)}static set __childrenNodeConstructor(t){yc=t}static get __childrenNodeConstructor(){return yc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===uu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_c(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Hf(this.value_):this.value_,this.lazyHash_=dl(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yn=new class Bw extends jm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?gs(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(Un,new Qd("[PRIORITY-POST]",jv))}makePost(e,t){const r=Uv(e);return new $t(t,new Qd("[PRIORITY-POST]",r))}toString(){return".priority"}},mA=Math.log(2);class Uw{constructor(e){this.count=parseInt(Math.log(e+1)/mA,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gv=function(n,e,t,r){n.sort(e);const i=function(_,b){const I=b-_;let T,k;if(0===I)return null;if(1===I)return T=n[_],k=t?t(T):T,new $o(k,T.node,$o.BLACK,null,null);{const B=parseInt(I/2,10)+_,j=i(_,B),re=i(B+1,b);return T=n[B],k=t?t(T):T,new $o(k,T.node,$o.BLACK,j,re)}},d=function(_){let b=null,I=null,T=n.length;const k=function(j,re){const Re=T-j,at=T;T-=j;const ot=i(Re+1,at),mt=n[Re],ct=t?t(mt):mt;B(new $o(ct,mt.node,re,null,ot))},B=function(j){b?(b.left=j,b=j):(I=j,b=j)};for(let j=0;j<_.count;++j){const re=_.nextBitIsOne(),Re=Math.pow(2,_.count-(j+1));re?k(Re,$o.BLACK):(k(Re,$o.BLACK),k(Re,$o.RED))}return I}(new Uw(n.length));return new ms(r||e,d)};let Hm;const vc={};class fl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(vc&&yn,"ChildrenNode.ts has not been loaded"),Hm=Hm||new fl({".priority":vc},{".priority":yn}),Hm}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ms?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Da,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator($t.Wrap);let d,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();d=i?Gv(r,e.getCompare()):vc;const _=e.toString(),b=Object.assign({},this.indexSet_);b[_]=e;const I=Object.assign({},this.indexes_);return I[_]=d,new fl(I,b)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const u=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(u,"Missing index implementation for "+a),i===vc){if(u.isDefinedOn(e.node)){const d=[],_=t.getIterator($t.Wrap);let b=_.getNext();for(;b;)b.name!==e.name&&d.push(b),b=_.getNext();return d.push(e),Gv(d,u.getCompare())}return vc}{const d=t.get(e.name);let _=i;return d&&(_=_.remove(new $t(e.name,d))),_.insert(e,e.node)}});return new fl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===vc)return i;{const a=t.get(e.name);return a?i.remove(new $t(e.name,a)):i}});return new fl(r,this.indexSet_)}}let Jd,Pt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Yd(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Jd||(Jd=new n(new ms(mc),null,fl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Jd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Jd:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(Dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new $t(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Jd:this.priorityNode_;return new n(a,d,u)}}updateChild(t,r){const i=qt(t);if(null===i)return r;{(0,P.hu)(".priority"!==qt(t)||1===uu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Dn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(yn,(d,_)=>{r[d]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*i){const d=[];for(const _ in r)d[_]=r[_];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_c(this.getPriority().val())+":"),this.forEachChild(yn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":dl(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new $t(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new $t(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new $t(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,$t.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,$t.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ni?-1:0}withIndex(t){if(t===Da||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Da||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(yn),a=r.getIterator(yn);let u=i.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=a.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Da?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ni=new class _A extends Pt{constructor(){super(new ms(mc),Pt.EMPTY_NODE,fl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pt.EMPTY_NODE}isEmpty(){return!1}};function qn(n,e=null){if(null===n)return Pt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qd(n,qn(e));if(n instanceof Array){let t=Pt.EMPTY_NODE;return zn(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=qn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(qn(e))}{const t=[];let r=!1;if(zn(n,(u,d)=>{if("."!==u.substring(0,1)){const _=qn(d);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new $t(u,_)))}}),0===t.length)return Pt.EMPTY_NODE;const a=Gv(t,gA,u=>u.name,mc);if(r){const u=Gv(t,yn.getCompare());return new Pt(a,qn(e),new fl({".priority":u},{".priority":yn}))}return new Pt(a,qn(e),fl.Default)}}Object.defineProperties($t,{MIN:{value:new $t(mn,Pt.EMPTY_NODE)},MAX:{value:new $t(Un,ni)}}),Vv.__EMPTY_NODE=Pt.EMPTY_NODE,Qd.__childrenNodeConstructor=Pt,function Bv(n){du=n}(ni),function $v(n){jv=n}(ni),function Hv(n){Uv=n}(qn);class jw extends jm{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Ht(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?gs(e.name,t.name):a}makePost(e,t){const r=qn(e),i=Pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new $t(t,i)}maxPost(){const e=Pt.EMPTY_NODE.updateChild(this.indexPath_,ni);return new $t(Un,e)}toString(){return Vm(this.indexPath_,0).join("/")}}const $m=new class dk extends jm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?gs(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(e,t){const r=qn(e);return new $t(t,r)}toString(){return".value"}},ep="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vA=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=ep.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=ep.charAt(e[i]);return(0,P.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Hw=function(n){if(n===""+Gf)return"-";const e=Am(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Un;const a=ep.charAt(ep.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},$w=function(n){if(n===""+Gd)return mn;const e=Am(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Gf:(delete t[t.length-1],t.join("")):(t[t.length-1]=ep.charAt(ep.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function qv(n){return{type:"value",snapshotNode:n}}function Xd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function eh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function tp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zm{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(eh(t,d)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Xd(t,r)):u.trackChildChange(tp(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(yn,(i,a)=>{t.hasChild(i)||r.trackChildChange(eh(i,a))}),t.isLeafNode()||t.forEachChild(yn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(tp(i,a,u))}else r.trackChildChange(Xd(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Pt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class th{constructor(e){this.indexedFilter_=new zm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=th.getStartPost_(e),this.endPost_=th.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new $t(t,r))||(r=Pt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Pt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Pt.EMPTY_NODE);const a=this;return t.forEachChild(yn,(u,d)=>{a.matches(new $t(u,d))||(i=i.updateImmediateChild(u,Pt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class EA{constructor(e){this.rangedFilter_=new th(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new $t(t,r))||(r=Pt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Pt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Pt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const d=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let a,u,d,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Pt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();d=(k,B)=>T(B,k)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let b=0,I=!1;for(;_.hasNext();){const T=_.getNext();!I&&d(a,T)<=0&&(I=!0),I&&b<this.limit_&&d(T,u)<=0?b++:i=i.updateImmediateChild(T.name,Pt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const T=this.index_.getCompare();u=(k,B)=>T(B,k)}else u=this.index_.getCompare();const d=e;(0,P.hu)(d.numChildren()===this.limit_,"");const _=new $t(t,r),b=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),I=this.rangedFilter_.matches(_);if(d.hasChild(t)){const T=d.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=k&&(k.name===t||d.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const B=null==k?1:u(k,_);if(I&&!r.isEmpty()&&B>=0)return null!=a&&a.trackChildChange(tp(t,r,T)),d.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(eh(t,T));const re=d.updateImmediateChild(t,Pt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=a&&a.trackChildChange(Xd(k.name,k.node)),re.updateImmediateChild(k.name,k.node)):re}}return r.isEmpty()?e:I&&u(b,_)>=0?(null!=a&&(a.trackChildChange(eh(b.name,b.node)),a.trackChildChange(Xd(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(b.name,Pt.EMPTY_NODE)):e}}class Ps{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Un}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const e=new Ps;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Gw(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Zv(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Wm(n,e){const t=n.copy();return t.index_=e,t}function qm(n){const e={};if(n.isDefault())return e;let t;return n.index_===yn?t="$priority":n.index_===$m?t="$value":n.index_===Da?t="$key":((0,P.hu)(n.index_ instanceof jw,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ww(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yn&&(e.i=n.index_.toString()),e}class Km extends dA{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=O("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=Km.getListenId_(e,r),d={};this.listens_[u]=d;const _=qm(e._queryParams);this.restRequest_(a+".json",_,(b,I)=>{let T=I;if(404===b&&(T=null,b=null),null===b&&this.onDataUpdate_(a,T,!1,r),(0,P.DV)(this.listens_,u)===d){let k;k=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(k,null)}})}unlisten(e,t){const r=Km.getListenId_(e,t);delete this.listens_[r]}get(e){const t=qm(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,u)=>{let d=u;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let _=null;if(d.status>=200&&d.status<300){try{_=(0,P.cI)(d.responseText)}catch(b){Oe("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,_)}else 401!==d.status&&404!==d.status&&Oe("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class Zm{constructor(){this.rootNode_=Pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function nh(){return{value:null,children:new Map}}function rh(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,nh()),rh(n.children.get(r),e=Dn(e),t)}}function np(n,e){if(Ht(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(yn,(r,i)=>{rh(n,new an(r),i)}),np(n,e)}}if(n.children.size>0){const t=qt(e);return e=Dn(e),n.children.has(t)&&np(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function rp(n,e,t){null!==n.value?t(e,n.value):function qw(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{rp(i,new an(e.toString()+"/"+r),t)})}class hk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&zn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class TA{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hk(e);const r=1e4+2e4*Math.random();zd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;zn(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),zd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fs=(()=>{return(n=Fs||(Fs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Fs;var n})();function Jm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ip{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new an(e));return new ip(hn(),t,this.revert)}}return(0,P.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new ip(Dn(this.path),this.affectedTree,this.revert)}}class Ls{constructor(e,t){this.source=e,this.path=t,this.type=Fs.LISTEN_COMPLETE}operationForChild(e){return Ht(this.path)?new Ls(this.source,hn()):new Ls(this.source,Dn(this.path))}}class Ta{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fs.OVERWRITE}operationForChild(e){return Ht(this.path)?new Ta(this.source,hn(),this.snap.getImmediateChild(e)):new Ta(this.source,Dn(this.path),this.snap)}}class ih{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fs.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new an(e));return t.isEmpty()?null:t.value?new Ta(this.source,hn(),t.value):new ih(this.source,hn(),t)}return(0,P.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ih(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function sh(n,e,t,r,i,a){const u=r.filter(d=>d.type===t);u.sort((d,_)=>function sp(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new $t(e.childName,e.snapshotNode),i=new $t(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,_)),u.forEach(d=>{const _=function Jv(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(b=>{b.respondsTo(d.type)&&e.push(b.createEvent(_,n.query_))})})}function Xm(n,e){return{eventCache:n,serverCache:e}}function bc(n,e,t,r){return Xm(new hu(e,t,r),n.serverCache)}function Xv(n,e,t,r){return Xm(n.eventCache,new hu(e,t,r))}function op(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function fu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let eb;class Mn{constructor(e,t=(()=>(eb||(eb=new ms(jf)),eb))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return zn(e,(r,i)=>{t=t.set(new an(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:hn(),value:this.value};if(Ht(e))return null;{const r=qt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Dn(e),t);return null!=a?{path:Wn(new an(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(Dn(e)):new Mn(null)}}set(e,t){if(Ht(e))return new Mn(t,this.children);{const r=qt(e),a=(this.children.get(r)||new Mn(null)).set(Dn(e),t),u=this.children.insert(r,a);return new Mn(this.value,u)}}remove(e){if(Ht(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const i=r.remove(Dn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Mn(null):new Mn(this.value,a)}return this}}get(e){if(Ht(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(Dn(e)):null}}setTree(e,t){if(Ht(e))return t;{const r=qt(e),a=(this.children.get(r)||new Mn(null)).setTree(Dn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Mn(this.value,u)}}fold(e){return this.fold_(hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Wn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ht(e))return null;{const a=qt(e),u=this.children.get(a);return u?u.findOnPath_(Dn(e),Wn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,hn(),t)}foreachOnPath_(e,t,r){if(Ht(e))return this;{this.value&&r(t,this.value);const i=qt(e),a=this.children.get(i);return a?a.foreachOnPath_(Dn(e),Wn(t,i),r):new Mn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Go{constructor(e){this.writeTree_=e}static empty(){return new Go(new Mn(null))}}function oh(n,e,t){if(Ht(e))return new Go(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=Ci(i,e);return a=a.updateChild(u,t),new Go(n.writeTree_.set(i,a))}{const i=new Mn(t),a=n.writeTree_.setTree(e,i);return new Go(a)}}}function pu(n,e,t){let r=n;return zn(t,(i,a)=>{r=oh(r,Wn(e,i),a)}),r}function nb(n,e){if(Ht(e))return Go.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new Go(t)}}function rb(n,e){return null!=Ec(n,e)}function Ec(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ci(t.path,e)):null}function wc(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yn,(r,i)=>{e.push(new $t(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new $t(r,i.value))}),e}function gu(n,e){if(Ht(e))return n;{const t=Ec(n,e);return new Go(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function ib(n){return n.writeTree_.isEmpty()}function ah(n,e){return Kw(hn(),n.writeTree_,e)}function Kw(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Kw(Wn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Wn(n,".priority"),r)),t}}function Vs(n,e){return RA(e,n)}function Jw(n,e){if(n.snap)return jo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&jo(Wn(n.path,t),e))return!0;return!1}function SA(n){return n.visible}function Xw(n,e,t){let r=Go.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let d;if(a.snap)jo(t,u)?(d=Ci(t,u),r=oh(r,d,a.snap)):jo(u,t)&&(d=Ci(u,t),r=oh(r,hn(),a.snap.getChild(d)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(jo(t,u))d=Ci(t,u),r=pu(r,d,a.children);else if(jo(u,t))if(d=Ci(u,t),Ht(d))r=pu(r,hn(),a.children);else{const _=(0,P.DV)(a.children,qt(d));if(_){const b=_.getChild(Dn(d));r=oh(r,hn(),b)}}}}}return r}function eC(n,e,t,r,i){if(r||i){const a=gu(n.visibleWrites,e);return!i&&ib(a)?t:i||null!=t||rb(a,hn())?ah(Xw(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(jo(b.path,e)||jo(e,b.path))},e),t||Pt.EMPTY_NODE):null}{const a=Ec(n.visibleWrites,e);if(null!=a)return a;{const u=gu(n.visibleWrites,e);return ib(u)?t:null!=t||rb(u,hn())?ah(u,t||Pt.EMPTY_NODE):null}}}function ob(n,e,t,r){return eC(n.writeTree,n.treePath,e,t,r)}function ap(n,e){return function tC(n,e,t){let r=Pt.EMPTY_NODE;const i=Ec(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(yn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=gu(n.visibleWrites,e);return t.forEachChild(yn,(u,d)=>{const _=ah(gu(a,new an(u)),d);r=r.updateImmediateChild(u,_)}),wc(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return wc(gu(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function rC(n,e,t,r){return function gk(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Wn(e,t);if(rb(n.visibleWrites,a))return null;{const u=gu(n.visibleWrites,a);return ib(u)?i.getChild(t):ah(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function lp(n,e){return function MA(n,e){return Ec(n.visibleWrites,e)}(n.writeTree,Wn(n.treePath,e))}function sC(n,e,t){return function nC(n,e,t,r){const i=Wn(e,t),a=Ec(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?ah(gu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function mo(n,e){return RA(Wn(n.treePath,e),n.writeTree)}function RA(n,e){return{treePath:n,writeTree:e}}class _k{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,tp(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,eh(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Xd(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,tp(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ab=new class oC{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class e_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sC(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fu(this.viewCache_),a=function iC(n,e,t,r,i,a){return function xA(n,e,t,r,i,a,u){let d;const _=gu(n.visibleWrites,e),b=Ec(_,hn());if(null!=b)d=b;else{if(null==t)return[];d=ah(_,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const I=[],T=u.getCompare(),k=a?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let B=k.getNext();for(;B&&I.length<i;)0!==T(B,r)&&I.push(B),B=k.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function lC(n,e,t,r,i,a){const u=e.eventCache;if(null!=lp(r,t))return e;{let d,_;if(Ht(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=fu(e),T=ap(r,b instanceof Pt?b:Pt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const b=ob(r,fu(e));d=n.filter.updateFullNode(e.eventCache.getNode(),b,a)}else{const b=qt(t);if(".priority"===b){(0,P.hu)(1===uu(t),"Can't have a priority with additional path components");const I=u.getNode();_=e.serverCache.getNode();const T=rC(r,t,I,_);d=null!=T?n.filter.updatePriority(I,T):u.getNode()}else{const I=Dn(t);let T;if(u.isCompleteForChild(b)){_=e.serverCache.getNode();const k=rC(r,t,u.getNode(),_);T=null!=k?u.getNode().getImmediateChild(b).updateChild(I,k):u.getNode().getImmediateChild(b)}else T=sC(r,b,e.serverCache);d=null!=T?n.filter.updateChild(u.getNode(),b,T,I,i,a):u.getNode()}}return bc(e,d,u.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function lh(n,e,t,r,i,a,u,d){const _=e.serverCache;let b;const I=u?n.filter:n.filter.getIndexedFilter();if(Ht(t))b=I.updateFullNode(_.getNode(),r,null);else if(I.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);b=I.updateFullNode(_.getNode(),B,null)}else{const B=qt(t);if(!_.isCompleteForPath(t)&&uu(t)>1)return e;const j=Dn(t),Re=_.getNode().getImmediateChild(B).updateChild(j,r);b=".priority"===B?I.updatePriority(_.getNode(),Re):I.updateChild(_.getNode(),B,Re,j,ab,null)}const T=Xv(e,b,_.isFullyInitialized()||Ht(t),I.filtersNodes());return lC(n,T,t,i,new e_(i,T,a),d)}function ub(n,e,t,r,i,a,u){const d=e.eventCache;let _,b;const I=new e_(i,e,a);if(Ht(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=bc(e,b,!0,n.filter.filtersNodes());else{const T=qt(t);if(".priority"===T)b=n.filter.updatePriority(e.eventCache.getNode(),r),_=bc(e,b,d.isFullyInitialized(),d.isFiltered());else{const k=Dn(t),B=d.getNode().getImmediateChild(T);let j;if(Ht(k))j=r;else{const re=I.getCompleteChild(T);j=null!=re?".priority"===Fv(k)&&re.getChild(Pw(k)).isEmpty()?re:re.updateChild(k,r):Pt.EMPTY_NODE}_=B.equals(j)?e:bc(e,n.filter.updateChild(d.getNode(),T,j,k,I,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return _}function uC(n,e){return n.eventCache.isCompleteForChild(e)}function cC(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function cb(n,e,t,r,i,a,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,_=e;b=Ht(t)?r:new Mn(null).setTree(t,r);const I=e.serverCache.getNode();return b.children.inorderTraversal((T,k)=>{if(I.hasChild(T)){const j=cC(0,e.serverCache.getNode().getImmediateChild(T),k);_=lh(n,_,new an(T),j,i,a,u,d)}}),b.children.inorderTraversal((T,k)=>{const B=!e.serverCache.isCompleteForChild(T)&&void 0===k.value;if(!I.hasChild(T)&&!B){const re=cC(0,e.serverCache.getNode().getImmediateChild(T),k);_=lh(n,_,new an(T),re,i,a,u,d)}}),_}class PA{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new zm(r.getIndex()),a=function Kv(n){return n.loadsAllData()?new zm(n.getIndex()):n.hasLimit()?new EA(n):new th(n)}(r);this.processor_=function NA(n){return{filter:n}}(a);const u=t.serverCache,d=t.eventCache,_=i.updateFullNode(Pt.EMPTY_NODE,u.getNode(),null),b=a.updateFullNode(Pt.EMPTY_NODE,d.getNode(),null),I=new hu(_,u.isFullyInitialized(),i.filtersNodes()),T=new hu(b,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=Xm(T,I),this.eventGenerator_=new pk(this.query_)}get query(){return this.query_}}function LA(n,e){const t=fu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function n_(n){return 0===n.eventRegistrations_.length}function ch(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ri(n,e,t,r){e.type===Fs.MERGE&&null!==e.source.queryId&&((0,P.hu)(fu(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(op(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function aC(n,e,t,r,i){const a=new _k;let u,d;if(t.type===Fs.OVERWRITE){const b=t;b.source.fromUser?u=ub(n,e,b.path,b.snap,r,i,a):((0,P.hu)(b.source.fromServer,"Unknown source."),d=b.source.tagged||e.serverCache.isFiltered()&&!Ht(b.path),u=lh(n,e,b.path,b.snap,r,i,d,a))}else if(t.type===Fs.MERGE){const b=t;b.source.fromUser?u=function kA(n,e,t,r,i,a,u){let d=e;return r.foreach((_,b)=>{const I=Wn(t,_);uC(e,qt(I))&&(d=ub(n,d,I,b,i,a,u))}),r.foreach((_,b)=>{const I=Wn(t,_);uC(e,qt(I))||(d=ub(n,d,I,b,i,a,u))}),d}(n,e,b.path,b.children,r,i,a):((0,P.hu)(b.source.fromServer,"Unknown source."),d=b.source.tagged||e.serverCache.isFiltered(),u=cb(n,e,b.path,b.children,r,i,d,a))}else if(t.type===Fs.ACK_USER_WRITE){const b=t;u=b.revert?function uh(n,e,t,r,i,a){let u;if(null!=lp(r,t))return e;{const d=new e_(r,e,i),_=e.eventCache.getNode();let b;if(Ht(t)||".priority"===qt(t)){let I;if(e.serverCache.isFullyInitialized())I=ob(r,fu(e));else{const T=e.serverCache.getNode();(0,P.hu)(T instanceof Pt,"serverChildren would be complete if leaf node"),I=ap(r,T)}I=I,b=n.filter.updateFullNode(_,I,a)}else{const I=qt(t);let T=sC(r,I,e.serverCache);null==T&&e.serverCache.isCompleteForChild(I)&&(T=_.getImmediateChild(I)),b=null!=T?n.filter.updateChild(_,I,T,Dn(t),d,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(_,I,Pt.EMPTY_NODE,Dn(t),d,a):_,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=ob(r,fu(e)),u.isLeafNode()&&(b=n.filter.updateFullNode(b,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=lp(r,hn()),bc(e,b,u,n.filter.filtersNodes())}}(n,e,b.path,r,i,a):function OA(n,e,t,r,i,a,u){if(null!=lp(i,t))return e;const d=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Ht(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return lh(n,e,t,_.getNode().getChild(t),i,a,d,u);if(Ht(t)){let b=new Mn(null);return _.getNode().forEachChild(Da,(I,T)=>{b=b.set(new an(I),T)}),cb(n,e,t,b,i,a,d,u)}return e}{let b=new Mn(null);return r.foreach((I,T)=>{const k=Wn(t,I);_.isCompleteForPath(k)&&(b=b.set(I,_.getNode().getChild(k)))}),cb(n,e,t,b,i,a,d,u)}}(n,e,b.path,b.affectedTree,r,i,a)}else{if(t.type!==Fs.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);u=function t_(n,e,t,r,i){const a=e.serverCache;return lC(n,Xv(e,a.getNode(),a.isFullyInitialized()||Ht(t),a.isFiltered()),t,r,ab,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function lb(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=op(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(qv(op(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function yk(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,cp(n,a.changes,a.viewCache.eventCache.getNode(),null)}function cp(n,e,t,r){return function Qv(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function bA(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),sh(n,i,"child_removed",e,r,t),sh(n,i,"child_added",e,r,t),sh(n,i,"child_moved",a,r,t),sh(n,i,"child_changed",e,r,t),sh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let $i,hp;class r_{constructor(){this.views=new Map}}function mu(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),ri(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(ri(u,e,t,r));return a}}function Ic(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=ob(t,i?r:null),_=!1;d?_=!0:r instanceof Pt?(d=ap(t,r),_=!1):(d=Pt.EMPTY_NODE,_=!1);const b=Xm(new hu(d,_,!1),new hu(r,i,!1));return new PA(e,b)}return u}function Dc(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Bs(n,e){let t=null;for(const r of n.views.values())t=t||LA(r,e);return t}function db(n,e){return e._queryParams.loadsAllData()?dp(n):n.views.get(e._queryIdentifier)}function hb(n,e){return null!=db(n,e)}function pl(n){return null!=dp(n)}function dp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let fC=1;class fb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=function mk(){return{visibleWrites:Go.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pb(n,e,t,r,i){return function sb(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=oh(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?mh(n,new Ta({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _u(n,e,t=!1){const r=function Yw(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Qw(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&Jw(d,r.path)?i=!1:jo(r.path,d.path)&&(a=!0)),u--}return!!i&&(a?(function AA(n){n.visibleWrites=Xw(n.allWrites,SA,hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=nb(n.visibleWrites,r.path):zn(r.children,_=>{n.visibleWrites=nb(n.visibleWrites,Wn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Mn(null);return null!=r.snap?a=a.set(hn(),!0):zn(r.children,u=>{a=a.set(new an(u),!0)}),mh(n,new ip(r.path,a,t))}return[]}function fp(n,e,t){return mh(n,new Ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function i_(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||hb(a,e))){const d=function gh(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const d=pl(n);if("default"===i)for(const[_,b]of n.views.entries())u=u.concat(ch(b,t,r)),n_(b)&&(n.views.delete(_),b.query._queryParams.loadsAllData()||a.push(b.query));else{const _=n.views.get(i);_&&(u=u.concat(ch(_,t,r)),n_(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return d&&!pl(n)&&a.push(new(function hh(){return(0,P.hu)($i,"Reference.ts has not been loaded"),$i}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function fh(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=d.removed;u=d.events;const b=-1!==_.findIndex(T=>T._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(i,(T,k)=>pl(k));if(b&&!I){const T=n.syncPointTree_.subtree(i);if(!T.isEmpty()){const k=function bk(n){return n.fold((e,t,r)=>{if(t&&pl(t))return[dp(t)];{let i=[];return t&&(i=Dc(t)),zn(r,(a,u)=>{i=i.concat(u)}),i}})}(T);for(let B=0;B<k.length;++B){const j=k[B],re=j.query,Re=yC(n,j);n.listenProvider_.startListening(pp(re),gb(n,re),Re.hashFn,Re.onComplete)}}}!I&&_.length>0&&!r&&(b?n.listenProvider_.stopListening(pp(e),null):_.forEach(T=>{const k=n.queryToTagMap.get(mb(T));n.listenProvider_.stopListening(pp(T),k)})),function _h(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=mb(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return u}function _C(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(T,k)=>{const B=Ci(T,r);i=i||Bs(k,B),a=a||pl(k)});let d,u=n.syncPointTree_.get(r);u?(a=a||pl(u),i=i||Bs(u,hn())):(u=new r_,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?d=!0:(d=!1,i=Pt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,B)=>{const j=Bs(B,hn());j&&(i=i.updateImmediateChild(k,j))}));const _=hb(u,e);if(!_&&!e._queryParams.loadsAllData()){const T=mb(e);(0,P.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const k=function jA(){return fC++}();n.queryToTagMap.set(T,k),n.tagToQueryMap.set(k,T)}let I=function ph(n,e,t,r,i,a){const u=Ic(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function Aa(n,e){n.eventRegistrations_.push(e)}(u,t),function Cc(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(yn,(a,u)=>{r.push(Xd(a,u))}),t.isFullyInitialized()&&r.push(qv(t.getNode())),cp(n,r,t.getNode(),e)}(u,t)}(u,e,t,Vs(n.pendingWriteTree_,r),i,d);if(!_&&!a){const T=db(u,e);I=I.concat(function bC(n,e,t){const r=e._path,i=gb(n,e),a=yC(n,t),u=n.listenProvider_.startListening(pp(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!pl(d.value),"If we're adding a query, it shouldn't be shadowed");else{const _=d.fold((b,I,T)=>{if(!Ht(b)&&I&&pl(I))return[dp(I).query];{let k=[];return I&&(k=k.concat(Dc(I).map(B=>B.query))),zn(T,(B,j)=>{k=k.concat(j)}),k}});for(let b=0;b<_.length;++b){const I=_[b];n.listenProvider_.stopListening(pp(I),gb(n,I))}}return u}(n,e,T))}return I}function s_(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,d)=>{const b=Bs(d,Ci(u,e));if(b)return b});return eC(i,e,a,t,!0)}function mh(n,e){return o_(e,n.syncPointTree_,null,Vs(n.pendingWriteTree_,hn()))}function o_(n,e,t,r){if(Ht(n.path))return a_(n,e,t,r);{const i=e.get(hn());null==t&&null!=i&&(t=Bs(i,hn()));let a=[];const u=qt(n.path),d=n.operationForChild(u),_=e.children.get(u);if(_&&d){const b=t?t.getImmediateChild(u):null,I=mo(r,u);a=a.concat(o_(d,_,b,I))}return i&&(a=a.concat(mu(i,n,r,t))),a}}function a_(n,e,t,r){const i=e.get(hn());null==t&&null!=i&&(t=Bs(i,hn()));let a=[];return e.children.inorderTraversal((u,d)=>{const _=t?t.getImmediateChild(u):null,b=mo(r,u),I=n.operationForChild(u);I&&(a=a.concat(a_(I,d,_,b)))}),i&&(a=a.concat(mu(i,n,r,t))),a}function yC(n,e){const t=e.query,r=gb(n,t);return{hashFn:()=>(function up(n){return n.viewCache_.serverCache.getNode()}(e)||Pt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function BA(n,e,t){const r=vC(n,t);if(r){const i=_b(r),a=i.path,u=i.queryId,d=Ci(a,e);return l_(n,a,new Ls(Jm(u),d))}return[]}(n,t._path,r):function VA(n,e){return mh(n,new Ls({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function Tm(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return i_(n,t,null,a)}}}}function gb(n,e){const t=mb(e);return n.queryToTagMap.get(t)}function mb(n){return n._path.toString()+"$"+n._queryIdentifier}function vC(n,e){return n.tagToQueryMap.get(e)}function _b(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new an(n.substr(0,e))}}function l_(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),mu(r,t,Vs(n.pendingWriteTree_,e),null)}function pp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function hC(){return(0,P.hu)(hp,"Reference.ts has not been loaded"),hp}())(n._repo,n._path):n}class yb{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yb(t)}node(){return this.node_}}class u_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wn(this.path_,e);return new u_(this.syncTree_,t)}node(){return s_(this.syncTree_,this.path_)}}const EC=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?wC(n[".sv"],e,t):"object"==typeof n[".sv"]?HA(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},wC=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},HA=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},CC=function(n,e,t,r){return bb(e,new u_(t,n),r)},vb=function(n,e,t){return bb(n,new yb(e),t)};function bb(n,e,t){const r=n.getPriority().val(),i=EC(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,d=EC(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new Qd(d,qn(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new Qd(i))),u.forEachChild(yn,(d,_)=>{const b=bb(_,e.getImmediateChild(d),t);b!==_&&(a=a.updateImmediateChild(d,b))}),a}}class Eb{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function gp(n,e){let t=e instanceof an?e:new an(e),r=n,i=qt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new Eb(i,r,a),t=Dn(t),i=qt(t)}return r}function Tc(n){return n.node.value}function d_(n,e){n.node.value=e,Ac(n)}function wb(n){return n.node.childCount>0}function Ib(n,e){zn(n.node.children,(t,r)=>{e(new Eb(t,n,r))})}function h_(n,e,t,r){t&&!r&&e(n),Ib(n,i=>{h_(i,e,!0,r)}),t&&r&&e(n)}function f_(n){return new an(null===n.parent?n.name:f_(n.parent)+"/"+n.name)}function Ac(n){null!==n.parent&&function IC(n,e,t){const r=function Cb(n){return void 0===Tc(n)&&!wb(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Ac(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Ac(n))}(n.parent,n.name,n)}const Db=/[\[\].#$\/\u0000-\u001F\u007F]/,Tb=/[\[\].#$\u0000-\u001F\u007F]/,Ab=10485760,Sc=function(n){return"string"==typeof n&&0!==n.length&&!Db.test(n)},mp=function(n){return"string"==typeof n&&0!==n.length&&!Tb.test(n)},p_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!dt(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Sa=function(n,e,t,r){r&&void 0===e||yu((0,P.gK)(n,"value"),e,t)},yu=function(n,e,t){const r=t instanceof an?new ok(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Kd(r));if("function"==typeof e)throw new Error(n+"contains a function "+Kd(r)+" with contents = "+e.toString());if(dt(e))throw new Error(n+"contains "+e.toString()+" "+Kd(r));if("string"==typeof e&&e.length>Ab/3&&(0,P.ug)(e)>Ab)throw new Error(n+"contains a string greater than "+Ab+" utf8 bytes "+Kd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(zn(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!Sc(u)))throw new Error(n+" contains an invalid key ("+u+") "+Kd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ak(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),fA(n)})(r,u),yu(n,d,r),function lk(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Kd(r)+" in addition to actual children.")}},Mb=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];zn(e,(u,d)=>{const _=new an(u);if(yu(i,d,Wn(t,_)),".priority"===Fv(_)&&!p_(d))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Vm(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!Sc(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(hA);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&jo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},m_=function(n,e,t){if(!t||void 0!==e){if(dt(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!p_(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mc=function(n,e,t,r){if(!(r&&void 0===t||Sc(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yh=function(n,e,t,r){if(!(r&&void 0===t||mp(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_s=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},xb=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Sc(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mp(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class GA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _p(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Xf(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function __(n,e,t){_p(n,t),Rb(n,r=>Xf(r,e))}function ys(n,e,t){_p(n,t),Rb(n,r=>jo(r,e)||jo(e,r))}function Rb(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(zA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function zA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();p&&M("event: "+t.toString()),pc(r)}}}const Nb="repo_interrupt";class AC{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nh(),this.transactionQueueTree_=new Eb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ob(n){const t=n.infoData_.getNode(new an(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Ob(n)})}function Pb(n,e,t,r,i){n.dataUpdateCount++;const a=new an(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,P.UI)(t,b=>qn(b));u=function mC(n,e,t,r){const i=vC(n,r);if(i){const a=_b(i),u=a.path,d=a.queryId,_=Ci(u,e),b=Mn.fromObject(t);return l_(n,u,new ih(Jm(d),_,b))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=qn(t);u=function UA(n,e,t,r){const i=vC(n,r);if(null!=i){const a=_b(i),u=a.path,d=a.queryId,_=Ci(u,e);return l_(n,u,new Ta(Jm(d),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,b=>qn(b));u=function gC(n,e,t){const r=Mn.fromObject(t);return mh(n,new ih({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=qn(t);u=fp(n.serverSyncTree_,a,_)}let d=a;u.length>0&&(d=Eh(n,a)),ys(n.eventQueue_,d,u)}function Fb(n,e){y_(n,"connected",e),!1===e&&function qA(n){xc(n,"onDisconnectEvents");const e=vh(n),t=nh();rp(n.onDisconnect_,hn(),(i,a)=>{const u=CC(i,a,n.serverSyncTree_,e);rh(t,i,u)});let r=[];rp(t,hn(),(i,a)=>{r=r.concat(fp(n.serverSyncTree_,i,a));const u=jb(n,i);Eh(n,u)}),n.onDisconnect_=nh(),ys(n.eventQueue_,hn(),r)}(n)}function y_(n,e,t){const r=new an("/.info/"+e),i=qn(t);n.infoData_.updateSnapshot(r,i);const a=fp(n.infoSyncTree_,r,i);ys(n.eventQueue_,r,a)}function yp(n){return n.nextWriteId_++}function xC(n,e,t,r,i){xc(n,"set",{path:e.toString(),value:t,priority:r});const a=vh(n),u=qn(t,r),d=s_(n.serverSyncTree_,e),_=vb(u,d,a),b=yp(n),I=pb(n.serverSyncTree_,e,_,b,!0);_p(n.eventQueue_,I),n.server_.put(e.toString(),u.val(!0),(k,B)=>{const j="ok"===k;j||Oe("set at "+e+" failed: "+k);const re=_u(n.serverSyncTree_,b,!j);ys(n.eventQueue_,e,re),gl(0,i,k,B)});const T=jb(n,e);Eh(n,T),ys(n.eventQueue_,T,[])}function RC(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&np(n.onDisconnect_,e),gl(0,t,r,i)})}function NC(n,e,t,r){const i=qn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&rh(n.onDisconnect_,e,i),gl(0,r,a,u)})}function Lb(n,e,t){let r;r=".info"===qt(e._path)?i_(n.infoSyncTree_,e,t):i_(n.serverSyncTree_,e,t),__(n.eventQueue_,e._path,r)}function Vb(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Nb)}function xc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),M(t,...e)}function gl(n,e,t,r){e&&pc(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function Bb(n,e,t){return s_(n.serverSyncTree_,e,t)||Pt.EMPTY_NODE}function v_(n,e=n.transactionQueueTree_){if(e||Us(n,e),Tc(e)){const t=Ub(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function OC(n,e,t){const r=t.map(b=>b.currentWriteId),i=Bb(n,e,r);let a=i;const u=i.hash();for(let b=0;b<t.length;b++){const I=t[b];(0,P.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const T=Ci(e,I.path);a=a.updateChild(T,I.currentOutputSnapshotRaw)}const d=a.val(!0),_=e;n.server_.put(_.toString(),d,b=>{xc(n,"transaction put response",{path:_.toString(),status:b});let I=[];if("ok"===b){const T=[];for(let k=0;k<t.length;k++)t[k].status=2,I=I.concat(_u(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&T.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();Us(n,gp(n.transactionQueueTree_,e)),v_(n,n.transactionQueueTree_),ys(n.eventQueue_,e,I);for(let k=0;k<T.length;k++)pc(T[k])}else{if("datastale"===b)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Oe("transaction at "+_.toString()+" failed: "+b);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=b}Eh(n,e)}},u)}(n,f_(e),t)}else wb(e)&&Ib(e,t=>{v_(n,t)})}function Eh(n,e){const t=YA(n,e),r=f_(t);return function PC(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const _=e[d],b=Ci(t,_.path);let T,I=!1;if((0,P.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)I=!0,T=_.abortReason,i=i.concat(_u(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)I=!0,T="maxretry",i=i.concat(_u(n.serverSyncTree_,_.currentWriteId,!0));else{const k=Bb(n,_.path,u);_.currentInputSnapshot=k;const B=e[d].update(k.val());if(void 0!==B){yu("transaction failed: Data returned ",B,_.path);let j=qn(B);"object"==typeof B&&null!=B&&(0,P.r3)(B,".priority")||(j=j.updatePriority(k.getPriority()));const Re=_.currentWriteId,at=vh(n),ot=vb(j,k,at);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=ot,_.currentWriteId=yp(n),u.splice(u.indexOf(Re),1),i=i.concat(pb(n.serverSyncTree_,_.path,ot,_.currentWriteId,_.applyLocally)),i=i.concat(_u(n.serverSyncTree_,Re,!0))}else I=!0,T="nodata",i=i.concat(_u(n.serverSyncTree_,_.currentWriteId,!0))}ys(n.eventQueue_,t,i),i=[],I&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}Us(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)pc(r[d]);v_(n,n.transactionQueueTree_)}(n,Ub(n,t),r),r}function YA(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===Tc(r);)r=gp(r,t),t=qt(e=Dn(e));return r}function Ub(n,e){const t=[];return b_(n,e,t),t.sort((r,i)=>r.order-i.order),t}function b_(n,e,t){const r=Tc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ib(e,i=>{b_(n,i,t)})}function Us(n,e){const t=Tc(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,d_(e,t.length>0?t:void 0)}Ib(e,r=>{Us(n,r)})}function jb(n,e){const t=f_(YA(n,e)),r=gp(n.transactionQueueTree_,e);return function $A(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Hb(n,i)}),Hb(n,r),h_(r,i=>{Hb(n,i)}),t}function Hb(n,e){const t=Tc(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,P.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,P.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(_u(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?d_(e,void 0):t.length=a+1,ys(n.eventQueue_,f_(e),i);for(let u=0;u<r.length;u++)pc(r[u])}}const js=function(n,e){const t=FC(n),r=t.namespace;return"firebase.com"===t.domain&&ce(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ce("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Kf(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new an(t.pathString)}},FC=function(n){let e="",t="",r="",i="",a="",u=!0,d="https",_=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(d=n.substring(0,b-1),n=n.substring(b+2));let I=n.indexOf("/");-1===I&&(I=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(I,T)),I<T&&(i=function Ma(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(I,T)));const k=function zo(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oe(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));b=e.indexOf(":"),b>=0?(u="https"===d||"wss"===d,_=parseInt(e.substring(b+1),10)):b=e.length;const B=e.slice(0,b);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:a}};class $b{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class LC{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class VC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class BC{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return RC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_s("OnDisconnect.remove",this._path);const e=new P.BH;return NC(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_s("OnDisconnect.set",this._path),Sa("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return NC(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_s("OnDisconnect.setWithPriority",this._path),Sa("OnDisconnect.setWithPriority",e,this._path,!1),m_("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function Ar(n,e,t,r,i){const a=qn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,d)=>{"ok"===u&&rh(n.onDisconnect_,e,a),gl(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_s("OnDisconnect.update",this._path),Mb("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function kC(n,e,t,r){if((0,P.xb)(t))return M("onDisconnect().update() called with empty data.  Don't do anything."),void gl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&zn(t,(u,d)=>{const _=qn(d);rh(n.onDisconnect_,Wn(e,u),_)}),gl(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class vs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ht(this._path)?null:Fv(this._path)}get ref(){return new Hs(this._repo,this._path)}get _queryIdentifier(){const e=Ww(this._queryParams),t=Uo(e);return"{}"===t?"default":t}get _queryObject(){return Ww(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof vs))return!1;const t=this._repo===e._repo,r=Xf(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ow(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function wh(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _o(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Da){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==mn)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Un)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===yn){if(null!=e&&!p_(e)||null!=t&&!p_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof jw||n.getIndex()===$m,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function E_(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Hs extends vs{constructor(e,t){super(e,t,new Ps,!1)}get parent(){const e=Pw(this._path);return null===e?null:new Hs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Rc{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new an(e),r=xa(this.ref,e);return new Rc(this._node.getChild(t),r,yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Rc(i,xa(this.ref,r),yn)))}hasChild(e){const t=new an(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Gb(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?xa(n._root,e):n._root}function zb(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=js(e,n._repo.repoInfo_.nodeAdmin);xb("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ce("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Gb(n,t.path.toString())}function xa(n,e){return null===qt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yh("child","path",t,!1)):yh("child","path",e,!1),new Hs(n._repo,Wn(n._path,e));var t}function vp(n,e){n=(0,P.m9)(n),_s("set",n._path),Sa("set",e,n._path,!1);const t=new P.BH;return xC(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function $C(n,e){Mb("update",e,n._path,!1);const t=new P.BH;return function WA(n,e,t,r){xc(n,"update",{path:e.toString(),value:t});let i=!0;const a=vh(n),u={};if(zn(t,(d,_)=>{i=!1,u[d]=CC(Wn(e,d),qn(_),n.serverSyncTree_,a)}),i)M("update() called with empty data.  Don't do anything."),gl(0,r,"ok",void 0);else{const d=yp(n),_=function pC(n,e,t,r){!function Zw(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=pu(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Mn.fromObject(t);return mh(n,new ih({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);_p(n.eventQueue_,_),n.server_.merge(e.toString(),t,(b,I)=>{const T="ok"===b;T||Oe("update at "+e+" failed: "+b);const k=_u(n.serverSyncTree_,d,!T),B=k.length>0?Eh(n,e):e;ys(n.eventQueue_,B,k),gl(0,r,b,I)}),zn(t,b=>{const I=jb(n,Wn(e,b));Eh(n,I)}),ys(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function GC(n){return function MC(n,e){const t=function vk(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,I)=>{const T=Ci(b,t);r=r||Bs(I,T)});let i=n.syncPointTree_.get(t);i?r=r||Bs(i,hn()):(i=new r_,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new hu(r,!0,!1):null;return function FA(n){return op(n.viewCache_)}(Ic(i,e,Vs(n.pendingWriteTree_,e._path),a?u.getNode():Pt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=qn(r).withIndex(e._queryParams.getIndex()),a=fp(n.serverSyncTree_,e._path,i);return __(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(xc(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new Rc(e,new Hs(n._repo,n._path),n._queryParams.getIndex()))}class bp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new $b("value",this,new Rc(e.snapshotNode,new Hs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new LC(this,e,t):null}matches(e){return e instanceof bp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ep{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new LC(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=xa(new Hs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new $b(e.type,this,new Rc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ep&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ch(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,b=(I,T)=>{Lb(n._repo,n,d),_(I,T)};b.userCallback=t.userCallback,b.context=t.context,t=b}const u=new VC(t,a||void 0),d="value"===e?new bp(u):new Ep(e,u);return function KA(n,e,t){let r;r=".info"===qt(e._path)?_C(n.infoSyncTree_,e,t):_C(n.serverSyncTree_,e,t),__(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>Lb(n._repo,n,d)}function C_(n,e,t,r){return Ch(n,"value",e,t,r)}function Wb(n,e,t,r){return Ch(n,"child_added",e,t,r)}function zC(n,e,t,r){return Ch(n,"child_changed",e,t,r)}function WC(n,e,t,r){return Ch(n,"child_moved",e,t,r)}function qC(n,e,t,r){return Ch(n,"child_removed",e,t,r)}function KC(n,e,t){let r=null;const i=t?new VC(t):null;"value"===e?r=new bp(i):e&&(r=new Ep(e,i)),Lb(n._repo,n,r)}class Wo{}class ZC extends Wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("endAt",this._value,e._path,!0);const t=Zv(e._queryParams,this._value,this._key);if(E_(t),_o(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class JA extends Wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("endBefore",this._value,e._path,!1);const t=function IA(n,e,t){let r,i;return n.index_===Da?("string"==typeof e&&(e=$w(e)),i=Zv(n,e,t)):(r=null==t?mn:$w(t),i=Zv(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(E_(t),_o(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class YC extends Wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("startAt",this._value,e._path,!0);const t=Gw(e._queryParams,this._value,this._key);if(E_(t),_o(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class tS extends Wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sa("startAfter",this._value,e._path,!1);const t=function zw(n,e,t){let r;if(n.index_===Da)"string"==typeof e&&(e=Hw(e)),r=Gw(n,e,t);else{let i;i=null==t?Un:Hw(t),r=Gw(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(E_(t),_o(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class rS extends Wo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(e._repo,e._path,function wA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class sS extends Wo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(e._repo,e._path,function CA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class aS extends Wo{constructor(e){super(),this._path=e}_apply(e){wh(e,"orderByChild");const t=new an(this._path);if(Ht(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new jw(t),i=Wm(e._queryParams,r);return _o(i),new vs(e._repo,e._path,i,!0)}}class JC extends Wo{_apply(e){wh(e,"orderByKey");const t=Wm(e._queryParams,Da);return _o(t),new vs(e._repo,e._path,t,!0)}}class eI extends Wo{_apply(e){wh(e,"orderByPriority");const t=Wm(e._queryParams,yn);return _o(t),new vs(e._repo,e._path,t,!0)}}class nI extends Wo{_apply(e){wh(e,"orderByValue");const t=Wm(e._queryParams,$m);return _o(t),new vs(e._repo,e._path,t,!0)}}class iI extends Wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Sa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZC(this._value,this._key)._apply(new YC(this._value,this._key)._apply(e))}}function $s(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function dh(n){(0,P.hu)(!$i,"__referenceConstructor has already been defined"),$i=n})(Hs),function dC(n){(0,P.hu)(!hp,"__referenceConstructor has already been defined"),hp=n}(Hs);const ml={};function Nc(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ce("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),M("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,b,u=js(a,i),d=u.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(_=!0,a=`http://${b}?ns=${d.namespace}`,u=js(a,i),d=u.repoInfo):_=!u.repoInfo.secure;const I=i&&_?new zf(zf.OWNER):new rA(n.name,n.options,e);xb("Invalid Firebase Database URL",u),Ht(u.path)||ce("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function qb(n,e,t,r){let i=ml[e.name];i||(i={},ml[e.name]=i);let a=i[n.toURLString()];return a&&ce("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new AC(n,false,t,r),i[n.toURLString()]=a,a}(d,n,I,new Cv(n.name,t));return new lI(T,n)}class lI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function kb(n,e,t){if(n.stats_=Rm(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Km(n.repoInfo_,(r,i,a,u)=>{Pb(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Fb(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new cu(n.repoInfo_,e,(r,i,a,u)=>{Pb(n,r,i,a,u)},r=>{Fb(n,r)},r=>{!function SC(n,e){zn(e,(t,r)=>{y_(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Mv(n,e){const t=n.toString();return Yf[t]||(Yf[t]=e()),Yf[t]}(n.repoInfo_,()=>new TA(n.stats_,n.server_)),n.infoData_=new Zm,n.infoSyncTree_=new fb({startListening:(r,i,a,u)=>{let d=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(d=fp(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),y_(n,"connected",!1),n.serverSyncTree_=new fb({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(d,_)=>{const b=u(d,_);ys(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hs(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wk(n,e){const t=ml[e];(!t||t[n.key]!==n)&&ce(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Vb(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ce("Cannot call "+e+" on a deleted database.")}}function Kb(){Sw.IS_TRANSPORT_INITIALIZED&&Oe("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ik(){Kb(),lu.forceDisallow()}function It(){Kb(),Wd.forceDisallow(),lu.forceAllow()}function dS(n,e){E(n,e)}const T_={".sv":"timestamp"};class uI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}cu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},cu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function D_(n){iu(fs.SDK_VERSION),(0,fs._registerComponent)(new Vo.wA("database",(e,{instanceIdentifier:t})=>Nc(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,fs.registerVersion)(Hd,"0.13.0",n),(0,fs.registerVersion)(Hd,"0.13.0","esm2017")}();const hI=new Hi.Yd("@firebase/database-compat"),fI=function(n){hI.warn("FIREBASE WARNING: "+n)};class wp{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,fI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class mS{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),yh("DataSnapshot.child","path",e,!1),new vu(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new vu(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ii(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ii{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const u=ii.getCancelAndContextArgs_("Query.on",r,i),d=(b,I)=>{t.call(u.context,new vu(this.database,b),I)};d.userCallback=t,d.context=u.context;const _=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return C_(this._delegate,d,_),t;case"child_added":return Wb(this._delegate,d,_),t;case"child_removed":return qC(this._delegate,d,_),t;case"child_changed":return zC(this._delegate,d,_),t;case"child_moved":return WC(this._delegate,d,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,KC(this._delegate,e,i)}else KC(this._delegate,e)}get(){return GC(this._delegate).then(e=>new vu(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=ii.getCancelAndContextArgs_("Query.once",r,i),u=new P.BH,d=(b,I)=>{const T=new vu(this.database,b);t&&t.call(a.context,T,I),u.resolve(T)};d.userCallback=t,d.context=a.context;const _=b=>{a.cancel&&a.cancel.call(a.context,b),u.reject(b)};switch(e){case"value":C_(this._delegate,d,_,{onlyOnce:!0});break;case"child_added":Wb(this._delegate,d,_,{onlyOnce:!0});break;case"child_removed":qC(this._delegate,d,_,{onlyOnce:!0});break;case"child_changed":zC(this._delegate,d,_,{onlyOnce:!0});break;case"child_moved":WC(this._delegate,d,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ii(this.database,$s(this._delegate,function iS(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new rS(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ii(this.database,$s(this._delegate,function oS(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sS(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ii(this.database,$s(this._delegate,function QC(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yh("orderByChild","path",n,!1),new aS(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ii(this.database,$s(this._delegate,function XC(){return new JC}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ii(this.database,$s(this._delegate,function tI(){return new eI}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ii(this.database,$s(this._delegate,function rI(){return new nI}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ii(this.database,$s(this._delegate,function eS(n=null,e){return Mc("startAt","key",e,!0),new YC(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ii(this.database,$s(this._delegate,function nS(n,e){return Mc("startAfter","key",e,!0),new tS(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ii(this.database,$s(this._delegate,function QA(n,e){return Mc("endAt","key",e,!0),new ZC(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ii(this.database,$s(this._delegate,function XA(n,e){return Mc("endBefore","key",e,!0),new JA(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ii(this.database,$s(this._delegate,function sI(n,e){return Mc("equalTo","key",e,!0),new iI(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ii))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ii(this.database,new Hs(this._delegate._repo,this._delegate._path))}}class Ii extends ii{constructor(e,t){super(e,new vs(t._repo,t._path,new Ps,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ii(this.database,xa(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ii(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Ii(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=vp(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,fI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_s("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=$C(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function HC(n,e,t){if(_s("setWithPriority",n._path),Sa("setWithPriority",e,n._path,!1),m_("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return xC(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function jC(n){return _s("remove",n._path),vp(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function hS(n,e,t){var r;if(n=(0,P.m9)(n),_s("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,d=C_(n,()=>{});return function bh(n,e,t,r,i,a){xc(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:Dm(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Bb(n,e,void 0);u.currentInputSnapshot=d;const _=u.update(d.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{yu("transaction failed: Data returned ",_,u.path),u.status=0;const b=gp(n.transactionQueueTree_,e),I=Tc(b)||[];let T;I.push(u),d_(b,I),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(T=(0,P.DV)(_,".priority"),(0,P.hu)(p_(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(s_(n.serverSyncTree_,e)||Pt.EMPTY_NODE).getPriority().val();const k=vh(n),B=qn(_,T),j=vb(B,d,k);u.currentOutputSnapshotRaw=B,u.currentOutputSnapshotResolved=j,u.currentWriteId=yp(n);const re=pb(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);ys(n.eventQueue_,e,re),v_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,b,I)=>{let T=null;_?a.reject(_):(T=new Rc(I,new Hs(n._repo,n._path),yn),a.resolve(new uI(b,T)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new mS(a.committed,new vu(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function w_(n,e){n=(0,P.m9)(n),_s("setPriority",n._path),m_("setPriority",e,!1);const t=new P.BH;return xC(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function UC(n,e){n=(0,P.m9)(n),_s("push",n._path),Sa("push",e,n._path,!0);const t=Ob(n._repo),r=vA(t),i=xa(n,r),a=xa(n,r);let u;return u=null!=e?vp(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ii(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Ii(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return _s("Reference.onDisconnect",this._delegate._path),new wp(new BC(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ih{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ik,forceLongPolling:It}}useEmulator(e,t,r={}){!function uS(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ce("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ce('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new zf(zf.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new zf(u)}!function lS(n,e,t,r){n.repoInfo_=new Kf(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Ii){const t=zb(this._delegate,e.toString());return new Ii(this,t)}{const t=Gb(this._delegate,e);return new Ii(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=zb(this._delegate,e);return new Ii(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function cS(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),Vb(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function I_(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function ZA(n){n.persistentConnection_&&n.persistentConnection_.resume(Nb)}(n._repo)}(this._delegate)}}Ih.ServerValue={TIMESTAMP:function tr(){return T_}(),increment:n=>function Tk(n){return{".sv":{increment:n}}}(n)};var gI=Object.freeze({__proto__:null,initStandalone:function pI({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){iu(t);const u=new Vo.zt("auth-internal",new Vo.H0("database-standalone"));return u.setComponent(new Vo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Ih(Nc(n,u,void 0,e,a),n),namespace:i}}});const _S=Ih.ServerValue;!function Cp(n){n.INTERNAL.registerComponent(new Vo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Ih(i,r)},"PUBLIC").setServiceProps({Reference:Ii,Query:ii,Database:Ih,DataSnapshot:vu,enableLogging:dS,INTERNAL:gI,ServerValue:_S}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(bm.Z);var Sr=F(7579),A_=F(5363),yS=F(6063);class vS extends Sr.x{constructor(e=1/0,t=1/0,r=yS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let d=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)d=_;d&&r.splice(0,d+1)}}}function Zb(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Vd.B)({connector:()=>new vS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Ip=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ra(n,e){return(0,lr.e)((t,r)=>{let i=0;t.subscribe((0,Lt.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Dp=F(5698);function _I(n){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Lt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yI(n=Sk){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Lt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Sk(){return new Ip}function Dh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ra((i,a)=>n(i,a,r)):Ca.y,(0,Dp.q)(1),t?_I(e):yI(()=>new Ip))}var _l=F(576);function bS(n,e){return(0,_l.m)(e)?Br(()=>n,e):Br(()=>n)}var S_=F(9468);F(5867);const vI=new Map,bI={activated:!1,tokenObservers:[]},SS={initialized:!1,enabled:!1};function gr(n){return vI.get(n)||bI}function qo(n,e){vI.set(n,e)}function Mp(){return SS}class EI{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function kS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gi=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wI(n){if(!gr(n).activated)throw Gi.create("use-before-activation",{appName:n.name})}function O_(n,e){return P_.apply(this,arguments)}function P_(){return(P_=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,a)}catch(T){throw Gi.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==u.status)throw Gi.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(T){throw Gi.create("fetch-parse-error",{originalErrorMessage:T.message})}const _=d.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const b=1e3*Number(_[1]),I=Date.now();return{token:d.token,expireTimeMillis:I+b,issuedAtTimeMillis:I}})).apply(this,arguments)}function CI(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const xp="firebase-app-check-store";let Th=null;function Jb(){return Th||(Th=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(xp,{keyPath:"compositeKey"})}}catch(t){e(Gi.create("storage-open",{originalErrorMessage:t.message}))}}),Th)}function L_(){return(L_=(0,be.Z)(function*(n,e){const r=(yield Jb()).transaction(xp,"readwrite"),a=r.objectStore(xp).put({compositeKey:n,value:e});return new Promise((u,d)=>{a.onsuccess=_=>{u()},r.onerror=_=>{var b;d(Gi.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Ah=new Hi.Yd("@firebase/app-check");function Rp(n,e){return(0,P.hl)()?function US(n,e){return function II(n,e){return L_.apply(this,arguments)}(function TI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ah.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Sh(){return Mp().enabled}function AI(){return SI.apply(this,arguments)}function SI(){return(SI=(0,be.Z)(function*(){const n=Mp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $S={error:"UNKNOWN_ERROR"};function GS(n){return P.US.encodeString(JSON.stringify(n),!1)}function B_(n){return nE.apply(this,arguments)}function nE(){return(nE=(0,be.Z)(function*(n,e=!1){const t=n.app;wI(t);const r=gr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&G_(_)&&(i=_)}if(!e&&i&&G_(i))return{token:i.token};let d,u=!1;if(Sh()){r.exchangeTokenPromise||(r.exchangeTokenPromise=O_(CI(t,yield AI()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),u=!0);const _=yield r.exchangeTokenPromise;return yield Rp(t,_),qo(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ah.warn(_.message):Ah.error(_),a=_}return i?(d={token:i.token},qo(t,Object.assign(Object.assign({},r),{token:i})),yield Rp(t,i)):d=xI(a),u&&Mh(t,d),d})).apply(this,arguments)}function j_(n,e){const t=gr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),qo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function H_(n){const{app:e}=n,t=gr(e);let r=t.tokenRefresher;r||(r=function $_(n){const{app:e}=n;return new EI((0,be.Z)(function*(){let r;if(r=gr(e).token?yield B_(n,!0):yield B_(n),r.error)throw r.error}),()=>!0,()=>{const t=gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),qo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Mh(n,e){const t=gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function G_(n){return n.expireTimeMillis-Date.now()>0}function xI(n){return{token:GS($S),error:n}}class RI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gr(this.app);for(const t of e)j_(this.app,t.next);return Promise.resolve()}}const PI="app-check-internal";!function kp(){(0,fs._registerComponent)(new Vo.wA("app-check",n=>function zS(n,e){return new RI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PI).initialize()})),(0,fs._registerComponent)(new Vo.wA(PI,n=>function WS(n){return{getToken:e=>B_(n,e),addTokenListener:e=>function U_(n,e,t,r){const{app:i}=n,a=gr(i),u={next:t,error:r,type:e};if(qo(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&G_(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),H_(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>H_(n))}(n,"INTERNAL",e),removeTokenListener:e=>j_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,fs.registerVersion)("@firebase/app-check","0.5.8")}();class Op{constructor(){return(0,Sn.vb)("app-check")}}"undefined"!=typeof window&&window;var Fp=F(127);const aE=new f.OlP("angularfire2.auth.use-emulator"),lE=new f.OlP("angularfire2.auth.settings"),Rh=new f.OlP("angularfire2.auth.tenant-id"),Nh=new f.OlP("angularfire2.auth.langugage-code"),uE=new f.OlP("angularfire2.auth.use-device-language"),cE=new f.OlP("angularfire.auth.persistence"),Z_=(n,e,t,r,i,a,u,d)=>(0,Bn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),u)for(const[b,I]of Object.entries(u))_.settings[b]=I;return d&&_.setPersistence(d),_},[t,r,i,a,u,d]);let Y_=(()=>{class n{constructor(t,r,i,a,u,d,_,b,I,T,k,B){const j=new Sr.x,re=nt(void 0).pipe((0,A_.Q)(u.outsideAngular),Br(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8775)))),(0,vt.U)(()=>(0,Bn.on)(t,a,r)),(0,vt.U)(Re=>Z_(Re,a,d,b,I,T,_,k)),Zb({bufferSize:1,refCount:!1}));if(oa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{re.pipe(Dh()).subscribe();const at=re.pipe(Br(ct=>ct.getRedirectResult().then(Ft=>Ft,()=>null)),Sn.iC,Zb({bufferSize:1,refCount:!1})),ot=re.pipe(Br(ct=>new Fi.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>ct.onAuthStateChanged(zt=>Ft.next(zt),zt=>Ft.error(zt),()=>Ft.complete()))})))),mt=re.pipe(Br(ct=>new Fi.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>ct.onIdTokenChanged(zt=>Ft.next(zt),zt=>Ft.error(zt),()=>Ft.complete()))}))));this.authState=at.pipe(bS(ot),(0,S_.R)(u.outsideAngular),(0,A_.Q)(u.insideAngular)),this.user=at.pipe(bS(mt),(0,S_.R)(u.outsideAngular),(0,A_.Q)(u.insideAngular)),this.idToken=this.user.pipe(Br(ct=>ct?(0,An.D)(ct.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(Br(ct=>ct?(0,An.D)(ct.getIdTokenResult()):nt(null))),this.credential=(0,Lo.T)(at,j,this.authState.pipe(Ra(ct=>!ct))).pipe((0,vt.U)(ct=>(null==ct?void 0:ct.user)?ct:null),(0,S_.R)(u.outsideAngular),(0,A_.Q)(u.insideAngular))}return(0,Bn.pX)(this,re,a,{spy:{apply:(Re,at,ot)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&ot.then(mt=>j.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Bn.Dh),f.LFG(Bn.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Sn.HU),f.LFG(aE,8),f.LFG(lE,8),f.LFG(Rh,8),f.LFG(Nh,8),f.LFG(uE,8),f.LFG(cE,8),f.LFG(Op,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function UI(n){return null==n}function aM(n){return"function"==typeof n.set}function Q_(n,e){return aM(e)?e:n.ref(e)}function J_(n,e){if(function BI(n){return"string"==typeof n}(n))return e.stringCase();if(aM(n))return e.firebaseCase();if(function oM(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function kh(n,e,t="on",r=ru.z){return new Fi.y(i=>{let a=null;return a=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:a,prevKey:u}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:u,key:d}}),(0,Vd.B)())}function X_(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function uM(n,e){const{payload:t,prevKey:r,key:i}=e,a=X_(n,i),u=function lM(n,e){if(UI(e))return 0;{const t=X_(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(_=>{const b={payload:_,type:"value",prevKey:d,key:_.key};return d=_.key,n=[...n,b],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function jI(n){return(UI(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function HI(n,e,t){return function dE(n,e,t){return kh(n,"value","once",t).pipe(Br(r=>{const i=[nt(r)];return e.forEach(a=>i.push(kh(n,a,"on",t))),(0,Lo.T)(...i).pipe(Os(uM,[]))}),Vf())}(n,e=jI(e),t)}function hE(n,e,t){const r=(e=jI(e)).map(i=>kh(n,i,"on",t));return(0,Lo.T)(...r)}function pE(n,e){return function(r,i){return J_(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function zI(n){return function(t){return t?J_(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function gE(n,e){return function(){return kh(n,"value","on",e)}}const dM=new f.OlP("angularfire2.realtimeDatabaseURL"),qI=new f.OlP("angularfire2.database.use-emulator");let KI=(()=>{class n{constructor(t,r,i,a,u,d,_,b,I,T,k,B,j,re,Re){this.schedulers=d;const at=_,ot=(0,Bn.on)(t,u,r);b&&Z_(ot,u,I,k,B,j,T,re),this.database=(0,Bn.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const mt=u.runOutsideAngular(()=>ot.database(i||void 0));return at&&mt.useEmulator(...at),mt},[at])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Q_(this.database,t));let a=i;return r&&(a=r(i)),function cM(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:pE(r,"update"),set:pE(r,"set"),push:i=>r.push(i),remove:zI(r),snapshotChanges:i=>HI(n,i,t).pipe(Sn.iC),stateChanges:i=>hE(n,i,t).pipe(Sn.iC),auditTrail:i=>function fE(n,e,t){return function GI(n,e,t){return function $I(n,e){return kh(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function bv(...n){const e=(0,Lr.jO)(n);return(0,lr.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),d=!1;for(let _=0;_<i;_++)(0,mi.Xf)(n[_]).subscribe((0,Lt.x)(r,b=>{a[_]=b,!d&&!u[_]&&(u[_]=!0,(d=u.every(Ca.y))&&(u=null))},Ud.Z));t.subscribe((0,Lt.x)(r,_=>{if(d){const b=[_,...a];r.next(e?e(...b):b)}}))})}(e),(0,vt.U)(([i,a])=>{const u=i.lastKeyToLoad,d=a.map(_=>_.key);return{actions:a,lastKeyToLoad:u,loadedKeys:d}}),function jd(n){return(0,lr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Lt.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,hE(n,e).pipe(Os((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Sn.iC),valueChanges:(i,a)=>HI(n,i,t).pipe((0,vt.U)(d=>d.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Sn.iC)}}(a,this)}object(t){return function WI(n,e){return{query:n,snapshotChanges:()=>gE(n,e.schedulers.outsideAngular)().pipe(Sn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>gE(n,e.schedulers.outsideAngular)().pipe(Sn.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Q_(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Bn.Dh),f.LFG(Bn.xv,8),f.LFG(dM,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Sn.HU),f.LFG(qI,8),f.LFG(Y_,8),f.LFG(aE,8),f.LFG(lE,8),f.LFG(Rh,8),f.LFG(Nh,8),f.LFG(uE,8),f.LFG(cE,8),f.LFG(Op,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zi=(()=>{class n{constructor(){Fp.Z.registerVersion("angularfire",Sn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[KI]}),n})();var vl=F(8189);function mE(...n){return function hM(){return(0,vl.J)(1)}()((0,An.D)(n,(0,Lr.yG)(n)))}function Oh(...n){const e=(0,Lr.yG)(n);return(0,lr.e)((t,r)=>{(e?mE(n,t,e):mE(n,t)).subscribe(r)})}function Oc(){return(0,lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Lt.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var st,fM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ko={},ey=ey||{},Nt=fM||self;function ty(){}function Lp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ph(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fh="closure_uid_"+(1e9*Math.random()>>>0),_E=0;function Kk(n,e,t){return n.call.apply(n.bind,arguments)}function YI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function si(n,e,t){return(si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kk:YI).apply(null,arguments)}function Vp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function bl(){this.s=this.s,this.o=this.o}var yE={};bl.prototype.s=!1,bl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ZI(n){return Object.prototype.hasOwnProperty.call(n,Fh)&&n[Fh]||(n[Fh]=++_E)}(this);delete yE[n]}},bl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ny=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},gM=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function QI(n){return Array.prototype.concat.apply([],arguments)}function ry(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Bp(n){return/^[\s\xa0]*$/.test(n)}var Wi,JI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Di(n,e){return-1!=n.indexOf(e)}function iy(n,e){return n<e?-1:n>e?1:0}e:{var XI=Nt.navigator;if(XI){var vE=XI.userAgent;if(vE){Wi=vE;break e}}Wi=""}function bE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function EE(n){const e={};for(const t in n)e[t]=n[t];return e}var wE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<wE.length;a++)t=wE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sy(n){return sy[" "](n),n}sy[" "]=ty;var DE,n,yM=Di(Wi,"Opera"),Up=Di(Wi,"Trident")||Di(Wi,"MSIE"),IE=Di(Wi,"Edge"),eD=IE||Up,vM=Di(Wi,"Gecko")&&!(Di(Wi.toLowerCase(),"webkit")&&!Di(Wi,"Edge"))&&!(Di(Wi,"Trident")||Di(Wi,"MSIE"))&&!Di(Wi,"Edge"),Zk=Di(Wi.toLowerCase(),"webkit")&&!Di(Wi,"Edge");function bM(){var n=Nt.document;return n?n.documentMode:void 0}e:{var tD="",nD=(n=Wi,vM?/rv:([^\);]+)(\)|;)/.exec(n):IE?/Edge\/([\d\.]+)/.exec(n):Up?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Zk?/WebKit\/(\S+)/.exec(n):yM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(nD&&(tD=nD?nD[1]:""),Up){var rD=bM();if(null!=rD&&rD>parseFloat(tD)){DE=String(rD);break e}}DE=tD}var oy={};var iD=Nt.document&&Up&&(bM()||parseInt(DE,10))||void 0,sD=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",ty,e),Nt.removeEventListener("test",ty,e)}catch(t){}return n}();function qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pc(n,e){if(qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(vM){e:{try{sy(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pc.Z.h.call(this)}}qi.prototype.h=function(){this.defaultPrevented=!0},mr(Pc,qi);var oD={2:"touch",3:"pen",4:"mouse"};Pc.prototype.h=function(){Pc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var jp="closure_listenable_"+(1e6*Math.random()|0),aD=0;function Qk(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++aD,this.ca=this.fa=!1}function uy(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function cy(n){this.src=n,this.g={},this.h=0}function Hp(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ny(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(uy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function TE(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}cy.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=TE(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new Qk(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var lD="closure_lm_"+(1e6*Math.random()|0),uD={};function EM(n,e,t,r,i){if(r&&r.once)return dD(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)EM(n,e[a],t,r,i);return null}return t=$p(t),n&&n[jp]?n.N(e,t,Ph(r)?!!r.capture:!!r,i):cD(n,e,t,!1,r,i)}function cD(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=Ph(i)?!!i.capture:!!i,d=Gs(n);if(d||(n[lD]=d=new cy(n)),(t=d.add(e,t,r,u,a)).proxy)return t;if(r=function wM(){var e=IM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sD||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(dy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function dD(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)dD(n,e[a],t,r,i);return null}return t=$p(t),n&&n[jp]?n.O(e,t,Ph(r)?!!r.capture:!!r,i):cD(n,e,t,!0,r,i)}function CM(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)CM(n,e[a],t,r,i);else r=Ph(r)?!!r.capture:!!r,t=$p(t),n&&n[jp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=TE(a=n.g[e],t,r,i))&&(uy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Gs(n))&&(e=n.g[e.toString()],n=-1,e&&(n=TE(e,t,r,i)),(t=-1<n?e[n]:null)&&AE(t))}function AE(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[jp])Hp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(dy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gs(e))?(Hp(t,n),0==t.h&&(t.src=null,e[lD]=null)):uy(n)}}}function dy(n){return n in uD?uD[n]:uD[n]="on"+n}function IM(n,e){if(n.ca)n=!0;else{e=new Pc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&AE(n),n=t.call(r,e)}return n}function Gs(n){return(n=n[lD])instanceof cy?n:null}var SE="__closure_events_fn_"+(1e9*Math.random()>>>0);function $p(n){return"function"==typeof n?n:(n[SE]||(n[SE]=function(e){return n.handleEvent(e)}),n[SE])}function Ur(){bl.call(this),this.i=new cy(this),this.P=this,this.I=null}function oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new qi(e,n);else if(e instanceof qi)e.target=e.target||n;else{var i=e;CE(e=new qi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=Lh(u,r,!0,e)&&i}if(i=Lh(u=e.g=n,r,!0,e)&&i,i=Lh(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Lh(u=e.g=t[a],r,!1,e)&&i}function Lh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var d=u.listener,_=u.ia||u.src;u.fa&&Hp(n.i,u),i=!1!==d.call(_,r)&&i}}return i&&!r.defaultPrevented}mr(Ur,bl),Ur.prototype[jp]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){CM(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)uy(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var hy=Nt.JSON.stringify;function hD(){var n=RE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gp,ME=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new TM,n=>n.reset());class TM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function AM(n){Nt.setTimeout(()=>{throw n},0)}function xE(n,e){Gp||function Fc(){var n=Nt.Promise.resolve(void 0);Gp=function(){n.then(SM)}}(),fy||(Gp(),fy=!0),RE.add(n,e)}var fy=!1,RE=new class DM{constructor(){this.h=this.g=null}add(e,t){const r=ME.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function SM(){for(var n;n=hD();){try{n.h.call(n.g)}catch(t){AM(t)}var e=ME;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fy=!1}function NE(n,e){Ur.call(this),this.h=n||1,this.g=e||Nt,this.j=si(this.kb,this),this.l=Date.now()}function kE(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function OE(n,e,t){if("function"==typeof n)t&&(n=si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=si(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function fD(n){n.g=OE(()=>{n.g=null,n.i&&(n.i=!1,fD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mr(NE,Ur),(st=NE.prototype).da=!1,st.S=null,st.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),oi(this,"tick"),this.da&&(kE(this),this.start()))}},st.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){NE.Z.M.call(this),kE(this),delete this.g};class pD extends bl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fD(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zp(n){bl.call(this),this.h=n,this.g={}}mr(zp,bl);var gD=[];function MM(n,e,t,r){Array.isArray(t)||(t&&(gD[0]=t.toString()),t=gD);for(var i=0;i<t.length;i++){var a=EM(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function py(n){bE(n.g,function(e,t){this.g.hasOwnProperty(t)&&AE(e)},n),n.g={}}function Wp(){this.g=!0}function Lc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function FE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return hy(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}zp.prototype.M=function(){zp.Z.M.call(this),py(this)},zp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wp.prototype.Aa=function(){this.g=!1},Wp.prototype.info=function(){};var Eu={},mD=null;function qp(){return mD=mD||new Ur}function LE(n){qi.call(this,Eu.Ma,n)}function Kp(n){const e=qp();oi(e,new LE(e,n))}function _D(n,e){qi.call(this,Eu.STAT_EVENT,n),this.stat=e}function bs(n){const e=qp();oi(e,new _D(e,n))}function NM(n,e){qi.call(this,Eu.Na,n),this.size=e}function Vh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Eu.Ma="serverreachability",mr(LE,qi),Eu.STAT_EVENT="statevent",mr(_D,qi),Eu.Na="timingevent",mr(NM,qi);var gy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function VE(){}function OM(){}VE.prototype.h=null;var BE,my={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vD(){qi.call(this,"d")}function bD(){qi.call(this,"c")}function Vc(){}function Zp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zp(this),this.P=wD,this.W=new NE(n=eD?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ED}function ED(){this.i=null,this.g="",this.h=!1}mr(vD,qi),mr(bD,qi),mr(Vc,VE),Vc.prototype.g=function(){return new XMLHttpRequest},Vc.prototype.i=function(){return{}},BE=new Vc;var wD=45e3,El={},Yp={};function Qp(n,e,t){n.K=1,n.v=Ey(wl(e)),n.s=t,n.U=!0,_y(n,null)}function _y(n,e){n.F=Date.now(),wu(n),n.A=wl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),HM(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ED,n.g=gO(n.l,t?e:null,!n.s),0<n.O&&(n.L=new pD(si(n.Ia,n,n.g),n.O)),MM(n.V,n.g,"readystatechange",n.gb),e=n.H?EE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Kp(1),function xM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",d=a.split("&"),_=0;_<d.length;_++){var b=d[_].split("=");if(1<b.length){var I=b[0];b=b[1];var T=I.split("_");u=2<=T.length&&"type"==T[1]?u+(I+"=")+b+"&":u+(I+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function CD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yy(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=UE(n,t),i==Yp){4==e&&(n.o=4,bs(14),r=!1),Lc(n.j,n.m,null,"[Incomplete Response]");break}if(i==El){n.o=4,bs(15),Lc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Lc(n.j,n.m,i,null),by(n,i)}CD(n)&&i!=Yp&&i!=El&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),qM(e),e.L=!0,bs(11))):(Lc(n.j,n.m,t,"[Invalid Chunked Response]"),Bh(n),vy(n))}function UE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yp:(t=Number(e.substring(t,r)),isNaN(t)?El:(r+=1)+t>e.length?Yp:(e=e.substr(r,t),n.C=r+t,e))}function wu(n){n.Y=Date.now()+n.P,PM(n,n.P)}function PM(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Vh(si(n.eb,n),e)}function jE(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function vy(n){0==n.l.G||n.I||dO(n.l,n)}function Bh(n){jE(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,kE(n.W),py(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function by(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||w(t.i,n)))if(t.I=n.N,!n.J&&w(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Vh(si(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;AD(t),DD(t)}WM(t),bs(18)}if(1>=v(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else tg(t,11)}else if((n.J||t.g==n)&&AD(t),!Bp(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const I=b[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const T=b[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const k=b[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const j=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.i;!a.g&&(Di(j,"spdy")||Di(j,"quic")||Di(j,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(C(a,a.h),a.h=null))}if(r.D){const re=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.sa=re,xn(r.F,r.D,re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=pO(r,r.H?r.la:null,r.W),u.J){x(r.i,u);var d=u,_=r.K;_&&d.setTimeout(_),d.B&&(jE(d),wu(d)),r.g=u}else uO(r);0<t.l.length&&TD(t)}else"stop"!=b[0]&&"close"!=b[0]||tg(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?tg(t,7):GM(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Kp(4)}catch(b){}}function HE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Lp(n)||"string"==typeof n)gM(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Lp(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function FM(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Lp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Uh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Uh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $E(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Cu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Cu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Cu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(st=Zp.prototype).setTimeout=function(n){this.P=n},st.gb=function(n){n=n.target;const e=this.L;e&&3==jc(n)?e.l():this.Ia(n)},st.Ia=function(n){try{if(n==this.g)e:{const I=jc(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>I)&&(3!=I||eD||this.g&&(this.h.h||this.g.ga()||iO(this.g)))){this.I||4!=I||7==e||Kp(8==e||0>=T?3:2),jE(this);var t=this.g.ba();this.N=t;t:if(CD(this)){var r=iO(this.g);n="";var i=r.length,a=4==jc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bh(this),vy(this);var u="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function RM(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,_=this.g;if((d=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bp(d)){var b=d;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,bs(12),Bh(this),vy(this);break e}Lc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,by(this,t)}this.U?(yy(this,I,u),eD&&this.i&&3==I&&(MM(this.V,this.W,"tick",this.fb),this.W.start())):(Lc(this.j,this.m,u,null),by(this,u)),4==I&&Bh(this),this.i&&!this.I&&(4==I?dO(this.l,this):(this.i=!1,wu(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,bs(12)):(this.o=0,bs(13)),Bh(this),vy(this)}}}catch(I){}},st.fb=function(){if(this.g){var n=jc(this.g),e=this.g.ga();this.C<e.length&&(jE(this),yy(this,n,e),this.i&&4!=n&&wu(this))}},st.cancel=function(){this.I=!0,Bh(this)},st.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function PE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Kp(3),bs(17)),Bh(this),this.o=2,vy(this)):PM(this,this.Y-n)},(st=Uh.prototype).R=function(){$E(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},st.T=function(){return $E(this),this.g.concat()},st.get=function(n,e){return Cu(this.h,n)?this.h[n]:e},st.set=function(n,e){Cu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},st.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var GE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bc){this.g=void 0!==e?e:n.g,Jp(this,n.j),this.s=n.s,jh(this,n.i),zE(this,n.m),this.l=n.l,e=n.h;var t=new eg;t.i=e.i,e.g&&(t.g=new Uh(e.g),t.h=e.h),WE(this,t),this.o=n.o}else n&&(t=String(n).match(GE))?(this.g=!!e,Jp(this,t[1]||"",!0),this.s=wy(t[2]||""),jh(this,t[3]||"",!0),zE(this,t[4]),this.l=wy(t[5]||"",!0),WE(this,t[6]||"",!0),this.o=wy(t[7]||"")):(this.g=!!e,this.h=new eg(null,this.g))}function wl(n){return new Bc(n)}function Jp(n,e,t){n.j=t?wy(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jh(n,e,t){n.i=t?wy(e,!0):e}function zE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WE(n,e,t){e instanceof eg?(n.h=e,function o(n,e){e&&!n.j&&(Uc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(UM(this,r),HM(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Xp(e,tO)),n.h=new eg(e,n.g))}function xn(n,e,t){n.h.set(e,t)}function Ey(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wy(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,VM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function VM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xp(e,BM,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xp(e,BM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xp(t,"/"==t.charAt(0)?eO:Xk,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xp(t,nO)),n.join("")};var BM=/[#\/\?@]/g,Xk=/[#\?:]/g,eO=/[#\?]/g,tO=/[#\?@]/g,nO=/#/g;function eg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Uc(n){n.g||(n.g=new Uh,n.h=0,n.i&&function ID(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function UM(n,e){Uc(n),e=s(n,e),Cu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Cu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$E(n)))}function jM(n,e){return Uc(n),e=s(n,e),Cu(n.g.h,e)}function HM(n,e,t){UM(n,e),0<t.length&&(n.i=null,n.g.set(s(n,e),ry(t)),n.h+=t.length)}function s(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function c(n){this.l=n||h,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=eg.prototype).add=function(n,e){Uc(this),this.i=null,n=s(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Uc(this),this.g.forEach(function(t,r){gM(t,function(i){n.call(e,i,r,this)},this)},this)},st.T=function(){Uc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},st.R=function(n){Uc(this);var e=[];if("string"==typeof n)jM(this,n)&&(e=QI(e,this.g.get(s(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=QI(e,n[t])}return e},st.set=function(n,e){return Uc(this),this.i=null,jM(this,n=s(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var h=10;function g(n){return!!n.h||!!n.g&&n.g.size>=n.j}function v(n){return n.h?1:n.g?n.g.size:0}function w(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function C(n,e){n.g?n.g.add(e):n.h=e}function x(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function R(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ry(n.i)}function V(){}function $(){this.g=new V}function ee(n,e,t){const r=t||"";try{HE(n,function(i,a){let u=i;Ph(i)&&(u=hy(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Be(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Ge(n){this.l=n.$b||null,this.j=n.ib||!1}function tt(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Me,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}c.prototype.cancel=function(){if(this.i=R(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},V.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},V.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},mr(Ge,VE),Ge.prototype.g=function(){return new tt(this.l,this.j)},Ge.prototype.i=function(n){return function(){return n}}({}),mr(tt,Ur);var Me=0;function yt(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Vt(n){n.readyState=4,n.l=null,n.j=null,n.A=null,en(n)}function en(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=tt.prototype).open=function(n,e){if(this.readyState!=Me)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,en(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vt(this)),this.readyState=Me},st.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,en(this)),this.g&&(this.readyState=3,en(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yt(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},st.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vt(this):en(this),3==this.readyState&&yt(this)}},st.Ua=function(n){this.g&&(this.response=this.responseText=n,Vt(this))},st.Ta=function(n){this.g&&(this.response=n,Vt(this))},st.ha=function(){this.g&&Vt(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(tt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var zs=Nt.JSON.parse;function Rn(n){Ur.call(this),this.headers=new Uh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cy,this.K=this.L=!1}mr(Rn,Ur);var Cy="",qE=/^https?$/i,KE=["POST","PUT"];function YE(n){return"content-type"==n.toLowerCase()}function Iy(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Dy(n),Hh(n)}function Dy(n){n.D||(n.D=!0,oi(n,"complete"),oi(n,"error"))}function Ty(n){if(n.h&&void 0!==ey&&(!n.C[1]||4!=jc(n)||2!=n.ba()))if(n.v&&4==jc(n))OE(n.Fa,0,n);else if(oi(n,"readystatechange"),4==jc(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(GE)[1]||null;if(!i&&Nt.self&&Nt.self.location){var a=Nt.self.location.protocol;i=a.substr(0,a.length-1)}r=!qE.test(i?i.toLowerCase():"")}t=r}if(t)oi(n,"complete"),oi(n,"success");else{n.m=6;try{var u=2<jc(n)?n.g.statusText:""}catch(_){u=""}n.j=u+" ["+n.ba()+"]",Dy(n)}}finally{Hh(n)}}}function Hh(n,e){if(n.g){rO(n);const t=n.g,r=n.C[0]?ty:null;n.g=null,n.C=null,e||oi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function rO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function jc(n){return n.g?n.g.readyState:0}function iO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Cy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function $M(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function lB(n){let e="";return bE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function QE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sO(n){this.za=0,this.l=[],this.h=new Wp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=QE("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=QE("baseRetryDelayMs",5e3,n),this.$a=QE("retryDelaySeedMs",1e4,n),this.Ya=QE("forwardChannelMaxRetries",2,n),this.ra=QE("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new c(n&&n.concurrentRequestLimit),this.Ca=new $,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function GM(n){if(oO(n),3==n.G){var e=n.V++,t=wl(n.F);xn(t,"SID",n.J),xn(t,"RID",e),xn(t,"TYPE","terminate"),JE(n,t),(e=new Zp(n,n.h,e,void 0)).K=2,e.v=Ey(wl(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=gO(e.l,null),e.g.ea(e.v)),e.F=Date.now(),wu(e)}fO(n)}function DD(n){n.g&&(qM(n),n.g.cancel(),n.g=null)}function oO(n){DD(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),AD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function zM(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&TD(n)}function TD(n){g(n.i)||n.m||(n.m=!0,xE(n.Ha,n),n.C=0)}function aO(n,e){var t;t=e?e.m:n.V++;const r=wl(n.F);xn(r,"SID",n.J),xn(r,"RID",t),xn(r,"AID",n.U),JE(n,r),n.o&&n.s&&$M(r,n.o,n.s),t=new Zp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=lO(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),C(n.i,t),Qp(t,r,e)}function JE(n,e){n.j&&HE({},function(t,r){xn(e,r,t)})}function lO(n,e,t){t=Math.min(n.l.length,t);var r=n.j?si(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let d=!0;for(let _=0;_<t;_++){let b=i[_].h;const I=i[_].g;if(b-=a,0>b)a=Math.max(0,i[_].h-100),d=!1;else try{ee(I,u,"req"+b+"_")}catch(T){r&&r(I)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function uO(n){n.g||n.u||(n.Y=1,xE(n.Ga,n),n.A=0)}function WM(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Vh(si(n.Ga,n),hO(n,n.A)),n.A++,0))}function qM(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function cO(n){n.g=new Zp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=wl(n.oa);xn(e,"RID","rpc"),xn(e,"SID",n.J),xn(e,"CI",n.N?"0":"1"),xn(e,"AID",n.U),JE(n,e),xn(e,"TYPE","xmlhttp"),n.o&&n.s&&$M(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ey(wl(e)),t.s=null,t.U=!0,_y(t,n)}function AD(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function dO(n,e){var t=null;if(n.g==e){AD(n),qM(n),n.g=null;var r=2}else{if(!w(n.i,e))return;t=e.D,x(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;oi(r=qp(),new NM(r,t,e,i)),TD(n)}else uO(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function uB(n,e){return!(v(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Vh(si(n.Ha,n,e),hO(n,n.C)),n.C++,0)))}(n,e)||2==r&&WM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:tg(n,5);break;case 4:tg(n,10);break;case 3:tg(n,6);break;default:tg(n,2)}}function hO(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function tg(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=si(n.jb,n);t||(t=new Bc("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Jp(t,"https"),Ey(t)),function Ee(n,e){const t=new Wp;if(Nt.Image){const r=new Image;r.onload=Vp(Be,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Vp(Be,t,r,"TestLoadImage: error",!1,e),r.onabort=Vp(Be,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vp(Be,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bs(2);n.G=0,n.j&&n.j.va(e),fO(n),oO(n)}function fO(n){n.G=0,n.I=-1,n.j&&((0!=R(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ry(n.l),n.l.length=0),n.j.ua())}function pO(n,e,t){let r=function LM(n){return n instanceof Bc?wl(n):new Bc(n,void 0)}(t);if(""!=r.i)e&&jh(r,e+"."+r.i),zE(r,r.m);else{const i=Nt.location;r=function Jk(n,e,t,r){var i=new Bc(null,void 0);return n&&Jp(i,n),e&&jh(i,e),t&&zE(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&bE(n.aa,function(i,a){xn(r,a,i)}),t=n.sa,(e=n.D)&&t&&xn(r,e,t),xn(r,"VER",n.ma),JE(n,r),r}function gO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rn(t&&n.Ba&&!n.qa?new Ge({ib:!0}):n.qa)).L=n.H,e}function mO(){}function SD(){if(Up&&!(10<=Number(iD)))throw Error("Environmental error: no available transport.")}function Zo(n,e){Ur.call(this),this.g=new sO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Bp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ay(this)}function _O(n){vD.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function yO(){bD.call(this),this.status=1}function Ay(n){this.g=n}(st=Rn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():BE.g(),this.C=function kM(n){return n.h||(n.h=n.i())}(this.u?this.u:BE),this.g.onreadystatechange=si(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Iy(this,a)}n=t||"";const i=new Uh(this.headers);r&&HE(r,function(a,u){i.set(u,a)}),r=function mM(n){e:{var e=YE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=ny(KE,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rO(this),0<this.B&&((this.K=function ZE(n){return Up&&function Yk(){return function _M(n){var e=oy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=JI(String(DE)).split("."),t=JI("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=iy(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||iy(0==i[2].length,0==a[2].length)||iy(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=si(this.pa,this)):this.A=OE(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Iy(this,a)}},st.pa=function(){void 0!==ey&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oi(this,"complete"),oi(this,"abort"),Hh(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hh(this,!0)),Rn.Z.M.call(this)},st.Fa=function(){this.s||(this.F||this.v||this.l?Ty(this):this.cb())},st.cb=function(){Ty(this)},st.ba=function(){try{return 2<jc(this)?this.g.status:-1}catch(n){return-1}},st.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},st.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),zs(e)}},st.Da=function(){return this.m},st.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=sO.prototype).ma=8,st.G=1,st.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},st.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Zp(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=EE(a),CE(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lO(this,i,e),xn(t=wl(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),JE(this,t),this.o&&a&&$M(t,this.o,a),C(this.i,i),this.Ra&&xn(t,"TYPE","init"),this.ja?(xn(t,"$req",e),xn(t,"SID","null"),i.$=!0,Qp(i,t,null)):Qp(i,t,e),this.G=2}}else 3==this.G&&(n?aO(this,n):0==this.l.length||g(this.i)||aO(this))},st.Ga=function(){if(this.u=null,cO(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Vh(si(this.bb,this),n)}},st.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,bs(10),DD(this),cO(this))},st.ab=function(){null!=this.v&&(this.v=null,DD(this),WM(this),bs(19))},st.jb=function(n){n?(this.h.info("Successfully pinged google.com"),bs(2)):(this.h.info("Failed to ping google.com"),bs(1))},(st=mO.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Oa=function(){},SD.prototype.g=function(n,e){return new Zo(n,e)},mr(Zo,Ur),Zo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xE(si(n.hb,n,e))),bs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=pO(n,null,n.W),TD(n)},Zo.prototype.close=function(){GM(this.g)},Zo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,zM(this.g,e)}else this.v?((e={}).__data__=hy(n),zM(this.g,e)):zM(this.g,n)},Zo.prototype.M=function(){this.g.j=null,delete this.j,GM(this.g),delete this.g,Zo.Z.M.call(this)},mr(_O,vD),mr(yO,bD),mr(Ay,mO),Ay.prototype.xa=function(){oi(this.g,"a")},Ay.prototype.wa=function(n){oi(this.g,new _O(n))},Ay.prototype.va=function(n){oi(this.g,new yO(n))},Ay.prototype.ua=function(){oi(this.g,"b")},SD.prototype.createWebChannel=SD.prototype.g,Zo.prototype.send=Zo.prototype.u,Zo.prototype.open=Zo.prototype.m,Zo.prototype.close=Zo.prototype.close,gy.NO_ERROR=0,gy.TIMEOUT=8,gy.HTTP_ERROR=6,yD.COMPLETE="complete",OM.EventType=my,my.OPEN="a",my.CLOSE="b",my.ERROR="c",my.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,Rn.prototype.listenOnce=Rn.prototype.O,Rn.prototype.getLastError=Rn.prototype.La,Rn.prototype.getLastErrorCode=Rn.prototype.Da,Rn.prototype.getStatus=Rn.prototype.ba,Rn.prototype.getResponseJson=Rn.prototype.Qa,Rn.prototype.getResponseText=Rn.prototype.ga,Rn.prototype.send=Rn.prototype.ea;var cB=Ko.createWebChannelTransport=function(){return new SD},dB=Ko.getStatEventTarget=function(){return qp()},KM=Ko.ErrorCode=gy,hB=Ko.EventType=yD,fB=Ko.Event=Eu,vO=Ko.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pB=Ko.FetchXmlHttpFactory=Ge,MD=Ko.WebChannel=OM,gB=Ko.XhrIo=Rn;const bO="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let Sy="9.8.0";const $h=new Hi.Yd("@firebase/firestore");function ZM(){return $h.logLevel}function Ue(n,...e){if($h.logLevel<=Hi.in.DEBUG){const t=e.map(YM);$h.debug(`Firestore (${Sy}): ${n}`,...t)}}function jr(n,...e){if($h.logLevel<=Hi.in.ERROR){const t=e.map(YM);$h.error(`Firestore (${Sy}): ${n}`,...t)}}function XE(n,...e){if($h.logLevel<=Hi.in.WARN){const t=e.map(YM);$h.warn(`Firestore (${Sy}): ${n}`,...t)}}function YM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Sy}) INTERNAL ASSERTION FAILED: `+n;throw jr(e),new Error(e)}function kt(n,e){n||ut()}function Qe(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class EO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class vB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bB{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let u=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ti,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const b=u;e.enqueueRetryable((0,be.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},_=b=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ti)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new EO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new Ki(e)}}class EB{constructor(e,t,r){this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class wB{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new EB(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CB{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new wO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Yo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function IB(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Yo.A=-1;class CO{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=IB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function My(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function IO(n){return n+"\0"}class Mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mr.fromMillis(Date.now())}static fromDate(e){return Mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Mr(0,0))}static max(){return new Mt(new Mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function DO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ng(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class e0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===e0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof e0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends e0{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const DB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends e0{construct(e,t,r){return new ai(e,t,r)}static isValidIdentifier(e){return DB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ai(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Pe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(a(),i++)}if(a(),u)throw new Pe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(t)}static emptyPath(){return new ai([])}}class xy{constructor(e){this.fields=e,e.sort(ai.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return My(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new li(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const AB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gh(n){if(kt(!!n),"string"==typeof n){let e=0;const t=AB.exec(n);if(kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rg(n){return"string"==typeof n?li.fromBase64String(n):li.fromUint8Array(n)}function QM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function AO(n){const e=n.mapValue.fields.__previous_value__;return QM(e)?AO(e):e}function t0(n){const e=Gh(n.mapValue.fields.__local_write_time__.timestampValue);return new Mr(e.seconds,e.nanos)}class SB{constructor(e,t,r,i,a,u,d,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=_}}class Hc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hc&&e.projectId===this.projectId&&e.database===this.database}}function n0(n){return null==n}function r0(n){return 0===n&&1/n==-1/0}function SO(n){return"number"==typeof n&&Number.isInteger(n)&&!r0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(ln.fromString(e))}static fromName(e){return new qe(ln.fromString(e).popFirst(5))}static empty(){return new qe(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new ln(e.slice()))}}const zh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xD={nullValue:"NULL_VALUE"};function ig(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QM(n)?4:NO(n)?9007199254740991:10:ut()}function Iu(n,e){if(n===e)return!0;const t=ig(n);if(t!==ig(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return t0(n).isEqual(t0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Gh(r.timestampValue),u=Gh(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,rg(n.bytesValue).isEqual(rg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return _r(r.geoPointValue.latitude)===_r(i.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _r(r.integerValue)===_r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=_r(r.doubleValue),u=_r(i.doubleValue);return a===u?r0(a)===r0(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return My(n.arrayValue.values||[],e.arrayValue.values||[],Iu);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(DO(a)!==DO(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===u[d]||!Iu(a[d],u[d])))return!1;return!0}(n,e);default:return ut()}var i}function s0(n,e){return void 0!==(n.values||[]).find(t=>Iu(t,e))}function Wh(n,e){if(n===e)return 0;const t=ig(n),r=ig(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=_r(i.integerValue||i.doubleValue),d=_r(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return MO(n.timestampValue,e.timestampValue);case 4:return MO(t0(n),t0(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=rg(i),d=rg(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),d=a.split("/");for(let _=0;_<u.length&&_<d.length;_++){const b=Gt(u[_],d[_]);if(0!==b)return b}return Gt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Gt(_r(i.latitude),_r(a.latitude));return 0!==u?u:Gt(_r(i.longitude),_r(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],d=a.values||[];for(let _=0;_<u.length&&_<d.length;++_){const b=Wh(u[_],d[_]);if(b)return b}return Gt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===zh.mapValue&&a===zh.mapValue)return 0;if(i===zh.mapValue)return 1;if(a===zh.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),_=a.fields||{},b=Object.keys(_);d.sort(),b.sort();for(let I=0;I<d.length&&I<b.length;++I){const T=Gt(d[I],b[I]);if(0!==T)return T;const k=Wh(u[d[I]],_[b[I]]);if(0!==k)return k}return Gt(d.length,b.length)}(n.mapValue,e.mapValue);default:throw ut()}}function MO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Gh(n),r=Gh(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Ry(n){return JM(n)}function JM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Gh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rg(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=JM(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const d of i)u?u=!1:a+=",",a+=`${d}:${JM(r.fields[d])}`;return a+"}"}(n.mapValue):ut();var e}function sg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function XM(n){return!!n&&"integerValue"in n}function o0(n){return!!n&&"arrayValue"in n}function xO(n){return!!n&&"nullValue"in n}function RO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function RD(n){return!!n&&"mapValue"in n}function a0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ng(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=a0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=a0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function MB(n){return"nullValue"in n?xD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sg(Hc.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function xB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sg(Hc.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?zh:ut()}function kO(n,e){const t=Wh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function OO(n,e){const t=Wh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!RD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=a0(t)}setAll(e){let t=ai.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=a0(u):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());RD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];RD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ng(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Es(a0(this.value))}}function PO(n){const e=[];return ng(n.fields,(t,r)=>{const i=new ai([t]);if(RD(r)){const a=PO(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new xy(e)}class Kn{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Kn(e,0,Mt.min(),Mt.min(),Es.empty(),0)}static newFoundDocument(e,t,r){return new Kn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new Kn(e,2,t,Mt.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,Mt.min(),Es.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ND{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ex(n){return n.fields.find(e=>2===e.kind)}function og(n){return n.fields.filter(e=>2!==e.kind)}ND.UNKNOWN_ID=-1;class kD{constructor(e,t){this.fieldPath=e,this.kind=t}}class l0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new l0(0,Cl.min())}}function FO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Mr(t+1,0):new Mr(t,r));return new Cl(i,qe.empty(),e)}function RB(n){return new Cl(n.readTime,n.key,-1)}class Cl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cl(Mt.min(),qe.empty(),-1)}static max(){return new Cl(Mt.max(),qe.empty(),-1)}}function LO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class xr{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new OD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new OD(this.root,e,this.comparator,!1)}getReverseIterator(){return new OD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new OD(this.root,e,this.comparator,!0)}}class OD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Zi.RED,this.left=null!=i?i:Zi.EMPTY,this.right=null!=a?a:Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Zi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Zi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VO(this.data.getIterator())}getIteratorFrom(e){return new VO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class VO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ny(n){return n.hasNext()?n.getNext():void 0}class NB{constructor(e,t=null,r=[],i=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=d,this.P=null}}function BO(n,e=null,t=[],r=[],i=null,a=null,u=null){return new NB(n,e,t,r,i,a,u)}function ag(n){const e=Qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ry(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),n0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ry(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ry(r)).join(",")),e.P=t}return e.P}function u0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!jB(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Iu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GO(n.startAt,e.startAt)&&GO(n.endAt,e.endAt)}function PD(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function FD(n,e){return n.filters.filter(t=>t instanceof Yi&&t.field.isEqual(e))}function UO(n,e,t){let r=xD,i=!0;for(const a of FD(n,e)){let u=xD,d=!0;switch(a.op){case"<":case"<=":u=MB(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=xD}kO({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];kO({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function jO(n,e,t){let r=zh,i=!0;for(const a of FD(n,e)){let u=zh,d=!0;switch(a.op){case">=":case">":u=xB(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=zh}OO({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];OO({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new OB(e,t,r):"array-contains"===t?new LB(e,r):"in"===t?new VB(e,r):"not-in"===t?new BB(e,r):"array-contains-any"===t?new UB(e,r):new Yi(e,t,r)}static V(e,t,r){return"in"===t?new PB(e,r):new FB(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Wh(t,this.value)):null!==t&&ig(this.value)===ig(t)&&this.v(Wh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class OB extends Yi{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.v(t)}}class PB extends Yi{constructor(e,t){super(e,"in",t),this.keys=HO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FB extends Yi{constructor(e,t){super(e,"not-in",t),this.keys=HO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class LB extends Yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return o0(t)&&s0(t.arrayValue,this.value)}}class VB extends Yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&s0(this.value.arrayValue,t)}}class BB extends Yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(s0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!s0(this.value.arrayValue,t)}}class UB extends Yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!o0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>s0(this.value.arrayValue,r))}}class qh{constructor(e,t){this.position=e,this.inclusive=t}}class ky{constructor(e,t="asc"){this.field=e,this.dir=t}}function jB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $O(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?qe.comparator(qe.fromName(u.referenceValue),t.key):Wh(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function GO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Iu(n.position[t],e.position[t]))return!1;return!0}class $c{constructor(e,t=null,r=[],i=[],a=null,u="F",d=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=_,this.D=null,this.C=null}}function zO(n,e,t,r,i,a,u,d){return new $c(n,e,t,r,i,a,u,d)}function Oy(n){return new $c(n)}function tx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function nx(n){for(const e of n.filters)if(e.S())return e.field;return null}function rx(n){return null!==n.collectionGroup}function Py(n){const e=Qe(n);if(null===e.D){e.D=[];const t=nx(e),r=tx(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new ky(t)),e.D.push(new ky(ai.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ky(ai.keyField(),a))}}}return e.D}function Na(n){const e=Qe(n);if(!e.C)if("F"===e.limitType)e.C=BO(e.path,e.collectionGroup,Py(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Py(e))t.push(new ky(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new qh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new qh(e.startAt.position,e.startAt.inclusive):null;e.C=BO(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function WO(n,e,t){return new $c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function c0(n,e){return u0(Na(n),Na(e))&&n.limitType===e.limitType}function qO(n){return`${ag(Na(n))}|lt:${n.limitType}`}function ix(n){return`Query(target=${function kB(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ry(r.value)}`;var r}).join(", ")}]`),n0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ry(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ry(t)).join(",")),`Target(${e})`}(Na(n))}; limitType=${n.limitType})`}function sx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const d=$O(i,a,u);return i.inclusive?d<=0:d<0}(t.startAt,Py(t),r)||t.endAt&&!function(i,a,u){const d=$O(i,a,u);return i.inclusive?d>=0:d>0}(t.endAt,Py(t),r)));var t,r}function KO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZO(n){return(e,t)=>{let r=!1;for(const i of Py(n)){const a=$B(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function $B(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,a,u){const d=a.data.field(i),_=u.data.field(i);return null!==d&&null!==_?Wh(d,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function YO(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:r0(e)?"-0":e}}function QO(n){return{integerValue:""+n}}function JO(n,e){return SO(e)?QO(e):YO(n,e)}class LD{constructor(){this._=void 0}}function GB(n,e,t){return n instanceof Fy?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof lg?eP(n,e):n instanceof ug?tP(n,e):function(r,i){const a=XO(r,i),u=nP(a)+nP(r.k);return XM(a)&&XM(r.k)?QO(u):YO(r.M,u)}(n,e)}function zB(n,e,t){return n instanceof lg?eP(n,e):n instanceof ug?tP(n,e):t}function XO(n,e){return n instanceof Ly?XM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Fy extends LD{}class lg extends LD{constructor(e){super(),this.elements=e}}function eP(n,e){const t=rP(e);for(const r of n.elements)t.some(i=>Iu(i,r))||t.push(r);return{arrayValue:{values:t}}}class ug extends LD{constructor(e){super(),this.elements=e}}function tP(n,e){let t=rP(e);for(const r of n.elements)t=t.filter(i=>!Iu(i,r));return{arrayValue:{values:t}}}class Ly extends LD{constructor(e,t){super(),this.M=e,this.k=t}}function nP(n){return _r(n.integerValue||n.doubleValue)}function rP(n){return o0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class d0{constructor(e,t){this.field=e,this.transform=t}}class qB{constructor(e,t){this.version=e,this.transformResults=t}}class Hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function VD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class BD{}function KB(n,e,t){n instanceof h0?function(r,i,a){const u=r.value.clone(),d=aP(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof cg?function(r,i,a){if(!VD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=aP(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(oP(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ox(n,e,t){var i;n instanceof h0?function(r,i,a){if(!VD(r.precondition,i))return;const u=r.value.clone(),d=lP(r.fieldTransforms,a,i);u.setAll(d),i.convertToFoundDocument(sP(i),u).setHasLocalMutations()}(n,e,t):n instanceof cg?function(r,i,a){if(!VD(r.precondition,i))return;const u=lP(r.fieldTransforms,a,i),d=i.data;d.setAll(oP(r)),d.setAll(u),i.convertToFoundDocument(sP(i),d).setHasLocalMutations()}(n,e,t):VD(n.precondition,i=e)&&i.convertToNoDocument(Mt.min())}function ZB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=XO(r.transform,i||null);null!=a&&(null==t&&(t=Es.empty()),t.set(r.field,a))}return t||null}function iP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&My(t,r,(i,a)=>function WB(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lg&&r instanceof lg||t instanceof ug&&r instanceof ug?My(t.elements,r.elements,Iu):t instanceof Ly&&r instanceof Ly?Iu(t.k,r.k):t instanceof Fy&&r instanceof Fy);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function sP(n){return n.isFoundDocument()?n.version:Mt.min()}class h0 extends BD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class cg extends BD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function oP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function aP(n,e,t){const r=new Map;kt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,d=e.data.field(a.field);r.set(a.field,zB(u,d,t[i]))}return r}function lP(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,GB(a,u,e))}return r}class f0 extends BD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ax extends BD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class YB{constructor(e){this.count=e}}var $r,un;function uP(n){switch(n){default:return ut();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function cP(n){if(void 0===n)return jr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case $r.OK:return ge.OK;case $r.CANCELLED:return ge.CANCELLED;case $r.UNKNOWN:return ge.UNKNOWN;case $r.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case $r.INTERNAL:return ge.INTERNAL;case $r.UNAVAILABLE:return ge.UNAVAILABLE;case $r.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case $r.NOT_FOUND:return ge.NOT_FOUND;case $r.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case $r.ABORTED:return ge.ABORTED;case $r.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case $r.DATA_LOSS:return ge.DATA_LOSS;default:return ut()}}(un=$r||($r={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Kh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ng(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return TO(this.inner)}size(){return this.innerSize}}const QB=new xr(qe.comparator);function ka(){return QB}const JB=new xr(qe.comparator);function lx(...n){let e=JB;for(const t of n)e=e.insert(t.key,t);return e}function p0(){return new Kh(n=>n.toString(),(n,e)=>n.isEqual(e))}const XB=new xr(qe.comparator),eU=new jn(qe.comparator);function En(...n){let e=eU;for(const t of n)e=e.add(t);return e}const tU=new jn(Gt);function UD(){return tU}class g0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,m0.createSynthesizedTargetChangeForCurrentChange(e,t)),new g0(Mt.min(),r,UD(),ka(),En())}}class m0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new m0(li.EMPTY_BYTE_STRING,t,En(),En(),En())}}class jD{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class dP{constructor(e,t){this.targetId=e,this.$=t}}class hP{constructor(e,t,r=li.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class fP{constructor(){this.B=0,this.L=gP(),this.U=li.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=En(),t=En(),r=En();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new m0(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=gP()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class nU{constructor(e){this.nt=e,this.st=new Map,this.it=ka(),this.rt=pP(),this.ot=new jn(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(PD(a))if(0===r){const u=new qe(a.path);this.ct(t,u,Kn.newNoDocument(u,Mt.min()))}else kt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,u)=>{const d=this.wt(u);if(d){if(a.current&&PD(d.target)){const _=new qe(d.target.path);null!==this.it.get(_)||this.It(u,_)||this.ct(u,_,Kn.newNoDocument(_,e))}a.j&&(t.set(u,a.H()),a.J())}});let r=En();this.rt.forEach((a,u)=>{let d=!0;u.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.it.forEach((a,u)=>u.setReadTime(e));const i=new g0(e,t,this.ot,this.it,r);return this.it=ka(),this.rt=pP(),this.ot=new jn(Gt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new fP,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new jn(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new fP),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function pP(){return new xr(qe.comparator)}function gP(){return new xr(qe.comparator)}const rU={asc:"ASCENDING",desc:"DESCENDING"},iU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sU{constructor(e,t){this.databaseId=e,this.N=t}}function _0(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mP(n,e){return n.N?e.toBase64():e.toUint8Array()}function oU(n,e){return _0(n,e.toTimestamp())}function Ai(n){return kt(!!n),Mt.fromTimestamp(function(e){const t=Gh(e);return new Mr(t.seconds,t.nanos)}(n))}function ux(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function _P(n){const e=ln.fromString(n);return kt(TP(e)),e}function y0(n,e){return ux(n.databaseId,e.path)}function Du(n,e){const t=_P(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(vP(t))}function cx(n,e){return ux(n.databaseId,e)}function yP(n){const e=_P(n);return 4===e.length?ln.emptyPath():vP(e)}function v0(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vP(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bP(n,e,t){return{name:y0(n,e),fields:t.value.mapValue.fields}}function EP(n,e,t){const r=Du(n,e.name),i=Ai(e.updateTime),a=new Es({mapValue:{fields:e.fields}}),u=Kn.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function b0(n,e){let t;if(e instanceof h0)t={update:bP(n,e.key,e.value)};else if(e instanceof f0)t={delete:y0(n,e.key)};else if(e instanceof cg)t={update:bP(n,e.key,e.data),updateMask:gU(e.fieldMask)};else{if(!(e instanceof ax))return ut();t={verify:y0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof Fy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof lg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ug)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ly)return{fieldPath:a.field.canonicalString(),increment:u.k};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:oU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function dx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Hr.updateTime(Ai(i.updateTime)):void 0!==i.exists?Hr.exists(i.exists):Hr.none():Hr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let d=null;"setToServerValue"in u?(kt("REQUEST_TIME"===u.setToServerValue),d=new Fy):"appendMissingElements"in u?d=new lg(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new ug(u.removeAllFromArray.values||[]):"increment"in u?d=new Ly(a,u.increment):ut();const _=ai.fromServerFormat(u.fieldPath);return new d0(_,d)}(n,i)):[];var i;if(e.update){const i=Du(n,e.update.name),a=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new xy((e.updateMask.fieldPaths||[]).map(b=>ai.fromServerFormat(b)));return new cg(i,a,u,t,r)}return new h0(i,a,t,r)}if(e.delete){const i=Du(n,e.delete);return new f0(i,t)}if(e.verify){const i=Du(n,e.verify);return new ax(i,t)}return ut()}function wP(n,e){return{documents:[cx(n,e.path)]}}function CP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=cx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(I=>function(T){if("=="===T.op){if(RO(T.value))return{unaryFilter:{field:Vy(T.field),op:"IS_NAN"}};if(xO(T.value))return{unaryFilter:{field:Vy(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(RO(T.value))return{unaryFilter:{field:Vy(T.field),op:"IS_NOT_NAN"}};if(xO(T.value))return{unaryFilter:{field:Vy(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vy(T.field),op:hU(T.op),value:T.value}}}(I));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(b=>{return{field:Vy((I=b).field),direction:dU(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(b=e.limit,n.N||n0(b)?b:{value:b});var b,d,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function IP(n){let e=yP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=DP(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new ky(By((T=I).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(I){let T;return T="object"==typeof I?I.value:I,n0(T)?null:T}(t.limit));let _=null;var I;t.startAt&&(_=new qh((I=t.startAt).values||[],!!I.before));let b=null;return t.endAt&&(b=function(I){return new qh(I.values||[],!I.before)}(t.endAt)),zO(e,i,u,a,d,"F",_,b)}function DP(n){return n?void 0!==n.unaryFilter?[pU(n)]:void 0!==n.fieldFilter?[fU(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>DP(e)).reduce((e,t)=>e.concat(t)):ut():[]}function dU(n){return rU[n]}function hU(n){return iU[n]}function Vy(n){return{fieldPath:n.canonicalString()}}function By(n){return ai.fromServerFormat(n.fieldPath)}function fU(n){return Yi.create(By(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function pU(n){switch(n.unaryFilter.op){case"IS_NAN":const e=By(n.unaryFilter.field);return Yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=By(n.unaryFilter.field);return Yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=By(n.unaryFilter.field);return Yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=By(n.unaryFilter.field);return Yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function gU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ws(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AP(e)),e=mU(n.get(t),e);return AP(e)}function mU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function AP(n){return n+"\x01\x01"}function Tu(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&ut(),n.charAt(u+1)){case"\x01":const d=n.substring(a,u);let _;0===i.length?_=d:(i+=d,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:ut()}a=u+2}return new ln(r)}const SP=["userId","batchId"];function HD(n,e){return[n,Ws(e)]}function MP(n,e,t){return[n,Ws(e),t]}const _U={},yU=["prefixPath","collectionGroup","readTime","documentId"],vU=["prefixPath","collectionGroup","documentId"],bU=["collectionGroup","readTime","prefixPath","documentId"],EU=["canonicalId","targetId"],wU=["targetId","path"],CU=["path","targetId"],IU=["collectionId","parent"],DU=["indexId","uid"],TU=["uid","sequenceNumber"],AU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SU=["indexId","uid","orderedDocumentKey"],MU=["userId","collectionPath","documentId"],xU=["userId","collectionPath","largestBatchId"],RU=["userId","collectionGroup","largestBatchId"],xP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NU=[...xP,"documentOverlays"],RP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kU=[...RP,"indexConfiguration","indexState","indexEntries"],NP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(t){return _e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,r)=>{t(e)})}static reject(e){return new _e((t,r)=>{r(e)})}static waitFor(e){return new _e((t,r)=>{let i=0,a=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++a,u&&a===i&&t()},_=>r(_))}),u=!0,a===i&&t()})}static or(e){let t=_e.resolve(!1);for(const r of e)t=t.next(i=>i?_e.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class $D{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ti,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new E0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=hx(r.target.error);this.At.reject(new E0(e,i))}}static open(e,t,r,i){try{return new $D(t,e.transaction(i,r))}catch(a){throw new E0(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PU(t)}}class Il{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Il.Vt((0,P.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),hg(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,P.hl)())return!1;if(Il.St())return!0;const e=(0,P.z$)(),t=Il.Vt(e),r=0<t&&t<10,i=Il.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new E0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Pe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Pe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new E0(e,d))},a.onupgradeneeded=u=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,be.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.Nt(e);const _=$D.open(a.db,e,u?"readonly":"readwrite",r),b=i(_).next(I=>(_.bt(),I)).catch(I=>(_.abort(I),_e.reject(I))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&d<3;if(Ue("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),a.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class OU{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hg(this.Ft.delete())}}class E0 extends Pe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dg(n){return"IndexedDbTransactionError"===n.name}class PU{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hg(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),hg(this.store.add(e))}get(e){return hg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),hg(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),hg(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(u,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new _e((a,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new _e((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,u,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new _e((r,i)=>{t.onerror=a=>{const u=hx(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new _e((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const _=new OU(d),b=t(d.primaryKey,d.value,_);if(b instanceof _e){const I=b.catch(T=>(_.done(),_e.reject(T)));r.push(I)}_.isDone?i():null===_.Lt?d.continue():d.continue(_.Lt)}}).next(()=>_e.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hg(n){return new _e((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=hx(r.target.error);t(i)}})}let OP=!1;function hx(n){const e=Il.Vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OP||(OP=!0,setTimeout(()=>{throw r},0)),r}}return n}class PP extends kP{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Si(n,e){const t=Qe(n);return Il.xt(t.Ht,e)}class fx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&KB(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ox(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ox(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&My(this.mutations,e.mutations,(t,r)=>iP(t,r))&&My(this.baseMutations,e.baseMutations,(t,r)=>iP(t,r))}}class px{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kt(e.mutations.length===r.length);let i=XB;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new px(e,t,r,i)}}class gx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zh{constructor(e,t,r,i,a=Mt.min(),u=Mt.min(),d=li.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new Zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class FP{constructor(e){this.Jt=e}}function LP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:GD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:y0(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:_0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fg(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:fg(e.version)}}var i,a;return r}function GD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pg(n){const e=new Mr(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Uy(n,e){const t=(e.baseMutations||[]).map(a=>dx(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>dx(n.Jt,a)),i=Mr.fromMillis(e.localWriteTimeMs);return new fx(e.batchId,i,t,r)}function w0(n){const e=pg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pg(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(kt(1===(i=n.query).documents.length),r=Na(Oy(yP(i.documents[0])))):r=Na(IP(n.query)),new Zh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,li.fromBase64String(n.resumeToken))}function VP(n,e){const t=fg(e.snapshotVersion),r=fg(e.lastLimboFreeSnapshotVersion);let i;i=PD(e.target)?wP(n.Jt,e.target):CP(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ag(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mx(n){const e=IP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?WO(e,e.limit,"L"):e}function _x(n,e){return new gx(e.largestBatchId,dx(n.Jt,e.overlayMutation))}function BP(n,e){const t=e.path.lastSegment();return[n,Ws(e.path.popLast()),t]}class LU{getBundleMetadata(e,t){return UP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return UP(e).put({bundleId:(r=t).id,createTime:fg(Ai(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:mx(i.bundledQuery),readTime:pg(i.readTime)};var i})}saveNamedQuery(e,t){return jP(e).put({name:(r=t).name,readTime:fg(Ai(r.readTime)),bundledQuery:r.bundledQuery});var r}}function UP(n){return Si(n,"bundles")}function jP(n){return Si(n,"namedQueries")}class yx{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new yx(e,t.uid||"")}getOverlay(e,t){return C0(e).get(BP(this.userId,t)).next(r=>r?_x(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const d=new gx(t,u);i.push(this.Xt(e,d))}),_e.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ws(u.getCollectionPath())));const a=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(C0(e).Qt("collectionPathOverlayIndex",d))}),_e.waitFor(a)}getOverlaysForCollection(e,t,r){const i=p0(),a=Ws(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return C0(e).qt("collectionPathOverlayIndex",u).next(d=>{for(const _ of d){const b=_x(this.M,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=p0();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return C0(e).Wt({index:"collectionGroupOverlayIndex",range:d},(_,b,I)=>{const T=_x(this.M,b);a.size()<i||T.largestBatchId===u?(a.set(T.getKey(),T),u=T.largestBatchId):I.done()}).next(()=>a)}Xt(e,t){return C0(e).put(function(r,i,a){const[u,d,_]=BP(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:b0(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function C0(n){return Si(n,"documentOverlays")}class gg{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(_r(e.integerValue));else if("doubleValue"in e){const r=_r(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),r0(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(rg(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?NO(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ut()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function VU(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function HP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=VU(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}gg.fe=new gg;class BU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=HP(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=HP(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class UU{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class jU{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class I0{constructor(){this.De=new BU,this.Ce=new UU(this.De),this.xe=new jU(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class mg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mg(this.indexId,this.documentKey,this.arrayValue,r)}}function _g(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$P(n.arrayValue,e.arrayValue),0!==t?t:(t=$P(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function $P(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class HU{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=ex(e);if(void 0!==t&&!this.Be(t))return!1;const r=og(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $U{constructor(){this.qe=new vx}addToCollectionParentIndex(e,t){return this.qe.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getIndexType(e,t){return _e.resolve(0)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,t){return _e.resolve(Cl.min())}updateCollectionGroup(e,t,r){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class vx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(ln.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(ln.comparator)).toArray()}}const zD=new Uint8Array(0);class GU{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new vx,this.Ge=new Kh(r=>ag(r),(r,i)=>u0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Ws(i)};return GP(e).put(a)}return _e.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[IO(t),""],!1,!0);return GP(e).qt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Tu(u.parent))}return r})}addFieldIndex(e,t){const r=WD(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=WD(e),i=qD(e),a=D0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=D0(e);let i=!0;const a=new Map;return _e.forEach(this.Qe(t),u=>this.je(e,u).next(d=>{i&&(i=!!d),a.set(u,d)})).next(()=>{if(i){let u=En();const d=[];return _e.forEach(a,(_,b)=>{var I;Ue("IndexedDbIndexManager",`Using index ${I=_,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${ag(t)}`);const T=function(mt,ct){const Ft=ex(ct);if(void 0===Ft)return null;for(const zt of FD(mt,Ft.fieldPath))switch(zt.op){case"array-contains-any":return zt.value.arrayValue.values||[];case"array-contains":return[zt.value]}return null}(b,_),k=function(mt,ct){const Ft=new Map;for(const zt of og(ct))for(const _n of FD(mt,zt.fieldPath))switch(_n.op){case"==":case"in":Ft.set(zt.fieldPath.canonicalString(),_n.value);break;case"not-in":case"!=":return Ft.set(zt.fieldPath.canonicalString(),_n.value),Array.from(Ft.values())}return null}(b,_),B=function(mt,ct){const Ft=[];let zt=!0;for(const _n of og(ct)){const Zs=0===_n.kind?UO(mt,_n.fieldPath,mt.startAt):jO(mt,_n.fieldPath,mt.startAt);Ft.push(Zs.value),zt&&(zt=Zs.inclusive)}return new qh(Ft,zt)}(b,_),j=function(mt,ct){const Ft=[];let zt=!0;for(const _n of og(ct)){const Zs=0===_n.kind?jO(mt,_n.fieldPath,mt.endAt):UO(mt,_n.fieldPath,mt.endAt);Ft.push(Zs.value),zt&&(zt=Zs.inclusive)}return new qh(Ft,zt)}(b,_),re=this.We(_,b,B),Re=this.We(_,b,j),at=this.ze(_,b,k),ot=this.He(_.indexId,T,re,B.inclusive,Re,j.inclusive,at);return _e.forEach(ot,mt=>r.Gt(mt,t.limit).next(ct=>{ct.forEach(Ft=>{const zt=qe.fromSegments(Ft.documentKey);u.has(zt)||(u=u.add(zt),d.push(zt))})}))}).next(()=>d)}return _e.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,u,d){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),b=_/(null!=t?t.length:1),I=[];for(let T=0;T<_;++T){const k=t?this.Je(t[T/b]):zD,B=this.Ye(e,k,r[T%b],i),j=this.Xe(e,k,a[T%b],u),re=d.map(Re=>this.Ye(e,k,Re,!0));I.push(...this.createRange(B,j,re))}return I}Ye(e,t,r,i){const a=new mg(e,qe.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new mg(e,qe.empty(),t,r);return i?a.ke():a}je(e,t){const r=new HU(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const d of a)r.$e(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return _e.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let d=new jn(ai.comparator),_=!1;for(const b of u.filters){const I=b;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?_=!0:d=d.add(I.field))}for(const b of u.orderBy)b.field.isKeyField()||(d=d.add(b.field));return d.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new I0;for(const i of og(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Ne(i.kind);gg.fe.Zt(a,u)}return r.Se()}Je(e){const t=new I0;return gg.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new I0;return gg.fe.Zt(sg(this.databaseId,t),r.Ne(function(i){const a=og(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new I0);let a=0;for(const u of og(e)){const d=r[a++];for(const _ of i)if(this.en(t,u.fieldPath)&&o0(d))i=this.nn(i,u,d);else{const b=_.Ne(u.kind);gg.fe.Zt(d,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const d of i){const _=new I0;_.seed(d.Se()),gg.fe.Zt(u,_.Ne(t.kind)),a.push(_)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=WD(e),i=qD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const u=[];return _e.forEach(a,d=>i.get([d.indexId,this.uid]).next(_=>{u.push(function(b,I){const T=I?new l0(I.sequenceNumber,new Cl(pg(I.readTime),new qe(Tu(I.documentKey)),I.largestBatchId)):l0.empty(),k=b.fields.map(([B,j])=>new kD(ai.fromServerFormat(B),j));return new ND(b.indexId,b.collectionGroup,k,T)}(d,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=WD(e),a=qD(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>_e.forEach(d,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:fg((k=r).readTime),documentKey:Ws(k.documentKey.path),largestBatchId:k.largestBatchId});var k})))}updateIndexEntries(e,t){const r=new Map;return _e.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?_e.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),_e.forEach(d,_=>this.on(e,i,_).next(b=>{const I=this.un(a,_);return b.isEqual(I)?_e.resolve():this.an(e,a,_,b,I)}))))})}cn(e,t,r,i){return D0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return D0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=D0(e);let a=new jn(_g);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,d)=>{a=a.add(new mg(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}un(e,t){let r=new jn(_g);const i=this.Ze(t,e);if(null==i)return r;const a=ex(t);if(null!=a){const u=e.data.field(a.fieldPath);if(o0(u))for(const d of u.arrayValue.values||[])r=r.add(new mg(t.indexId,e.key,this.Je(d),i))}else r=r.add(new mg(t.indexId,e.key,zD,i));return r}an(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,_,b,I,T){const k=d.getIterator(),B=_.getIterator();let j=Ny(k),re=Ny(B);for(;j||re;){let Re=!1,at=!1;if(j&&re){const ot=b(j,re);ot<0?at=!0:ot>0&&(Re=!0)}else null!=j?at=!0:Re=!0;Re?(I(re),re=Ny(B)):at?(T(j),j=Ny(k)):(j=Ny(k),re=Ny(B))}}(i,a,_g,d=>{u.push(this.cn(e,t,r,d))},d=>{u.push(this.hn(e,t,r,d))}),_e.waitFor(u)}rn(e){let t=1;return qD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>_g(u,d)).filter((u,d,_)=>!d||0!==_g(u,_[d-1]));const i=[];i.push(e);for(const u of r){const d=_g(u,e),_=_g(u,t);if(0===d)i[0]=e.ke();else if(d>0&&_<0)i.push(u),i.push(u.ke());else if(_>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,zD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,zD,[]]));return a}getMinOffset(e,t){let r;return _e.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||LO(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=Cl.min()})).next(()=>r)}}function GP(n){return Si(n,"collectionParents")}function D0(n){return Si(n,"indexEntries")}function WD(n){return Si(n,"indexConfiguration")}function qD(n){return Si(n,"indexState")}const zP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new yo(e,yo.DEFAULT_COLLECTION_PERCENTILE,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const _=r.Wt({range:u},(I,T,k)=>(d++,k.delete()));a.push(_.next(()=>{kt(1===d)}));const b=[];for(const I of t.mutations){const T=MP(e,I.key.path,t.batchId);a.push(i.delete(T)),b.push(I.key)}return _e.waitFor(a).next(()=>b)}function KD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}yo.DEFAULT_COLLECTION_PERCENTILE=10,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yo.DEFAULT=new yo(41943040,yo.DEFAULT_COLLECTION_PERCENTILE,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yo.DISABLED=new yo(-1,0,0);class bx{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){kt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new bx(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).Wt({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=jy(e),u=Yh(e);return u.add({}).next(d=>{kt("number"==typeof d);const _=new fx(d,t,r,i),b=function(k,B,j){const re=j.baseMutations.map(at=>b0(k.Jt,at)),Re=j.mutations.map(at=>b0(k.Jt,at));return{userId:B,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:re,mutations:Re}}(this.M,this.userId,_),I=[];let T=new jn((k,B)=>Gt(k.canonicalString(),B.canonicalString()));for(const k of i){const B=MP(this.userId,k.key.path,d);T=T.add(k.key.path.popLast()),I.push(u.put(b)),I.push(a.put(B,_U))}return T.forEach(k=>{I.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.ln[d]=_.keys()}),_e.waitFor(I).next(()=>_)})}lookupMutationBatch(e,t){return Yh(e).get(t).next(r=>r?(kt(r.userId===this.userId),Uy(this.M,r)):null)}fn(e,t){return this.ln[t]?_e.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Yh(e).Wt({index:"userMutationsIndex",range:i},(u,d,_)=>{d.userId===this.userId&&(kt(d.batchId>=r),a=Uy(this.M,d)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Uy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=HD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return jy(e).Wt({range:i},(u,d,_)=>{const[b,I,T]=u,k=Tu(I);if(b===this.userId&&t.path.isEqual(k))return Yh(e).get(T).next(B=>{if(!B)throw ut();kt(B.userId===this.userId),a.push(Uy(this.M,B))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Gt);const i=[];return t.forEach(a=>{const u=HD(this.userId,a.path),d=IDBKeyRange.lowerBound(u),_=jy(e).Wt({range:d},(b,I,T)=>{const[k,B,j]=b,re=Tu(B);k===this.userId&&a.path.isEqual(re)?r=r.add(j):T.done()});i.push(_)}),_e.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=HD(this.userId,r),u=IDBKeyRange.lowerBound(a);let d=new jn(Gt);return jy(e).Wt({range:u},(_,b,I)=>{const[T,k,B]=_,j=Tu(k);T===this.userId&&r.isPrefixOf(j)?j.length===i&&(d=d.add(B)):I.done()}).next(()=>this.dn(e,d))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Yh(e).get(a).next(u=>{if(null===u)throw ut();kt(u.userId===this.userId),r.push(Uy(this.M,u))}))}),_e.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return WP(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),_e.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _e.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return jy(e).Wt({range:r},(a,u,d)=>{if(a[0]===this.userId){const _=Tu(a[1]);i.push(_)}else d.done()}).next(()=>{kt(0===i.length)})})}containsKey(e,t){return qP(e,this.userId,t)}wn(e){return KP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qP(n,e,t){const r=HD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return jy(n).Wt({range:a,jt:!0},(d,_,b)=>{const[I,T,k]=d;I===e&&T===i&&(u=!0),b.done()}).next(()=>u)}function Yh(n){return Si(n,"mutations")}function jy(n){return Si(n,"documentMutations")}function KP(n){return Si(n,"mutationQueues")}class yg{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new yg(0)}static yn(){return new yg(-1)}}class zU{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new yg(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Mt.fromTimestamp(new Mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hy(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Hy(e).Wt((u,d)=>{const _=w0(d);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>_e.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Hy(e).Wt((r,i)=>{const a=w0(i);t(a)})}pn(e){return ZP(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}In(e,t){return ZP(e).put("targetGlobalKey",t)}Tn(e,t){return Hy(e).put(VP(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ag(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Hy(e).Wt({range:i,index:"queryTargetsIndex"},(u,d,_)=>{const b=w0(d);u0(t,b.target)&&(a=b,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Qh(e);return t.forEach(u=>{const d=Ws(u.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),_e.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qh(e);return _e.forEach(t,a=>{const u=Ws(a.path);return _e.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Qh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qh(e);let a=En();return i.Wt({range:r,jt:!0},(u,d,_)=>{const b=Tu(u[1]),I=new qe(b);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Ws(t.path),i=IDBKeyRange.bound([r],[IO(r)],!1,!0);let a=0;return Qh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,d],_,b)=>{0!==u&&(a++,b.done())}).next(()=>a>0)}Et(e,t){return Hy(e).get(t).next(r=>r?w0(r):null)}}function Hy(n){return Si(n,"targets")}function ZP(n){return Si(n,"targetGlobal")}function Qh(n){return Si(n,"targetDocuments")}function vg(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,be.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==NP)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),Ex.apply(this,arguments)}function YP([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class WU{constructor(e){this.An=e,this.buffer=new jn(YP),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qU{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ue("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){dg(i)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield vg(i)}yield t.Sn(e)}))}}class KU{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return _e.resolve(Yo.A);const r=new WU(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(zP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zP):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,u,d,_,b;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(b=Date.now(),ZM()<=Hi.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${a} targets in `+(_-d)+`ms\n\tRemoved ${T} documents in `+(b-_)+`ms\nTotal Duration: ${b-I}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class ZU{constructor(e,t){this.db=e,this.garbageCollector=new KU(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return ZD(e,r)}removeReference(e,t,r){return ZD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ZD(e,t)}On(e,t){return function(r,i){let a=!1;return KP(r).zt(u=>qP(r,u,i).next(d=>(d&&(a=!0),_e.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(u,d)=>{if(d<=t){const _=this.On(e,u).next(b=>{if(!b)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Mt.min()),Qh(e).delete([0,Ws(u.path)])))});i.push(_)}}).next(()=>_e.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ZD(e,t)}Mn(e,t){const r=Qh(e);let i,a=Yo.A;return r.Wt({index:"documentTargetsIndex"},([u,d],{path:_,sequenceNumber:b})=>{0===u?(a!==Yo.A&&t(new qe(Tu(i)),a),a=b,i=_):a=Yo.A}).next(()=>{a!==Yo.A&&t(new qe(Tu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ZD(n,e){return Qh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ws(e.path),sequenceNumber:r}));var r}class QP{constructor(){this.changes=new Kh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?_e.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YU{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bg(e).put(r)}removeEntry(e,t,r){return bg(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],GD(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Kn.newInvalidDocument(t);return bg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(T0(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Kn.newInvalidDocument(t)};return bg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(T0(t))},(i,a)=>{r={document:this.$n(t,a),size:KD(a)}}).next(()=>r)}getEntries(e,t){let r=ka();return this.Ln(e,t,(i,a)=>{const u=this.$n(i,a);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=ka(),i=new xr(qe.comparator);return this.Ln(e,t,(a,u)=>{const d=this.$n(a,u);r=r.insert(a,d),i=i.insert(a,KD(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return _e.resolve();let i=new jn(e1);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(T0(i.first()),T0(i.last())),u=i.getIterator();let d=u.getNext();return bg(e).Wt({index:"documentKeyIndex",range:a},(_,b,I)=>{const T=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;d&&e1(d,T)<0;)r(d,null),d=u.getNext();d&&d.isEqual(T)&&(r(d,b),d=u.hasNext()?u.getNext():null),d?I.Ut(T0(d)):I.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),GD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bg(e).qt(IDBKeyRange.bound(i,a,!0)).next(u=>{let d=ka();for(const _ of u){const b=this.$n(qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);d=d.insert(b.key,b)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=ka();const u=XP(t,r),d=XP(t,Cl.max());return bg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(_,b,I)=>{const T=this.$n(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(T.key,T),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new QU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return JP(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Fn(e,t){return JP(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function FU(n,e){let t;if(e.document)t=EP(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=pg(e.noDocument.readTime);t=Kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=qe.fromSegments(e.unknownDocument.path),i=pg(e.unknownDocument.version);t=Kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Mr(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Kn.newInvalidDocument(e)}}class QU extends QP{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Kh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((a,u)=>Gt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const d=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,d.readTime)),u.isValidDocument()){const _=LP(this.Kn.M,u);i=i.add(a.path.popLast()),r+=KD(_)-d.size,t.push(this.Kn.addEntry(e,a,_))}else if(r-=d.size,this.trackRemovals){const _=LP(this.Kn.M,u.convertToNoDocument(Mt.min()));t.push(this.Kn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),_e.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,u)=>{this.Gn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function JP(n){return Si(n,"remoteDocumentGlobal")}function bg(n){return Si(n,"remoteDocumentsV14")}function T0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XP(n,e){const t=e.documentKey.path.toArray();return[n,GD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function e1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class JU{constructor(e){this.M=e}kt(e,t,r,i){const a=new $D("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SP,{unique:!0}),d.createObjectStore("documentMutations"),t1(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=_e.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),t1(e)),u=u.next(()=>function(d){const _=d.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,_){return _.store("mutations").qt().next(b=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SP,{unique:!0});const I=_.store("mutations"),T=b.map(k=>I.put(k));return _e.waitFor(T)})}(e,a))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(a))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(a))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(a))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const _=d.createObjectStore("documentOverlays",{keyPath:MU});_.createIndex("collectionPathOverlayIndex",xU,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",RU,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const _=d.createObjectStore("remoteDocumentsV14",{keyPath:yU});_.createIndex("documentKeyIndex",vU),_.createIndex("collectionGroupIndex",bU)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:DU}).createIndex("sequenceNumberIndex",TU,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:AU}).createIndex("documentKeyIndex",SU,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=KD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>_e.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(d=>_e.forEach(d,_=>{kt(_.userId===a.userId);const b=Uy(this.M,_);return WP(e,a.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((u,d)=>{const _=new ln(u),b=[0,Ws(_)];a.push(t.get(b).next(I=>I?_e.resolve():t.put({targetId:0,path:Ws(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>_e.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:IU});const r=t.store("collectionParents"),i=new vx,a=u=>{if(i.add(u)){const d=u.lastSegment(),_=u.popLast();return r.put({collectionId:d,parent:Ws(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,d)=>{const _=new ln(u);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,d,_],b)=>{const I=Tu(d);return a(I.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=w0(i),u=VP(this.M,a);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,u)=>{const d=t.store("remoteDocumentsV14"),_=(b=u,b.document?new qe(ln.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):ut()).path.toArray();var b;const I={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(I))}).next(()=>_e.waitFor(i))}}function t1(n){n.createObjectStore("targetDocuments",{keyPath:wU}).createIndex("documentTargetsIndex",CU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",EU,{unique:!0}),n.createObjectStore("targetGlobal")}const wx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cx{constructor(e,t,r,i,a,u,d,_,b,I,T=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=u,this.document=d,this.Xn=b,this.Zn=I,this.ts=T,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=k=>Promise.resolve(),!Cx.vt())throw new Pe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZU(this,i),this.hs=t+"main",this.M=new FP(_),this.ls=new Il(this.hs,this.ts,new JU(this.M)),this.fs=new zU(this.referenceDelegate,this.M),this.ds=new YU(this.M),this._s=new LU,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===I&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,wx);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Yo(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(dg(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return A0(e).get("owner").next(t=>_e.resolve(this.Ps(t)))}Vs(e){return YD(e).delete(this.clientId)}vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Si(r,"clientMetadata");return i.qt().next(a=>{const u=e.Ds(a,18e5),d=a.filter(_=>-1===u.indexOf(_));return _e.forEach(d,_=>i.delete(_.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?_e.resolve(!0):A0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,wx);return!1}}return!(!this.networkEnabled||!this.inForeground)||YD(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new PP(t,Yo.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>YD(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return bx.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new GU(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return yx.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(u=this.ts)?kU:13===u?RP:12===u?NU:11===u?xP:void ut();var u;let d;return this.ls.runTransaction(e,i,a,_=>(d=new PP(_,this.es?this.es.next():Yo.A),"readwrite-primary"===t?this.Es(d).next(b=>!!b||this.As(d)).next(b=>{if(!b)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(ge.FAILED_PRECONDITION,NP);return r(d)}).next(b=>this.bs(d).next(()=>b)):this.$s(d).next(()=>r(d)))).then(_=>(d.raiseOnCommittedEvent(),_))}$s(e){return A0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ge.FAILED_PRECONDITION,wx)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return A0(e).put("owner",t)}static vt(){return Il.vt()}Rs(e){const t=A0(e);return t.get("owner").next(r=>this.Ps(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_e.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function A0(n){return Si(n,"owner")}function YD(n){return Si(n,"clientMetadata")}function Ix(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XU{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):rx(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new qe(t)).next(r=>{let i=lx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=lx();return this.indexManager.getCollectionParents(e,i).next(u=>_e.forEach(u,d=>{const _=(b=t,I=d.child(i),new $c(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,I;return this.zs(e,_,r).next(b=>{b.forEach((I,T)=>{a=a.insert(I,T)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const u of a)for(const d of u.mutations){const _=d.key;let b=i.get(_);null==b&&(b=Kn.newInvalidDocument(_),i=i.insert(_,b)),ox(d,b,u.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,u)=>{sx(t,u)||(i=i.remove(a))}),i))}}class Dx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=En(),i=En();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Dx(e,t.fromCache,r,i)}}class n1{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return _e.resolve(null)}ei(e,t,r,i){return function HB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Mt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const u=this.si(t,a);return this.ii(t,u,r,i)?this.ni(e,t):(ZM()<=Hi.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ix(t)),this.ri(e,u,t,FO(i,-1)))})}si(e,t){let r=new jn(ZO(e));return t.forEach((i,a)=>{sx(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return ZM()<=Hi.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",ix(t)),this.Zs.Qs(e,t,Cl.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class e2{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new xr(Gt),this.ai=new Kh(a=>ag(a),u0),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new XU(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function r1(n,e,t,r){return new e2(n,e,t,r)}function s1(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,be.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let _=En();for(const b of i){u.push(b.batchId);for(const I of b.mutations)_=_.add(I.key)}for(const b of a){d.push(b.batchId);for(const I of b.mutations)_=_.add(I.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:u,addedBatchIds:d}))})})}),Tx.apply(this,arguments)}function t2(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(u,d,_,b){const I=_.batch,T=I.keys();let k=_e.resolve();return T.forEach(B=>{k=k.next(()=>b.getEntry(d,B)).next(j=>{const re=_.docVersions.get(B);kt(null!==re),j.version.compareTo(re)<0&&(I.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),b.addEntry(j)))})}),k.next(()=>u.Bs.removeMutationBatch(d,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function o1(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function n2(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const d=[];e.targetChanges.forEach((b,I)=>{const T=i.get(I);if(!T)return;d.push(t.fs.removeMatchingKeys(a,b.removedDocuments,I).next(()=>t.fs.addMatchingKeys(a,b.addedDocuments,I)));let k=T.withSequenceNumber(a.currentSequenceNumber);var B,j,re;e.targetMismatches.has(I)?k=k.withResumeToken(li.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,r)),i=i.insert(I,k),j=k,re=b,(0===(B=T).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(a,k))});let _=ka();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),d.push(a1(a,u,e.documentUpdates).next(b=>{_=b})),!r.isEqual(Mt.min())){const b=t.fs.getLastRemoteSnapshotVersion(a).next(I=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(b)}return _e.waitFor(d).next(()=>u.apply(a)).next(()=>t.fi.Gs(a,_)).next(()=>_)}).then(a=>(t.ui=i,a))}function a1(n,e,t){let r=En();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=ka();return t.forEach((u,d)=>{const _=i.get(u);d.isNoDocument()&&d.version.isEqual(Mt.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!_.isValidDocument()||d.version.compareTo(_.version)>0||0===d.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):Ue("LocalStore","Ignoring outdated watch update for ",u,". Current version:",_.version," Watch version:",d.version)}),a})}function r2(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function $y(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,_e.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new Zh(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Gy(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!dg(u))throw u;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),Ax.apply(this,arguments)}function QD(n,e,t){const r=Qe(n);let i=Mt.min(),a=En();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,_,b){const I=Qe(d),T=I.ai.get(b);return void 0!==T?_e.resolve(I.ui.get(T)):I.fs.getTargetData(_,b)}(r,u,Na(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,d.targetId).next(_=>{a=_})}).next(()=>r.oi.Qs(u,e,t?i:Mt.min(),t?a:En())).next(d=>(c1(r,KO(e),d),{documents:d,_i:a})))}function l1(n,e){const t=Qe(n),r=Qe(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function u1(n,e){const t=Qe(n),r=t.ci.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,FO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(c1(t,e,i),i))}function c1(n,e,t){let r=Mt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function Sx(){return Sx=(0,be.Z)(function*(n,e,t,r){const i=Qe(n);let a=En(),u=ka();for(const b of t){const I=e.wi(b.metadata.name);b.document&&(a=a.add(I));const T=e.mi(b);T.setReadTime(e.gi(b.metadata.readTime)),u=u.insert(I,T)}const d=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield $y(i,(b=r,Na(Oy(ln.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>a1(b,d,u).next(I=>(d.apply(b),I)).next(I=>i.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.fs.addMatchingKeys(b,a,_.targetId)).next(()=>i.fi.Gs(b,I)).next(()=>I)))}),Sx.apply(this,arguments)}function o2(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,be.Z)(function*(n,e,t=En()){const r=yield $y(n,Na(mx(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Ai(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(a,e);const d=r.withResumeToken(li.EMPTY_BYTE_STRING,u);return i.ui=i.ui.insert(d.targetId,d),i.fs.updateTargetData(a,d).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),Mx.apply(this,arguments)}class a2{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return _e.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ai(r.createTime)}),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:mx(r.bundledQuery),readTime:Ai(r.readTime)}),_e.resolve();var r}}class l2{constructor(){this.overlays=new xr(qe.comparator),this.Ii=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),_e.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),_e.resolve()}getOverlaysForCollection(e,t,r){const i=p0(),a=t.length+1,u=new qe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const _=d.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new xr((b,I)=>b-I);const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let I=a.get(b.largestBatchId);null===I&&(I=p0(),a=a.insert(b.largestBatchId,I)),I.set(b.getKey(),b)}}const d=p0(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,I)=>d.set(b,I)),!(d.size()>=i)););return _e.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new gx(t,r));let a=this.Ii.get(t);void 0===a&&(a=En(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class xx{constructor(){this.Ti=new jn(Mi.Ei),this.Ai=new jn(Mi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Mi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Mi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new qe(new ln([])),r=new Mi(t,e),i=new Mi(t,e+1),a=[];return this.Ai.forEachInRange([r,i],u=>{this.Pi(u),a.push(u.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new qe(new ln([])),r=new Mi(t,e),i=new Mi(t,e+1);let a=En();return this.Ai.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Mi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return qe.comparator(e.key,t.key)||Gt(e.Ci,t.Ci)}static Ri(e,t){return Gt(e.Ci,t.Ci)||qe.comparator(e.key,t.key)}}class u2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new jn(Mi.Ei)}checkEmpty(e){return _e.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const u=new fx(a,t,r,i);this.Bs.push(u);for(const d of i)this.Ni=this.Ni.add(new Mi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return _e.resolve(u)}lookupMutationBatch(e,t){return _e.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return _e.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return _e.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mi(t,0),i=new Mi(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],u=>{const d=this.ki(u.Ci);a.push(d)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Gt);return t.forEach(i=>{const a=new Mi(i,0),u=new Mi(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,u],d=>{r=r.add(d.Ci)})}),_e.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const u=new Mi(new qe(a),0);let d=new jn(Gt);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(d=d.add(_.Ci)),!0)},u),_e.resolve(this.Oi(d))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){kt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return _e.forEach(t.mutations,i=>{const a=new Mi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Mi(t,0),i=this.Ni.firstAfterOrEqual(r);return _e.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return _e.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class c2{constructor(e){this.$i=e,this.docs=new xr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return _e.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=ka();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Kn.newInvalidDocument(i))}),_e.resolve(r)}getAllFromCollection(e,t,r){let i=ka();const a=new qe(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:_}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||LO(RB(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}Bi(e,t){return _e.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new d2(this)}getSize(e){return _e.resolve(this.size)}}class d2 extends QP{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),_e.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class h2{constructor(e){this.persistence=e,this.Li=new Kh(t=>ag(t),u0),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new xx,this.targetCount=0,this.Ki=yg.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),_e.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new yg(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.Tn(t),_e.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Li.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),_e.waitFor(a).next(()=>i)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return _e.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),_e.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return _e.resolve(r)}containsKey(e,t){return _e.resolve(this.qi.containsKey(t))}}class f2{constructor(e,t){this.Gi={},this.overlays={},this.es=new Yo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new h2(this),this.indexManager=new $U,this.ds=new c2(r=>this.referenceDelegate.Qi(r)),this.M=new FP(t),this._s=new a2(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new l2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new u2(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new p2(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return _e.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class p2 extends kP{constructor(e){super(),this.currentSequenceNumber=e}}class Rx{constructor(e){this.persistence=e,this.Hi=new xx,this.Ji=null}static Yi(e){return new Rx(e)}get Xi(){if(this.Ji)return this.Ji;throw ut()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),_e.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),_e.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Xi,r=>{const i=qe.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,Mt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return _e.or([()=>_e.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function d1(n,e){return`firestore_clients_${n}_${e}`}function h1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Nx(n,e){return`firestore_targets_${n}_${e}`}class JD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Pe(i.error.code,i.error.message))),u?new JD(e,t,i.state,a):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class S0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new S0(e,r.state,i):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=UD();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=SO(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new XD(e,a):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kx{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kx(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ox{constructor(){this.activeTargetIds=UD()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Px{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new xr(Gt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=d1(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Ox),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(d1(e.persistenceKey,i));if(a){const u=XD.tr(i,a);u&&(e.ar=e.ar.insert(u.clientId,u))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Nx(this.persistenceKey,e));if(r){const i=S0.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nx(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let u=Yo.A;if(null!=a)try{const d=JSON.parse(a);kt("number"==typeof d),u=d}catch(d){jr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==Yo.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new JD(this.currentUser,e,t,r),a=h1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=h1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=Nx(this.persistenceKey,e),a=new S0(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return XD.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return JD.tr(new Ki(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return S0.tr(i,t)}pr(e){return kx.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),u=[],d=[];return a.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{a.has(_)||d.push(_)}),this.syncEngine.Lr(u,d).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=UD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class f1{constructor(){this.Ur=new Ox,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ox,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class g2{Kr(e){}shutdown(){}}class p1{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const m2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class _2{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class y2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const u=this.ho(e,t);Ue("RestConnection","Sending: ",u,r);const d={};return this.lo(d,i,a),this.fo(e,u,d,r).then(_=>(Ue("RestConnection","Received: ",_),_),_=>{throw XE("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${m2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,u)=>{const d=new gB;d.listenOnce(hB.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case KM.NO_ERROR:const b=d.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(b)),a(b);break;case KM.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),u(new Pe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case KM.HTTP_ERROR:const I=d.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',I,"response text:",d.getResponseText()),I>0){const T=d.getResponseJson().error;if(T&&T.status&&T.message){const k=function(B){const j=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(j)>=0?j:ge.UNKNOWN}(T.status);u(new Pe(k,T.message))}else u(new Pe(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Pe(ge.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);d.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cB(),u=dB(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new pB({})),this.lo(d.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Ue("Connection","Creating WebChannel: "+_,d);const b=a.createWebChannel(_,d);let I=!1,T=!1;const k=new _2({Jr:j=>{T?Ue("Connection","Not sending because WebChannel is closed:",j):(I||(Ue("Connection","Opening WebChannel transport."),b.open(),I=!0),Ue("Connection","WebChannel sending:",j),b.send(j))},Yr:()=>b.close()}),B=(j,re,Re)=>{j.listen(re,at=>{try{Re(at)}catch(ot){setTimeout(()=>{throw ot},0)}})};return B(b,MD.EventType.OPEN,()=>{T||Ue("Connection","WebChannel transport opened.")}),B(b,MD.EventType.CLOSE,()=>{T||(T=!0,Ue("Connection","WebChannel transport closed"),k.ro())}),B(b,MD.EventType.ERROR,j=>{T||(T=!0,XE("Connection","WebChannel transport errored:",j),k.ro(new Pe(ge.UNAVAILABLE,"The operation could not be completed")))}),B(b,MD.EventType.MESSAGE,j=>{var re;if(!T){const Re=j.data[0];kt(!!Re);const at=Re,ot=at.error||(null===(re=at[0])||void 0===re?void 0:re.error);if(ot){Ue("Connection","WebChannel received error:",ot);const mt=ot.status;let ct=function(zt){const _n=$r[zt];if(void 0!==_n)return cP(_n)}(mt),Ft=ot.message;void 0===ct&&(ct=ge.INTERNAL,Ft="Unknown error status: "+mt+" with message "+ot.message),T=!0,k.ro(new Pe(ct,Ft)),b.close()}else Ue("Connection","WebChannel received:",Re),k.oo(Re)}}),B(u,fB.STAT_EVENT,j=>{j.stat===vO.PROXY?Ue("Connection","Detected buffering proxy"):j.stat===vO.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.io()},0),k}}function g1(){return"undefined"!=typeof window?window:null}function eT(){return"undefined"!=typeof document?document:null}function M0(n){return new sU(n,!0)}class Fx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class m1{constructor(e,t,r,i,a,u,d,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Fx(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Pe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v2 extends m1{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function lU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),i=e.targetChange.targetIds||[],a=function(_,b){return _.N?(kt(void 0===b||"string"==typeof b),li.fromBase64String(b||"")):(kt(void 0===b||b instanceof Uint8Array),li.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(_){const b=void 0===_.code?ge.UNKNOWN:cP(_.code);return new Pe(b,_.message||"")}(u);t=new hP(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Du(n,r.document.name),a=Ai(r.document.updateTime),u=new Es({mapValue:{fields:r.document.fields}}),d=Kn.newFoundDocument(i,a,u);t=new jD(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Du(n,r.document),a=r.readTime?Ai(r.readTime):Mt.min(),u=Kn.newNoDocument(i,a);t=new jD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Du(n,r.document);t=new jD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new YB(r.count||0);t=new dP(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Mt.min():a.readTime?Ai(a.readTime):Mt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=v0(this.M),t.addTarget=function(i,a){let u;const d=a.target;return u=PD(d)?{documents:wP(i,d)}:{query:CP(i,d)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=mP(i,a.resumeToken):a.snapshotVersion.compareTo(Mt.min())>0&&(u.readTime=_0(i,a.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function cU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=v0(this.M),t.removeTarget=e,this.Lo(t)}}class b2 extends m1{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function uU(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,i){let a=Ai(r.updateTime?r.updateTime:i);return a.isEqual(Mt.min())&&(a=Ai(i)),new qB(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ai(e.commitTime);return this.listener.tu(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=v0(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>b0(this.M,r))};this.Lo(t)}}class E2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(ge.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(ge.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class w2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(jr(t),this.uu=!1):Ue("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class C2{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(d=>{r.enqueueAndForget((0,be.Z)(function*(){var _;Jh(u)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,be.Z)(function*(b){const I=Qe(b);I.wu.add(4),yield zy(I),I.yu.set("Unknown"),I.wu.delete(4),yield x0(I)}),function(b){return _.apply(this,arguments)})(u))}))}),this.yu=new w2(r,i)}}function x0(n){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,be.Z)(function*(n){if(Jh(n))for(const e of n.mu)yield e(!0)}),Lx.apply(this,arguments)}function zy(n){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Vx.apply(this,arguments)}function tT(n,e){const t=Qe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),jx(t)?Ux(t):qy(t).Mo()&&Bx(t,e))}function R0(n,e){const t=Qe(n),r=qy(t);t._u.delete(e),r.Mo()&&_1(t,e),0===t._u.size&&(r.Mo()?r.$o():Jh(t)&&t.yu.set("Unknown"))}function Bx(n,e){n.pu.Z(e.targetId),qy(n).Ho(e)}function _1(n,e){n.pu.Z(e),qy(n).Jo(e)}function Ux(n){n.pu=new nU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),qy(n).start(),n.yu.au()}function jx(n){return Jh(n)&&!qy(n).ko()&&n._u.size>0}function Jh(n){return 0===Qe(n).wu.size}function y1(n){n.pu=void 0}function I2(n){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{Bx(n,e)})}),Hx.apply(this,arguments)}function D2(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,be.Z)(function*(n,e){y1(n),jx(n)?(n.yu.lu(e),Ux(n)):n.yu.set("Unknown")}),$x.apply(this,arguments)}function T2(n,e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof hP&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,a){const u=a.cause;for(const d of a.targetIds)i._u.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i._u.delete(d),i.pu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nT(n,r)}else if(e instanceof jD?n.pu.ut(e):e instanceof dP?n.pu._t(e):n.pu.ht(e),!t.isEqual(Mt.min()))try{const r=yield o1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.pu.yt(a);return u.targetChanges.forEach((d,_)=>{if(d.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach(d=>{const _=i._u.get(d);if(!_)return;i._u.set(d,_.withResumeToken(li.EMPTY_BYTE_STRING,_.snapshotVersion)),_1(i,d);const b=new Zh(_.target,d,1,_.sequenceNumber);Bx(i,b)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield nT(n,r)}var r}),Gx.apply(this,arguments)}function nT(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=(0,be.Z)(function*(n,e,t){if(!dg(e))throw e;n.wu.add(1),yield zy(n),n.yu.set("Offline"),t||(t=()=>o1(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield x0(n)}))}),zx.apply(this,arguments)}function v1(n,e){return e().catch(t=>nT(n,t,e))}function Wy(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,be.Z)(function*(n){const e=Qe(n),t=Xh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;A2(e);)try{const i=yield r2(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,S2(e,i)}catch(i){yield nT(e,i)}b1(e)&&E1(e)}),Wx.apply(this,arguments)}function A2(n){return Jh(n)&&n.du.length<10}function S2(n,e){n.du.push(e);const t=Xh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function b1(n){return Jh(n)&&!Xh(n).ko()&&n.du.length>0}function E1(n){Xh(n).start()}function M2(n){return qx.apply(this,arguments)}function qx(){return qx=(0,be.Z)(function*(n){Xh(n).nu()}),qx.apply(this,arguments)}function x2(n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,be.Z)(function*(n){const e=Xh(n);for(const t of n.du)e.Zo(t.mutations)}),Kx.apply(this,arguments)}function R2(n,e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),i=px.from(r,e,t);yield v1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wy(n)}),Zx.apply(this,arguments)}function N2(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,be.Z)(function*(n,e){var t;e&&Xh(n).Xo&&(yield(t=(0,be.Z)(function*(r,i){if(uP(a=i.code)&&a!==ge.ABORTED){const u=r.du.shift();Xh(r).Fo(),yield v1(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Wy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),b1(n)&&E1(n)}),Yx.apply(this,arguments)}function w1(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,be.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Jh(t);t.wu.add(3),yield zy(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield x0(t)}),Qx.apply(this,arguments)}function Jx(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,be.Z)(function*(n,e){const t=Qe(n);e?(t.wu.delete(2),yield x0(t)):e||(t.wu.add(2),yield zy(t),t.yu.set("Unknown"))}),Xx.apply(this,arguments)}function qy(n){return n.Iu||(n.Iu=function(e,t,r){const i=Qe(e);return i.iu(),new v2(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:I2.bind(null,n),eo:D2.bind(null,n),zo:T2.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),jx(n)?Ux(n):n.yu.set("Unknown")):(yield n.Iu.stop(),y1(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Xh(n){return n.Tu||(n.Tu=function(e,t,r){const i=Qe(e);return i.iu(),new b2(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:M2.bind(null,n),eo:N2.bind(null,n),eu:x2.bind(null,n),tu:R2.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield Wy(n)):(yield n.Tu.stop(),n.du.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class eR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,d=new eR(e,t,u,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(n,e){if(jr("AsyncQueue",`${e}: ${n}`),dg(n))return new Pe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Zy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=lx(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new Zy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class C1{constructor(){this.Eu=new xr(qe.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ut():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yy{constructor(e,t,r,i,a,u,d,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Yy(e,t,Zy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class k2{constructor(){this.Ru=void 0,this.listeners=[]}}class O2{constructor(){this.queries=new Kh(e=>qO(e),c0),this.onlineState="Unknown",this.bu=new Set}}function tR(n,e){return nR.apply(this,arguments)}function nR(){return nR=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new k2),i)try{a.Ru=yield t.onListen(r)}catch(u){const d=Ky(u,`Initialization of query '${ix(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&sR(t)}),nR.apply(this,arguments)}function rR(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),iR.apply(this,arguments)}function P2(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Vu(i)&&(r=!0);u.Ru=i}}r&&sR(t)}function F2(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function sR(n){n.bu.forEach(e=>{e.next()})}class oR{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class L2{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class I1{constructor(e){this.M=e}wi(e){return Du(this.M,e)}mi(e){return e.metadata.exists?EP(this.M,e.document,!1):Kn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ai(e)}}class V2{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=D1(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new I1(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||En()).add(a);t.set(u,d)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function s2(n,e,t,r){return Sx.apply(this,arguments)}(e.localStore,new I1(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield o2(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function D1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class T1{constructor(e){this.key=e}}class A1{constructor(e){this.key=e}}class S1{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=En(),this.mutatedKeys=En(),this.Gu=ZO(e),this.Qu=new Zy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new C1,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,T)=>{const k=i.get(I),B=sx(this.query,T)?T:null,j=!!k&&this.mutatedKeys.has(k.key),re=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Re=!1;k&&B?k.data.isEqual(B.data)?j!==re&&(r.track({type:3,doc:B}),Re=!0):this.Hu(k,B)||(r.track({type:2,doc:B}),Re=!0,(_&&this.Gu(B,_)>0||b&&this.Gu(B,b)<0)&&(d=!0)):!k&&B?(r.track({type:0,doc:B}),Re=!0):k&&!B&&(r.track({type:1,doc:k}),Re=!0,(_||b)&&(d=!0)),Re&&(B?(u=u.add(B),a=re?a.add(I):a.delete(I)):(u=u.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Qu:u,zu:r,ii:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((b,I)=>function(T,k){const B=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return B(T)-B(k)}(b.type,I.type)||this.Gu(b.doc,I.doc)),this.Ju(r);const u=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,_=d!==this.qu;return this.qu=d,0!==a.length||_?{snapshot:new Yy(this.query,e.Qu,i,a,e.mutatedKeys,0===d,_,!1),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new C1,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=En(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new A1(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new T1(r))}),t}ta(e){this.Uu=e._i,this.Ku=En();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Yy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class B2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class U2{constructor(e){this.key=e,this.na=!1}}class j2{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new Kh(d=>qO(d),c0),this.ra=new Map,this.oa=new Set,this.ua=new xr(qe.comparator),this.aa=new Map,this.ca=new xx,this.ha={},this.la=new Map,this.fa=yg.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function H2(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,be.Z)(function*(n,e){const t=xR(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const u=yield $y(t.localStore,Na(e));t.isPrimaryClient&&tT(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield lR(t,e,r,"current"===d)}return i}),aR.apply(this,arguments)}function lR(n,e,t,r){return uR.apply(this,arguments)}function uR(){return uR=(0,be.Z)(function*(n,e,t,r){n._a=(I,T,k)=>{return(B=(0,be.Z)(function*(j,re,Re,at){let ot=re.view.Wu(Re);ot.ii&&(ot=yield QD(j.localStore,re.query,!1).then(({documents:Ft})=>re.view.Wu(Ft,ot)));const mt=at&&at.targetChanges.get(re.targetId),ct=re.view.applyChanges(ot,j.isPrimaryClient,mt);return vR(j,re.targetId,ct.Xu),ct.snapshot}),function(j,re,Re,at){return B.apply(this,arguments)})(n,I,T,k);var B};const i=yield QD(n.localStore,e,!0),a=new S1(e,i._i),u=a.Wu(i.documents),d=m0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(u,n.isPrimaryClient,d);vR(n,t,_.Xu);const b=new B2(e,t,a);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),uR.apply(this,arguments)}function $2(n,e){return cR.apply(this,arguments)}function cR(){return cR=(0,be.Z)(function*(n,e){const t=Qe(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!c0(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),R0(t.remoteStore,r.targetId),Qy(t,r.targetId)}).catch(vg))):(Qy(t,r.targetId),yield Gy(t.localStore,r.targetId,!0))}),cR.apply(this,arguments)}function dR(){return dR=(0,be.Z)(function*(n,e,t){const r=RR(n);try{const i=yield function(a,u){const d=Qe(a),_=Mr.now(),b=u.reduce((T,k)=>T.add(k.key),En());let I;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>d.fi.Ks(T,b).next(k=>{I=k;const B=[];for(const j of u){const re=ZB(j,I.get(j.key));null!=re&&B.push(new cg(j.key,re,PO(re.value.mapValue),Hr.exists(!0)))}return d.Bs.addMutationBatch(T,_,B,u)})).then(T=>(T.applyToLocalDocumentSet(I),{batchId:T.batchId,changes:I}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,d){let _=a.ha[a.currentUser.toKey()];_||(_=new xr(Gt)),_=_.insert(u,d),a.ha[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Gc(r,i.changes),yield Wy(r.remoteStore)}catch(i){const a=Ky(i,"Failed to persist write");t.reject(a)}}),dR.apply(this,arguments)}function M1(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,be.Z)(function*(n,e){const t=Qe(n);try{const r=yield n2(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.aa.get(a);u&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.na=!0:i.modifiedDocuments.size>0?kt(u.na):i.removedDocuments.size>0&&(kt(u.na),u.na=!1))}),yield Gc(t,r,e)}catch(r){yield vg(r)}}),hR.apply(this,arguments)}function x1(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,u)=>{const d=u.view.Pu(e);d.snapshot&&i.push(d.snapshot)}),function(a,u){const d=Qe(a);d.onlineState=u;let _=!1;d.queries.forEach((b,I)=>{for(const T of I.listeners)T.Pu(u)&&(_=!0)}),_&&sR(d)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function z2(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,be.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let u=new xr(qe.comparator);u=u.insert(a,Kn.newNoDocument(a,Mt.min()));const d=En().add(a),_=new g0(Mt.min(),new Map,new jn(Gt),u,d);yield M1(r,_),r.ua=r.ua.remove(a),r.aa.delete(e),bR(r)}else yield Gy(r.localStore,e,!1).then(()=>Qy(r,e,t)).catch(vg)}),fR.apply(this,arguments)}function W2(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield t2(t.localStore,e);yR(t,r,null),_R(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gc(t,i)}catch(i){yield vg(i)}}),pR.apply(this,arguments)}function q2(n,e,t){return gR.apply(this,arguments)}function gR(){return gR=(0,be.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(a,u){const d=Qe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return d.Bs.lookupMutationBatch(_,u).next(I=>(kt(null!==I),b=I.keys(),d.Bs.removeMutationBatch(_,I))).next(()=>d.Bs.performConsistencyCheck(_)).next(()=>d.fi.Ks(_,b))})}(r.localStore,e);yR(r,e,t),_R(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gc(r,i)}catch(i){yield vg(i)}}),gR.apply(this,arguments)}function mR(){return mR=(0,be.Z)(function*(n,e){const t=Qe(n);Jh(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Qe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Ky(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),mR.apply(this,arguments)}function _R(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function yR(n,e,t){const r=Qe(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Qy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||R1(n,r)})}function R1(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(R0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),bR(n))}function vR(n,e,t){for(const r of t)r instanceof T1?(n.ca.addReference(r.key,e),Z2(n,r)):r instanceof A1?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||R1(n,r.key)):ut()}function Z2(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.oa.add(r),bR(n))}function bR(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new qe(ln.fromString(e)),r=n.fa.next();n.aa.set(r,new U2(t)),n.ua=n.ua.insert(t,r),tT(n.remoteStore,new Zh(Na(Oy(t.path)),r,2,Yo.A))}}function Gc(n,e,t){return ER.apply(this,arguments)}function ER(){return ER=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[],u=[];var d;r.ia.isEmpty()||(r.ia.forEach((d,_)=>{u.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const I=Dx.Ys(_.targetId,b);a.push(I)}}))}),yield Promise.all(u),r.sa.zo(i),yield(d=(0,be.Z)(function*(_,b){const I=Qe(_);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>_e.forEach(b,k=>_e.forEach(k.Hs,B=>I.persistence.referenceDelegate.addReference(T,k.targetId,B)).next(()=>_e.forEach(k.Js,B=>I.persistence.referenceDelegate.removeReference(T,k.targetId,B)))))}catch(T){if(!dg(T))throw T;Ue("LocalStore","Failed to update sequence numbers: "+T)}for(const T of b){const k=T.targetId;if(!T.fromCache){const B=I.ui.get(k),re=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);I.ui=I.ui.insert(k,re)}}}),function(_,b){return d.apply(this,arguments)})(r.localStore,a))}),ER.apply(this,arguments)}function Y2(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,be.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield s1(t.localStore,e);t.currentUser=e,(i=t).la.forEach(u=>{u.forEach(d=>{d.reject(new Pe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gc(t,r.di)}var i}),wR.apply(this,arguments)}function Q2(n,e){const t=Qe(n),r=t.aa.get(e);if(r&&r.na)return En().add(r.key);{let i=En();const a=t.ra.get(e);if(!a)return i;for(const u of a){const d=t.ia.get(u);i=i.unionWith(d.view.ju)}return i}}function J2(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,be.Z)(function*(n,e){const t=Qe(n),r=yield QD(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&vR(t,e.targetId,i.Xu),i}),CR.apply(this,arguments)}function X2(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,be.Z)(function*(n,e){const t=Qe(n);return u1(t.localStore,e).then(r=>Gc(t,r))}),IR.apply(this,arguments)}function ej(n,e,t,r){return DR.apply(this,arguments)}function DR(){return DR=(0,be.Z)(function*(n,e,t,r){const i=Qe(n),a=yield function(u,d){const _=Qe(u),b=Qe(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",I=>b.fn(I,d).next(T=>T?_.fi.Ks(I,T):_e.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield Wy(i.remoteStore):"acknowledged"===t||"rejected"===t?(yR(i,e,r||null),_R(i,e),d=e,Qe(Qe(i.localStore).Bs)._n(d)):ut(),yield Gc(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),DR.apply(this,arguments)}function TR(){return TR=(0,be.Z)(function*(n,e){const t=Qe(n);if(xR(t),RR(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield N1(t,r.toArray());t.da=!0,yield Jx(t.remoteStore,!0);for(const a of i)tT(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Qy(t,u),Gy(t.localStore,u,!0))),R0(t.remoteStore,u)}),yield i,yield N1(t,r),function(a){const u=Qe(a);u.aa.forEach((d,_)=>{R0(u.remoteStore,_)}),u.ca.Si(),u.aa=new Map,u.ua=new xr(qe.comparator)}(t),t.da=!1,yield Jx(t.remoteStore,!1)}}),TR.apply(this,arguments)}function N1(n,e,t){return AR.apply(this,arguments)}function AR(){return AR=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[];for(const u of e){let d;const _=r.ra.get(u);if(_&&0!==_.length){d=yield $y(r.localStore,Na(_[0]));for(const b of _){const I=r.ia.get(b),T=yield J2(r,I);T.snapshot&&a.push(T.snapshot)}}else{const b=yield l1(r.localStore,u);d=yield $y(r.localStore,b),yield lR(r,k1(b),u,!1)}i.push(d)}return r.sa.zo(a),i}),AR.apply(this,arguments)}function k1(n){return zO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nj(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).Fs()}function rj(n,e,t,r){return SR.apply(this,arguments)}function SR(){return SR=(0,be.Z)(function*(n,e,t,r){const i=Qe(n);if(i.da)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield u1(i.localStore,KO(a[0])),d=g0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Gc(i,u,d);break}case"rejected":yield Gy(i.localStore,e,!0),Qy(i,e,r);break;default:ut()}}),SR.apply(this,arguments)}function ij(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=(0,be.Z)(function*(n,e,t){const r=xR(n);if(r.da){for(const i of e){if(r.ra.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield l1(r.localStore,i),u=yield $y(r.localStore,a);yield lR(r,k1(a),u.targetId,!1),tT(r.remoteStore,u)}for(const i of t)r.ra.has(i)&&(yield Gy(r.localStore,i,!1).then(()=>{R0(r.remoteStore,i),Qy(r,i)}).catch(vg))}}),MR.apply(this,arguments)}function xR(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=M1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z2.bind(null,e),e.sa.zo=P2.bind(null,e.eventManager),e.sa.wa=F2.bind(null,e.eventManager),e}function RR(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q2.bind(null,e),e}class O1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=M0(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return r1(this.persistence,new n1,e.initialUser,this.M)}ya(e){return new f2(Rx.Yi,this.M)}ga(e){return new f1}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class P1 extends O1{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield RR(r.Ta.syncEngine),yield Wy(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return r1(this.persistence,new n1,e.initialUser,this.M)}pa(e){return new qU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?yo.withCacheSize(this.cacheSizeBytes):yo.DEFAULT;return new Cx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,g1(),eT(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new f1}}class oj extends P1{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Px&&(r.sharedClientState.syncEngine={$r:ej.bind(null,i),Br:rj.bind(null,i),Lr:ij.bind(null,i),Fs:nj.bind(null,i),Fr:X2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,be.Z)(function*(u){yield function tj(n,e){return TR.apply(this,arguments)}(r.Ta.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}ga(e){const t=g1();if(!Px.vt(t))throw new Pe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Px(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class NR{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>x1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Y2.bind(null,r.syncEngine),yield Jx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new O2}createDatastore(e){const t=M0(e.databaseInfo.databaseId),r=new y2(e.databaseInfo);return new E2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>x1(this.syncEngine,d,0),u=p1.vt()?new p1:new g2,new C2(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,d,_,b){const I=new j2(r,i,a,u,d,_);return b&&(I.da=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Qe(t);Ue("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield zy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function F1(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class rT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class aj{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new L2(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,be.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(a,u){const d=Qe(a),_=v0(d.M)+"/documents",b={documents:u.map(B=>y0(d.M,B))},I=yield d._o("BatchGetDocuments",_,b),T=new Map;I.forEach(B=>{const j=function aU(n,e){return"found"in e?function(t,r){kt(!!r.found);const i=Du(t,r.found.name),a=Ai(r.found.updateTime),u=new Es({mapValue:{fields:r.found.fields}});return Kn.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const i=Du(t,r.missing),a=Ai(r.readTime);return Kn.newNoDocument(i,a)}(n,e):ut()}(d.M,B);T.set(j.key.toString(),j)});const k=[];return u.forEach(B=>{const j=T.get(B.toString());kt(!!j),k.push(j)}),k}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new f0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=qe.fromPath(i);e.mutations.push(new ax(a,e.precondition(a)))}),yield(r=(0,be.Z)(function*(i,a){const u=Qe(i),d=v0(u.M)+"/documents",_={writes:a.map(b=>b0(u.M,b))};yield u.co("Commit",d,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Hr.updateTime(t):Hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Pe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hr.updateTime(t)}return Hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uj{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new Fx(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new lj(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!n0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!uP(t)}return!1}}class cj{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ki.UNAUTHENTICATED,this.clientId=CO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,be.Z)(function*(d){Ue("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ue("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ky(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function L1(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(a){r.isEqual(a)||(yield s1(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kR.apply(this,arguments)}function V1(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PR(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>w1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>w1(e.remoteStore,a)),n.onlineComponents=e}),OR.apply(this,arguments)}function PR(n){return FR.apply(this,arguments)}function FR(){return FR=(0,be.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield L1(n,new O1)),n.offlineComponents}),FR.apply(this,arguments)}function iT(n){return LR.apply(this,arguments)}function LR(){return LR=(0,be.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield V1(n,new NR)),n.onlineComponents}),LR.apply(this,arguments)}function B1(n){return PR(n).then(e=>e.persistence)}function VR(n){return PR(n).then(e=>e.localStore)}function U1(n){return iT(n).then(e=>e.remoteStore)}function BR(n){return iT(n).then(e=>e.syncEngine)}function Jy(n){return UR.apply(this,arguments)}function UR(){return UR=(0,be.Z)(function*(n){const e=yield iT(n),t=e.eventManager;return t.onListen=H2.bind(null,e.syncEngine),t.onUnlisten=$2.bind(null,e.syncEngine),t}),UR.apply(this,arguments)}function j1(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,u,d,_){const b=new rT({next:T=>{a.enqueueAndForget(()=>rR(i,I));const k=T.docs.has(u);!k&&T.fromCache?_.reject(new Pe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&d&&"server"===d.source?_.reject(new Pe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(T)},error:T=>_.reject(T)}),I=new oR(Oy(u.path),b,{includeMetadataChanges:!0,ku:!0});return tR(i,I)}(yield Jy(n),n.asyncQueue,e,t,r)})),r.promise}function H1(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,u,d,_){const b=new rT({next:T=>{a.enqueueAndForget(()=>rR(i,I)),T.fromCache&&"server"===d.source?_.reject(new Pe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(T)},error:T=>_.reject(T)}),I=new oR(u,b,{includeMetadataChanges:!0,ku:!0});return tR(i,I)}(yield Jy(n),n.asyncQueue,e,t,r)})),r.promise}const $1=new Map;function jR(n,e,t){if(!t)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function G1(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function z1(n){if(!qe.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function W1(n){if(qe.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sT(n);throw new Pe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function q1(n,e){if(e<=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class K1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,G1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class N0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K1({}),this._settingsFrozen=!1,e instanceof Hc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yB;switch(t.type){case"gapi":const r=t.client;return kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new wB(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$1.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),$1.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class ws{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class Au extends ws{constructor(e,t,r){super(e,t,Oy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new qe(e))}withConverter(e){return new Au(this.firestore,e,this._path)}}function Z1(n,e,...t){if(n=(0,P.m9)(n),jR("collection","path",e),n instanceof N0){const r=ln.fromString(e,...t);return W1(r),new Au(n,null,r)}{if(!(n instanceof Zn||n instanceof Au))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return W1(r),new Au(n.firestore,null,r)}}function oT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=CO.R()),jR("doc","path",e),n instanceof N0){const r=ln.fromString(e,...t);return z1(r),new Zn(n,null,new qe(r))}{if(!(n instanceof Zn||n instanceof Au))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return z1(r),new Zn(n.firestore,n instanceof Au?n.converter:null,new qe(r))}}function Y1(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof Zn||n instanceof Au)&&(e instanceof Zn||e instanceof Au)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Q1(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof ws&&e instanceof ws&&n.firestore===e.firestore&&c0(n._query,e._query)&&n.converter===e.converter}class Ej{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Fx(this,"async_queue_retry"),this.Qa=()=>{const t=eT();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=eT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=eT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Ti;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,be.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!dg(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,jr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=eR.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&ut()}verifyOperationInProgress(){}Ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function HR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class wj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends N0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Ej,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||J1(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||J1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function J1(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new SB(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new cj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function X1(n,e,t){const r=new Ti;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield L1(n,t),yield V1(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function eF(n){if(n._initialized||n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Su(li.fromBase64String(e))}catch(t){throw new Pe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Su(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Eg{constructor(e){this._methodName=e}}class aT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const Nj=/^__.*__$/;class kj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cg(e,this.data,this.fieldMask,t,this.fieldTransforms):new h0(e,this.data,t,this.fieldTransforms)}}class tF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class lT{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new lT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return dT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(nF(this.ec)&&Nj.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Oj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||M0(e)}lc(e,t,r,i=!1){return new lT({ec:e,methodName:t,hc:r,path:ai.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=M0(n._databaseId);return new Oj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uT(n,e,t,r,i,a={}){const u=n.lc(a.merge||a.mergeFields?2:0,e,t,i);WR("Data must be an object, but it was:",u,r);const d=sF(r,u);let _,b;if(a.merge)_=new xy(u.fieldMask),b=u.fieldTransforms;else if(a.mergeFields){const I=[];for(const T of a.mergeFields){const k=qR(e,T,t);if(!u.contains(k))throw new Pe(ge.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);aF(I,k)||I.push(k)}_=new xy(I),b=u.fieldTransforms.filter(T=>_.covers(T.field))}else _=null,b=u.fieldTransforms;return new kj(new Es(d),_,b)}class k0 extends Eg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof k0}}function rF(n,e,t){return new lT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class $R extends Eg{_toFieldTransform(e){return new d0(e.path,new Fy)}isEqual(e){return e instanceof $R}}class Pj extends Eg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=rF(this,e,!0),r=this.fc.map(a=>Cg(a,t)),i=new lg(r);return new d0(e.path,i)}isEqual(e){return this===e}}class Fj extends Eg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=rF(this,e,!0),r=this.fc.map(a=>Cg(a,t)),i=new ug(r);return new d0(e.path,i)}isEqual(e){return this===e}}class Lj extends Eg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Ly(e.M,JO(e.M,this.dc));return new d0(e.path,t)}isEqual(e){return this===e}}function GR(n,e,t,r){const i=n.lc(1,e,t);WR("Data must be an object, but it was:",i,r);const a=[],u=Es.empty();ng(r,(_,b)=>{const I=cT(e,_,t);b=(0,P.m9)(b);const T=i.oc(I);if(b instanceof k0)a.push(I);else{const k=Cg(b,T);null!=k&&(a.push(I),u.set(I,k))}});const d=new xy(a);return new tF(u,d,i.fieldTransforms)}function zR(n,e,t,r,i,a){const u=n.lc(1,e,t),d=[qR(e,r,t)],_=[i];if(a.length%2!=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)d.push(qR(e,a[k])),_.push(a[k+1]);const b=[],I=Es.empty();for(let k=d.length-1;k>=0;--k)if(!aF(b,d[k])){const B=d[k];let j=_[k];j=(0,P.m9)(j);const re=u.oc(B);if(j instanceof k0)b.push(B);else{const Re=Cg(j,re);null!=Re&&(b.push(B),I.set(B,Re))}}const T=new xy(b);return new tF(I,T,u.fieldTransforms)}function iF(n,e,t,r=!1){return Cg(t,n.lc(r?4:3,e))}function Cg(n,e){if(oF(n=(0,P.m9)(n)))return WR("Unsupported field value:",e,n),sF(n,e);if(n instanceof Eg)return function(t,r){if(!nF(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let d=Cg(u,r.uc(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return JO(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Mr.fromDate(t);return{timestampValue:_0(r.M,i)}}if(t instanceof Mr){const i=new Mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_0(r.M,i)}}if(t instanceof aT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Su)return{bytesValue:mP(r.M,t._byteString)};if(t instanceof Zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ux(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${sT(t)}`)}(n,e)}function sF(n,e){const t={};return TO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ng(n,(r,i)=>{const a=Cg(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function oF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mr||n instanceof aT||n instanceof Su||n instanceof Zn||n instanceof Eg)}function WR(n,e,t){if(!oF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function qR(n,e,t){if((e=(0,P.m9)(e))instanceof zc)return e._internalPath;if("string"==typeof e)return cT(n,e);throw dT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vj=new RegExp("[~\\*/\\[\\]]");function cT(n,e,t){if(e.search(Vj)>=0)throw dT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch(r){throw dT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dT(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new Pe(ge.INVALID_ARGUMENT,d+n+_)}function aF(n,e){return n.some(t=>t.isEqual(e))}class O0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bj extends O0{data(){return super.data()}}function hT(n,e){return"string"==typeof e?cT(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}class Ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends O0{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new P0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class P0 extends Wc{data(e={}){return super.data(e)}}class ef{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new P0(this._firestore,this._userDataWriter,r.key,r,new Ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new P0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ig(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new P0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ig(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==u.type&&(_=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),b=a.indexOf(u.doc.key)),{type:Uj(u.type),doc:d,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Uj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function lF(n,e){return n instanceof Wc&&e instanceof Wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ef&&e instanceof ef&&n._firestore===e._firestore&&Q1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function uF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F0{}function tf(n,...e){for(const t of e)n=t._apply(n);return n}class jj extends F0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=wg(e.firestore),r=function(i,a,u,d,_,b,I){let T;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){gF(I,b);const B=[];for(const j of I)B.push(pF(d,i,j));T={arrayValue:{values:B}}}else T=pF(d,i,I)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||gF(I,b),T=iF(u,"where",I,"in"===b||"not-in"===b);const k=Yi.create(_,b,T);return function(B,j){if(j.S()){const Re=nx(B);if(null!==Re&&!Re.isEqual(j.field))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${j.field.toString()}'`);const at=tx(B);null!==at&&mF(0,j.field,at)}const re=function(Re,at){for(const ot of Re.filters)if(at.indexOf(ot.op)>=0)return ot.op;return null}(B,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==re)throw new Pe(ge.INVALID_ARGUMENT,re===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${re.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ws(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new $c(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class $j extends F0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new ky(i,a);return function(d,_){if(null===tx(d)){const b=nx(d);null!==b&&mF(0,b,_.field)}}(r,u),u}(e._query,this._c,this.gc);return new ws(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new $c(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cF extends F0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ws(e.firestore,e.converter,WO(e._query,this.yc,this.Ic))}}class dF extends F0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=fF(e,this.type,this.Tc,this.Ec);return new ws(e.firestore,e.converter,(i=t,new $c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class hF extends F0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=fF(e,this.type,this.Tc,this.Ec);return new ws(e.firestore,e.converter,(i=t,new $c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function fF(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof O0)return function(i,a,u,d,_){if(!d)throw new Pe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const b=[];for(const I of Py(i))if(I.field.isKeyField())b.push(sg(a,d.key));else{const T=d.data.field(I.field);if(QM(T))throw new Pe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const k=I.field.canonicalString();throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}b.push(T)}return new qh(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=wg(n.firestore);return function(a,u,d,_,b,I){const T=a.explicitOrderBy;if(b.length>T.length)throw new Pe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let B=0;B<b.length;B++){const j=b[B];if(T[B].field.isKeyField()){if("string"!=typeof j)throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!rx(a)&&-1!==j.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const re=a.path.child(ln.fromString(j));if(!qe.isDocumentKey(re))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${re}' is not because it contains an odd number of segments.`);const Re=new qe(re);k.push(sg(u,Re))}else{const re=iF(d,_,j);k.push(re)}}return new qh(k,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function pF(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rx(e)&&-1!==t.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!qe.isDocumentKey(r))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sg(n,new qe(r))}if(t instanceof Zn)return sg(n,t._key);throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sT(t)}.`)}function gF(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mF(n,e,t){if(!t.isEqual(e))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Qj={maxAttempts:5};class KR{convertValue(e,t="none"){switch(ig(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return ng(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new aT(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=AO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(t0(e));default:return null}}convertTimestamp(e){const t=Gh(e);return new Mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);kt(TP(r));const i=new Hc(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(t)||jr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function fT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Jj extends KR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class _F{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,t,r){this._verifyNotCommitted();const i=nf(e,this._firestore),a=fT(i.converter,t,r),u=uT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Hr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=nf(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof zc?zR(this._dataReader,"WriteBatch.update",a._key,t,r,i):GR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nf(e,this._firestore);return this._mutations=this._mutations.concat(new f0(t._key,Hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Pe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dg extends KR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function yF(n,e,t){n=sn(n,Zn);const r=sn(n.firestore,nr),i=fT(n.converter,e,t);return Xy(r,[uT(wg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Hr.none())])}function vF(n,e,t,...r){n=sn(n,Zn);const i=sn(n.firestore,nr),a=wg(i);let u;return u="string"==typeof(e=(0,P.m9)(e))||e instanceof zc?zR(a,"updateDoc",n._key,e,t,r):GR(a,"updateDoc",n._key,e),Xy(i,[u.toMutation(n._key,Hr.exists(!0))])}function bF(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||HR(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges};if(HR(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let _,b,I;if(n instanceof Zn)b=sn(n.firestore,nr),I=Oy(n._key.path),_={next:T=>{e[u]&&e[u](ZR(b,n,T))},error:e[u+1],complete:e[u+2]};else{const T=sn(n,ws);b=sn(T.firestore,nr),I=T._query;const k=new Dg(b);_={next:B=>{e[u]&&e[u](new ef(b,k,T,B))},error:e[u+1],complete:e[u+2]},uF(n._query)}return function(T,k,B,j){const re=new rT(j),Re=new oR(k,re,B);return T.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return tR(yield Jy(T),Re)})),()=>{re.Aa(),T.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return rR(yield Jy(T),Re)}))}}(Gr(b),I,d,_)}function Xy(n,e){return function(t,r){const i=new Ti;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function G2(n,e,t){return dR.apply(this,arguments)}(yield BR(t),r,i)})),i.promise}(Gr(n),e)}function ZR(n,e,t){const r=t.docs.get(e._key),i=new Dg(n);return new Wc(n,i,e._key,r,new Ig(t.hasPendingWrites,t.fromCache),e.converter)}class lH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=nf(e,this._firestore),r=new Jj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new O0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new O0(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=nf(e,this._firestore),a=fT(i.converter,t,r),u=uT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=nf(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof zc?zR(this._dataReader,"Transaction.update",a._key,t,r,i):GR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=nf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nf(e,this._firestore),r=new Dg(this._firestore);return super.get(e).then(i=>new Wc(this._firestore,r,t._key,i._document,new Ig(!1,!1),t.converter))}}function YR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wF(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function CF(){if(!function TB(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Sy=fs.SDK_VERSION,(0,fs._registerComponent)(new Vo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new nr(i,new bB(t.getProvider("auth-internal")),new CB(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,fs.registerVersion)(bO,"3.4.9",n),(0,fs.registerVersion)(bO,"3.4.9","esm2017")}();class L0{constructor(e){this._delegate=e}static fromBase64String(e){return CF(),new L0(Su.fromBase64String(e))}static fromUint8Array(e){return wF(),new L0(Su.fromUint8Array(e))}toBase64(){return CF(),this._delegate.toBase64()}toUint8Array(){return wF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function QR(n){return function _H(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yH{enableIndexedDbPersistence(e,t){return function Ij(n,e){eF(n=sn(n,nr));const t=Gr(n),r=n._freezeSettings(),i=new NR;return X1(t,i,new P1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Dj(n){eF(n=sn(n,nr));const e=Gr(n),t=n._freezeSettings(),r=new NR;return X1(e,r,new oj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tj(n){if(n._initialized&&!n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Il.vt())return Promise.resolve();const i=r+"main";yield Il.delete(i)}),function(r){return t.apply(this,arguments)})(Ix(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&XE("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function vj(n,e,t,r={}){var i;const a=(n=sn(n,N0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&XE("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=Ki.MOCK_USER;else{u=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ki(_)}n._authCredentials=new vB(new EO(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function Sj(n){return function dj(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield B1(n),t=yield U1(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.wu.delete(0),x0(i)}(t)}))}(Gr(n=sn(n,nr)))}(this._delegate)}disableNetwork(){return function Mj(n){return function hj(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield B1(n),t=yield U1(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const a=Qe(i);a.wu.add(0),yield zy(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gr(n=sn(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,G1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Aj(n){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function K2(n,e){return mR.apply(this,arguments)}(yield BR(e),t)})),t.promise}(Gr(n=sn(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function aH(n,e){return function gj(n,e){const t=new rT(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Jy(n),i=t,Qe(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Jy(n),i=t,void Qe(r).bu.delete(i);var r,i}))}}(Gr(n=sn(n,nr)),HR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ev(this,Z1(this._delegate,e))}catch(t){throw qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Oa(this,oT(this._delegate,e))}catch(t){throw qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ks(this,function bj(n,e){if(n=sn(n,N0),jR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ws(n,null,(t=e,new $c(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uH(n,e,t){n=sn(n,nr);const r=Object.assign(Object.assign({},Qj),t);return function(i){if(i.maxAttempts<1)throw new Pe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function mj(n,e,t){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(a=n,iT(a).then(u=>u.datastore));var a;new uj(n.asyncQueue,i,t,e,r).run()})),r.promise}(Gr(n),i=>e(new lH(n,i)),r)}(this._delegate,t=>e(new DF(this,t)))}batch(){return Gr(this._delegate),new TF(new _F(this._delegate,e=>Xy(this._delegate,e)))}loadBundle(e){return function xj(n,e){const t=Gr(n=sn(n,nr)),r=new wj;return function _j(n,e,t,r){const i=function(a,u){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,b){if(_ instanceof Uint8Array)return F1(_,b);if(_ instanceof ArrayBuffer)return F1(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new aj(_,u);var _}(t,M0(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function sj(n,e,t){const r=Qe(n);var i;(i=(0,be.Z)(function*(a,u,d){try{const _=yield u.getMetadata();if(yield function(k,B){const j=Qe(k),re=Ai(B.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Re=>j._s.getBundleMetadata(Re,B.id)).then(Re=>!!Re&&Re.createTime.compareTo(re)>=0)}(a.localStore,_))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(k=_).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);d._updateProgress(D1(_));const b=new V2(_,a.localStore,u.M);let I=yield u.ma();for(;I;){const k=yield b.Fu(I);k&&d._updateProgress(k),I=yield u.ma()}const T=yield b.complete();return yield Gc(a,T.Lu,void 0),yield function(k,B){const j=Qe(k);return j.persistence.runTransaction("Save bundle","readwrite",re=>j._s.saveBundleMetadata(re,B))}(a.localStore,_),d._completeWith(T.progress),Promise.resolve(T.Bu)}catch(_){return XE("SyncEngine",`Loading bundle failed with ${_}`),d._failWith(_),Promise.resolve(new Set)}var k}),function(a,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield BR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Rj(n,e){return function yj(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield VR(n),e)}))}(Gr(n=sn(n,nr)),e).then(t=>t?new ws(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ks(this,t):null)}}class pT extends KR{constructor(e){super(),this.firestore=e}convertBytes(e){return new L0(new Su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Oa.forKey(t,this.firestore,null)}}class DF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pT(e)}get(e){const t=Ag(e);return this._delegate.get(t).then(r=>new V0(this._firestore,new Wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ag(e);return r?(YR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ag(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ag(e);return this._delegate.delete(t),this}}class TF{constructor(e){this._delegate=e}set(e,t,r){const i=Ag(e);return r?(YR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ag(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ag(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new P0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new B0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Tg(e,new pT(e),t),i.set(t,a)),a}}Tg.INSTANCES=new WeakMap;class Oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oa(t,new Zn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Oa(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ev(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ev(this.firestore,Z1(this._delegate,e))}catch(t){throw qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof Zn&&Y1(this._delegate,e)}set(e,t){t=YR("DocumentReference.set",t);try{return t?yF(this._delegate,e,t):yF(this._delegate,e)}catch(r){throw qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vF(this._delegate,e):vF(this._delegate,e,t,...r)}catch(i){throw qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function sH(n){return Xy(sn(n.firestore,nr),[new f0(n._key,Hr.none())])}(this._delegate)}onSnapshot(...e){const t=AF(e),r=SF(e,i=>new V0(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bF(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function eH(n){n=sn(n,Zn);const e=sn(n.firestore,nr),t=Gr(e),r=new Dg(e);return function fj(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,u){try{const d=yield function(_,b){const I=Qe(_);return I.persistence.runTransaction("read document","readonly",T=>I.fi.Ls(T,b))}(i,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Pe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const _=Ky(d,`Failed to get document '${a} from cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield VR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Wc(e,r,n._key,i,new Ig(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function tH(n){n=sn(n,Zn);const e=sn(n.firestore,nr);return j1(Gr(e),n._key,{source:"server"}).then(t=>ZR(e,n,t))}(this._delegate):function Xj(n){n=sn(n,Zn);const e=sn(n.firestore,nr);return j1(Gr(e),n._key).then(t=>ZR(e,n,t))}(this._delegate),t.then(r=>new V0(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oa(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function qs(n,e,t){return n.message=n.message.replace(e,t),n}function AF(n){for(const e of n)if("object"==typeof e&&!QR(e))return e;return{}}function SF(n,e){var t,r;let i;return i=QR(n[0])?n[0]:QR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class V0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lF(this._delegate,e._delegate)}}class B0 extends V0{data(e){const t=this._delegate.data(e);return function _B(n,e){n||ut()}(void 0!==t),t}}class Ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pT(e)}where(e,t,r){try{return new Ks(this.firestore,tf(this._delegate,function Hj(n,e,t){const r=e,i=hT("where",n);return new jj(i,r,t)}(e,t,r)))}catch(i){throw qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ks(this.firestore,tf(this._delegate,function Gj(n,e="asc"){const t=e,r=hT("orderBy",n);return new $j(r,t)}(e,t)))}catch(r){throw qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ks(this.firestore,tf(this._delegate,function zj(n){return q1("limit",n),new cF("limit",n,"F")}(e)))}catch(t){throw qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ks(this.firestore,tf(this._delegate,function Wj(n){return q1("limitToLast",n),new cF("limitToLast",n,"L")}(e)))}catch(t){throw qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ks(this.firestore,tf(this._delegate,function qj(...n){return new dF("startAt",n,!0)}(...e)))}catch(t){throw qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ks(this.firestore,tf(this._delegate,function Kj(...n){return new dF("startAfter",n,!1)}(...e)))}catch(t){throw qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ks(this.firestore,tf(this._delegate,function Zj(...n){return new hF("endBefore",n,!1)}(...e)))}catch(t){throw qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ks(this.firestore,tf(this._delegate,function Yj(...n){return new hF("endAt",n,!0)}(...e)))}catch(t){throw qs(t,"endAt()","Query.endAt()")}}isEqual(e){return Q1(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function rH(n){n=sn(n,ws);const e=sn(n.firestore,nr),t=Gr(e),r=new Dg(e);return function pj(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,u){try{const d=yield QD(i,a,!0),_=new S1(a,d._i),b=_.Wu(d.documents),I=_.applyChanges(b,!1);u.resolve(I.snapshot)}catch(d){const _=Ky(d,`Failed to execute query '${a} against cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield VR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ef(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function iH(n){n=sn(n,ws);const e=sn(n.firestore,nr),t=Gr(e),r=new Dg(e);return H1(t,n._query,{source:"server"}).then(i=>new ef(e,r,n,i))}(this._delegate):function nH(n){n=sn(n,ws);const e=sn(n.firestore,nr),t=Gr(e),r=new Dg(e);return uF(n._query),H1(t,n._query).then(i=>new ef(e,r,n,i))}(this._delegate),t.then(r=>new JR(this.firestore,new ef(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=AF(e),r=SF(e,i=>new JR(this.firestore,new ef(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bF(this._delegate,t,r)}withConverter(e){return new Ks(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}class bH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new B0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new B0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new B0(this._firestore,r))})}isEqual(e){return lF(this._delegate,e._delegate)}}class ev extends Ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oa(this.firestore,e):null}doc(e){try{return new Oa(this.firestore,void 0===e?oT(this._delegate):oT(this._delegate,e))}catch(t){throw qs(t,"doc()","CollectionReference.doc()")}}add(e){return function oH(n,e){const t=sn(n.firestore,nr),r=oT(n),i=fT(n.converter,e);return Xy(t,[uT(wg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Oa(this.firestore,t))}isEqual(e){return Y1(this._delegate,e._delegate)}withConverter(e){return new ev(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Ag(n){return sn(n,Zn)}class XR{constructor(...e){this._delegate=new zc(...e)}static documentId(){return new XR(ai.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dH(){return new $R("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function cH(){return new k0("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function hH(...n){return new Pj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function fH(...n){return new Fj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function pH(n){return new Lj("increment",n)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const EH={Firestore:IF,GeoPoint:aT,Timestamp:Mr,Blob:L0,Transaction:DF,WriteBatch:TF,DocumentReference:Oa,DocumentSnapshot:V0,Query:Ks,QueryDocumentSnapshot:B0,QuerySnapshot:JR,CollectionReference:ev,FieldPath:XR,FieldValue:Sg,setLogLevel:function vH(n){!function mB(n){$h.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function MF(n,e){return function IH(n,e=ru.z){return new Fi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function eN(n,e){return MF(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function gT(n,e){return eN(n,e).pipe(Oh(void 0),Oc(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const _=i.find(I=>I.doc.ref.isEqual(u.ref)),b=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),a}))}function xF(n,e,t){return gT(n,t).pipe(Os((r,i)=>function TH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function AH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return tN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Vf(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function tN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function CH(n){(function wH(n,e){n.INTERNAL.registerComponent(new Vo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},EH)))})(n,(e,t)=>new IF(e,t,new yH)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(bm.Z);class NF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Oh(void 0),Oc(),Ra(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Os((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RF(e);return xF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return eN(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Sn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Sn.iC)}add(e){return this.ref.add(e)}doc(e){return new kF(this.ref.doc(e),this.afs)}}class kF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=OF(r,t);return new NF(i,a,this.afs)}snapshotChanges(){return function DH(n,e){return MF(n,e).pipe(Oh(void 0),Oc(),(0,vt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(Sn.iC)}}class SH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ra(t=>t.length>0),Sn.iC):gT(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Os((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RF(e);return xF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return eN(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Sn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Sn.iC)}}const MH=new f.OlP("angularfire2.enableFirestorePersistence"),xH=new f.OlP("angularfire2.firestore.persistenceSettings"),RH=new f.OlP("angularfire2.firestore.settings"),NH=new f.OlP("angularfire2.firestore.use-emulator");function OF(n,e=(t=>t)){return{query:e(n),ref:n}}let kH=(()=>{class n{constructor(t,r,i,a,u,d,_,b,I,T,k,B,j,re,Re,at,ot){this.schedulers=_;const mt=(0,Bn.on)(t,d,r),ct=I;T&&Z_(mt,d,k,j,re,Re,B,at),[this.firestore,this.persistenceEnabled$]=(0,Bn.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const Ft=d.runOutsideAngular(()=>mt.firestore());if(a&&Ft.settings(a),ct&&Ft.useEmulator(...ct),i&&!oa(u)){const zt=()=>{try{return(0,An.D)(Ft.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(_n){return"undefined"!=typeof console&&console.warn(_n),nt(!1)}};return[Ft,d.runOutsideAngular(zt)]}return[Ft,nt(!1)]},[a,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=OF(i,r),d=this.schedulers.ngZone.run(()=>a);return new NF(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new SH(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Bn.Dh),f.LFG(Bn.xv,8),f.LFG(MH,8),f.LFG(RH,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Sn.HU),f.LFG(xH,8),f.LFG(NH,8),f.LFG(Y_,8),f.LFG(aE,8),f.LFG(lE,8),f.LFG(Rh,8),f.LFG(Nh,8),f.LFG(uE,8),f.LFG(cE,8),f.LFG(Op,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OH=(()=>{class n{constructor(t,r){this.firebase=t,this.firebasesStore=r}GetDocuments(){return this.firebasesStore.collection("Documents").valueChanges()}InsertDocuments(t){return new Promise((r,i)=>{this.firebasesStore.collection("Documents").add(t).then(a=>{console.log(a)},a=>i(a))})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(KI),f.LFG(kH))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mg(n){return null!=n&&"false"!=`${n}`}function rf(n){return n instanceof f.SBq?n.nativeElement:n}let PF=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VH=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=rf(t);return new Fi.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Sr.x,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(PF))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BH=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new f.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Mg(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function PH(n,e=0){return function FH(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function LH(n,e=ru.z){return(0,lr.e)((t,r)=>{let i=null,a=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const b=a;a=null,r.next(b)}};function _(){const b=u+n,I=e.now();if(I<b)return i=this.schedule(void 0,b-I),void r.add(i);d()}t.subscribe((0,Lt.x)(r,b=>{a=b,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(VH),f.Y36(f.SBq),f.Y36(f.R0b))},n.\u0275dir=f.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),UH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[PF]}),n})();const jH=new f.OlP("cdk-dir-doc",{providedIn:"root",factory:function HH(){return(0,f.f3M)(ue)}}),$H=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let nN,zH=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new f.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function GH(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?$H.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jH,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();try{nN="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){nN=!1}let tv,xg=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Ir(n){return n===Io}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nN)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VF=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function BF(){if(tv)return tv;if("object"!=typeof document||!document)return tv=new Set(VF),tv;let n=document.createElement("input");return tv=new Set(VF.filter(e=>(n.setAttribute("type",e),n.type===e))),tv}let U0,rN;function mT(n){return function WH(){if(null==U0&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>U0=!0}))}finally{U0=U0||!1}return U0}()?n:!!n.capture}function j0(n){return n.composedPath?n.composedPath()[0]:n.target}class Pa extends Sr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function yT(n){return(0,lr.e)((e,t)=>{(0,mi.Xf)(n).subscribe((0,Lt.x)(t,()=>t.complete(),Ud.Z)),!t.closed&&e.subscribe(t)})}function $F(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function GF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const u$=new f.OlP("cdk-input-modality-detector-options"),c$={ignoreKeys:[18,17,224,91,16]},nv=mT({passive:!0,capture:!0});let d$=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new Pa(null),this._lastTouchMs=0,this._onKeydown=u=>{var d,_;(null===(_=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===_?void 0:_.some(b=>b===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=j0(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next($F(u)?"keyboard":"mouse"),this._mostRecentTarget=j0(u))},this._onTouchstart=u=>{GF(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=j0(u))},this._options=Object.assign(Object.assign({},c$),a),this.modalityDetected=this._modality.pipe(function t$(n){return Ra((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(Vf()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,nv),i.addEventListener("mousedown",this._onMousedown,nv),i.addEventListener("touchstart",this._onTouchstart,nv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,nv),document.removeEventListener("mousedown",this._onMousedown,nv),document.removeEventListener("touchstart",this._onTouchstart,nv))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xg),f.LFG(f.R0b),f.LFG(ue),f.LFG(u$,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f$=new f.OlP("cdk-focus-monitor-default-options"),vT=mT({passive:!0,capture:!0});let p$=(()=>{class n{constructor(t,r,i,a,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Sr.x,this._rootNodeFocusAndBlurListener=d=>{const _=j0(d),b="focus"===d.type?this._onFocus:this._onBlur;for(let I=_;I;I=I.parentElement)b.call(this,d,I)},this._document=a,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=rf(t);if(!this._platform.isBrowser||1!==i.nodeType)return nt(null);const a=function KH(n){if(function qH(){if(null==rN){const n="undefined"!=typeof document?document.head:null;rN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return rN}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const d={checkChildren:r,subject:new Sr.x,rootNode:a};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=rf(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=rf(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([d,_])=>this._originChanged(d,r,_)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=j0(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,vT),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,vT)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(yT(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,vT),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,vT),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(xg),f.LFG(d$),f.LFG(ue,8),f.LFG(f$,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WF="cdk-high-contrast-black-on-white",qF="cdk-high-contrast-white-on-black",iN="cdk-high-contrast-active";let g$=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(iN),t.remove(WF),t.remove(qF),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(iN),t.add(WF)):2===r&&(t.add(iN),t.add(qF))}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xg),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KF{}const qc="*";function _$(n,e){return{type:7,name:n,definitions:e,options:{}}}function y$(n,e=null){return{type:4,styles:e,timings:n}}function ZF(n,e=null){return{type:2,steps:n,options:e}}function bT(n){return{type:6,styles:n,offset:null}}function v$(n,e,t){return{type:0,name:n,styles:e,options:t}}function b$(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function YF(n){Promise.resolve(null).then(n)}class H0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){YF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class QF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?YF(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const tn=!1;function JF(n){return new f.vHH(3e3,tn)}function eG(){return"undefined"!=typeof window&&void 0!==window.document}function oN(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function sf(n){switch(n.length){case 0:return new H0;case 1:return n[0];default:return new QF(n)}}function XF(n,e,t,r,i={},a={}){const u=[],d=[];let _=-1,b=null;if(r.forEach(I=>{const T=I.offset,k=T==_,B=k&&b||{};Object.keys(I).forEach(j=>{let re=j,Re=I[j];if("offset"!==j)switch(re=e.normalizePropertyName(re,u),Re){case"!":Re=i[j];break;case qc:Re=a[j];break;default:Re=e.normalizeStyleValue(j,re,Re,u)}B[re]=Re}),k||d.push(B),b=B,_=T}),u.length)throw function $$(n){return new f.vHH(3502,tn)}();return d}function aN(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&lN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&lN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&lN(t,"destroy",n)))}}function lN(n,e,t){const r=t.totalTime,a=uN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function uN(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function Qo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function eL(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let cN=(n,e)=>!1,tL=(n,e,t)=>[],nL=null;function dN(n){const e=n.parentNode||n.host;return e===nL?null:e}(oN()||"undefined"!=typeof Element)&&(eG()?(nL=(()=>document.documentElement)(),cN=(n,e)=>{for(;e;){if(e===n)return!0;e=dN(e)}return!1}):cN=(n,e)=>n.contains(e),tL=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ng=null,rL=!1;function iL(n){Ng||(Ng=function nG(){return"undefined"!=typeof document?document.body:null}()||{},rL=!!Ng.style&&"WebkitAppearance"in Ng.style);let e=!0;return Ng.style&&!function tG(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ng.style,!e&&rL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ng.style)),e}const sL=cN,oL=tL;let aL=(()=>{class n{validateStyleProperty(t){return iL(t)}matchesElement(t,r){return!1}containsElement(t,r){return sL(t,r)}getParentElement(t){return dN(t)}query(t,r,i){return oL(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,d=[],_){return new H0(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),hN=(()=>{class n{}return n.NOOP=new aL,n})();const fN="ng-enter",wT="ng-leave",CT="ng-trigger",IT=".ng-trigger",uL="ng-animating",pN=".ng-animating";function kg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gN(parseFloat(e[1]),e[2])}function gN(n,e){return"s"===e?1e3*n:n}function DT(n,e,t){return n.hasOwnProperty("duration")?n:function sG(n,e,t){let i,a=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(JF()),{duration:0,delay:0,easing:""};i=gN(parseFloat(d[1]),d[2]);const _=d[3];null!=_&&(a=gN(parseFloat(_),d[4]));const b=d[5];b&&(u=b)}else i=n;if(!t){let d=!1,_=e.length;i<0&&(e.push(function E$(){return new f.vHH(3100,tn)}()),d=!0),a<0&&(e.push(function w$(){return new f.vHH(3101,tn)}()),d=!0),d&&e.splice(_,0,JF())}return{duration:i,delay:a,easing:u}}(n,e,t)}function rv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function of(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else rv(n,t);return t}function dL(n,e,t){return t?e+":"+t+";":""}function hL(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=dL(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=dL(0,lG(t),n.style[t]));n.setAttribute("style",e)}function Mu(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=_N(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),oN()&&hL(n))}function Og(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=_N(t);n.style[r]=""}),oN()&&hL(n))}function $0(n){return Array.isArray(n)?1==n.length?n[0]:ZF(n):n}const mN=new RegExp("{{\\s*(.+?)\\s*}}","g");function fL(n){let e=[];if("string"==typeof n){let t;for(;t=mN.exec(n);)e.push(t[1]);mN.lastIndex=0}return e}function TT(n,e,t){const r=n.toString(),i=r.replace(mN,(a,u)=>{let d=e[u];return e.hasOwnProperty(u)||(t.push(function I$(n){return new f.vHH(3003,tn)}()),d=""),d.toString()});return i==r?n:i}function AT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const aG=/-+([a-z0-9])/g;function _N(n){return n.replace(aG,(...e)=>e[1].toUpperCase())}function lG(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Jo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function D$(n){return new f.vHH(3004,tn)}()}}function pL(n,e){return window.getComputedStyle(n)[e]}function pG(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function gG(n,e,t){if(":"==n[0]){const _=function mG(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function B$(n){return new f.vHH(3016,tn)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function V$(n){return new f.vHH(3015,tn)}()),e;const i=r[1],a=r[2],u=r[3];e.push(gL(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(gL(u,i))}(r,t,e)):t.push(n),t}const RT=new Set(["true","1"]),NT=new Set(["false","0"]);function gL(n,e){const t=RT.has(n)||NT.has(n),r=RT.has(e)||NT.has(e);return(i,a)=>{let u="*"==n||n==i,d="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?RT.has(n):NT.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?RT.has(e):NT.has(e)),u&&d}}const _G=new RegExp("s*:selfs*,?","g");function yN(n,e,t,r){return new yG(n).build(e,t,r)}class yG{constructor(e){this._driver=e}build(e,t,r){const i=new EG(t);this._resetContextStyleTimingState(i);const a=Jo(this,$0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function A$(){return new f.vHH(3006,tn)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const _=d,b=_.name;b.toString().split(/\s*,\s*/).forEach(I=>{_.name=I,a.push(this.visitState(_,t))}),_.name=b}else if(1==d.type){const _=this.visitTransition(d,t);r+=_.queryCount,i+=_.depCount,u.push(_)}else t.errors.push(function S$(){return new f.vHH(3007,tn)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(d=>{if(kT(d)){const _=d;Object.keys(_).forEach(b=>{fL(_[b]).forEach(I=>{u.hasOwnProperty(I)||a.add(I)})})}}),a.size&&(AT(a.values()),t.errors.push(function M$(n,e){return new f.vHH(3008,tn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Jo(this,$0(e.animation),t);return{type:1,matchers:pG(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Pg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Jo(this,r,t)),options:Pg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const d=Jo(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:Pg(e.options)}}visitAnimate(e,t){const r=function CG(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return vN(DT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=vN(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=DT(t,e);return vN(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:bT({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,d=!1;if(!u){d=!0;const b={};r.easing&&(b.easing=r.easing),u=bT(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(u,t);_.isEmptyStep=d,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==qc?r.push(u):t.errors.push(function x$(n){return new f.vHH(3002,tn)}()):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(kT(u)){const d=u,_=d.easing;if(_&&(a=_,delete d.easing),!i)for(let b in d)if(d[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete u[d],void t.unsupportedCSSPropertiesFound.add(d);const _=t.collectedStyles[t.currentQuerySelector],b=_[d];let I=!0;b&&(a!=i&&a>=b.startTime&&i<=b.endTime&&(t.errors.push(function R$(n,e,t,r,i){return new f.vHH(3010,tn)}()),I=!1),a=b.startTime),I&&(_[d]={startTime:a,endTime:i}),t.options&&function oG(n,e,t){const r=e.params||{},i=fL(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function C$(n){return new f.vHH(3001,tn)}())})}(u[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function N$(){return new f.vHH(3011,tn)}()),r;let a=0;const u=[];let d=!1,_=!1,b=0;const I=e.steps.map(at=>{const ot=this._makeStyleAst(at,t);let mt=null!=ot.offset?ot.offset:function wG(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(kT(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(kT(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),ct=0;return null!=mt&&(a++,ct=ot.offset=mt),_=_||ct<0||ct>1,d=d||ct<b,b=ct,u.push(ct),ot});_&&t.errors.push(function k$(){return new f.vHH(3012,tn)}()),d&&t.errors.push(function O$(){return new f.vHH(3200,tn)}());const T=e.steps.length;let k=0;a>0&&a<T?t.errors.push(function P$(){return new f.vHH(3202,tn)}()):0==a&&(k=1/(T-1));const B=T-1,j=t.currentTime,re=t.currentAnimateTimings,Re=re.duration;return I.forEach((at,ot)=>{const mt=k>0?ot==B?1:k*ot:u[ot],ct=mt*Re;t.currentTime=j+re.delay+ct,re.duration=ct,this._validateStyleAst(at,t),at.offset=mt,r.styles.push(at)}),r}visitReference(e,t){return{type:8,animation:Jo(this,$0(e.animation),t),options:Pg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Pg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Pg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function vG(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(_G,"")),n=n.replace(/@\*/g,IT).replace(/@\w+/g,t=>IT+"-"+t.substr(1)).replace(/:animating/g,pN),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Qo(t.collectedStyles,t.currentQuerySelector,{});const d=Jo(this,$0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Pg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function F$(){return new f.vHH(3013,tn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:DT(e.timings,t.errors,!0);return{type:12,animation:Jo(this,$0(e.animation),t),timings:r,options:null}}}class EG{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function kT(n){return!Array.isArray(n)&&"object"==typeof n}function Pg(n){return n?(n=rv(n)).params&&(n.params=function bG(n){return n?rv(n):null}(n.params)):n={},n}function vN(n,e,t){return{duration:n,delay:e,easing:t}}function bN(n,e,t,r,i,a,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:d}}class OT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const TG=new RegExp(":enter","g"),SG=new RegExp(":leave","g");function EN(n,e,t,r,i,a={},u={},d,_,b=[]){return(new MG).buildKeyframes(n,e,t,r,i,a,u,d,_,b)}class MG{buildKeyframes(e,t,r,i,a,u,d,_,b,I=[]){b=b||new OT;const T=new wN(e,t,b,i,a,I,[]);T.options=_,T.currentTimeline.setStyles([u],null,T.errors,_),Jo(this,r,T);const k=T.timelines.filter(B=>B.containsAnimation());if(Object.keys(d).length){let B;for(let j=k.length-1;j>=0;j--){const re=k[j];if(re.element===t){B=re;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([d],null,T.errors,_)}return k.length?k.map(B=>B.buildKeyframes()):[bN(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?kg(r.duration):null,d=null!=r.delay?kg(r.delay):null;return 0!==u&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,u,d);a=Math.max(a,b.duration+b.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=PT);const u=kg(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Jo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?kg(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),Jo(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return DT(t.params?TT(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(_=>{d.forwardTime((_.offset||0)*a),d.setStyles(_.styles,_.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?kg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=PT);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let _=null;d.forEach((b,I)=>{t.currentQueryIndex=I;const T=t.createSubContext(e.options,b);a&&T.delayNextStep(a),b===t.element&&(_=T.currentTimeline),Jo(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),d=u*(t.currentQueryTotal-1);let _=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=d-_;break;case"full":_=r.currentStaggerTime}const I=t.currentTimeline;_&&I.delayNextStep(_);const T=I.currentTime;Jo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const PT={};class wN{constructor(e,t,r,i,a,u,d,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=PT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new FT(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=kg(r.duration)),null!=r.delay&&(i.delay=kg(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=TT(a[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new wN(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=PT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new xG(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(TG,"."+this._enterClassName)).replace(SG,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),d.push(...b)}return!a&&0==d.length&&u.push(function L$(n){return new f.vHH(3014,tn)}()),d}}class FT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new FT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||qc,this._currentKeyframe[t]=qc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function RG(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=qc})):of(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(d=>{const _=TT(u[d],a,r);this._pendingStyles[d]=_,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:qc),this._updateStyle(d,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,_)=>{const b=of(d,!0);Object.keys(b).forEach(I=>{const T=b[I];"!"==T?e.add(I):T==qc&&t.add(I)}),r||(b.offset=_/this.duration),i.push(b)});const a=e.size?AT(e.values()):[],u=t.size?AT(t.values()):[];if(r){const d=i[0],_=rv(d);d.offset=0,_.offset=1,i=[d,_]}return bN(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class xG extends FT{constructor(e,t,r,i,a,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,d=t/u,_=of(e[0],!1);_.offset=0,a.push(_);const b=of(e[0],!1);b.offset=yL(d),a.push(b);const I=e.length-1;for(let T=1;T<=I;T++){let k=of(e[T],!1);k.offset=yL((t+k.offset*r)/u),a.push(k)}r=u,t=0,i="",e=a}return bN(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function yL(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class CN{}class NG extends CN{normalizePropertyName(e,t){return _N(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(kG[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function T$(n,e){return new f.vHH(3005,tn)}())}return u+a}}const kG=(()=>function OG(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vL(n,e,t,r,i,a,u,d,_,b,I,T,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:d,queriedElements:_,preStyleProps:b,postStyleProps:I,totalTime:T,errors:k}}const IN={};class bL{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function PG(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,d,_,b,I){const T=[],k=this.ast.options&&this.ast.options.params||IN,j=this.buildStyles(r,d&&d.params||IN,T),re=_&&_.params||IN,Re=this.buildStyles(i,re,T),at=new Set,ot=new Map,mt=new Map,ct="void"===i,Ft={params:Object.assign(Object.assign({},k),re)},zt=I?[]:EN(e,t,this.ast.animation,a,u,j,Re,Ft,b,T);let _n=0;if(zt.forEach(Yc=>{_n=Math.max(Yc.duration+Yc.delay,_n)}),T.length)return vL(t,this._triggerName,r,i,ct,j,Re,[],[],ot,mt,_n,T);zt.forEach(Yc=>{const Qc=Yc.element,eB=Qo(ot,Qc,{});Yc.preStyleProps.forEach(Hg=>eB[Hg]=!0);const sw=Qo(mt,Qc,{});Yc.postStyleProps.forEach(Hg=>sw[Hg]=!0),Qc!==t&&at.add(Qc)});const Zs=AT(at.values());return vL(t,this._triggerName,r,i,ct,j,Re,zt,Zs,ot,mt,_n)}}class FG{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=rv(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(d=>{let _=u[d];_.length>1&&(_=TT(_,i,t));const b=this.normalizer.normalizePropertyName(d,t);_=this.normalizer.normalizeStyleValue(d,b,_,t),r[b]=_})}}),r}}class VG{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new FG(i.style,i.options&&i.options.params||{},r)}),EL(this.states,"true","1"),EL(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new bL(e,i,this.states))}),this.fallbackTransition=function BG(n,e,t){return new bL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function EL(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const UG=new OT;class jG{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=yN(this._driver,t,r,[]);if(r.length)throw function G$(n){return new f.vHH(3503,tn)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=XF(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const d=new Map;if(a?(u=EN(this._driver,t,a,fN,wT,{},{},r,UG,i),u.forEach(I=>{const T=Qo(d,I.element,{});I.postStyleProps.forEach(k=>T[k]=null)})):(i.push(function z$(){return new f.vHH(3300,tn)}()),u=[]),i.length)throw function W$(n){return new f.vHH(3504,tn)}();d.forEach((I,T)=>{Object.keys(I).forEach(k=>{I[k]=this._driver.computeStyle(T,k,qc)})});const b=sf(u.map(I=>{const T=d.get(I.element);return this._buildPlayer(I,{},T)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function q$(n){return new f.vHH(3301,tn)}();return t}listen(e,t,r,i){const a=uN(t,"","","");return aN(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const wL="ng-animate-queued",DN="ng-animate-disabled",WG=[],CL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fa="__ng_removed";class TN{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function QG(n){return null!=n?n:null}(r?e.value:e),r){const a=rv(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const G0="void",AN=new TN(G0);class KG{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,La(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function K$(n,e){return new f.vHH(3302,tn)}();if(null==r||0==r.length)throw function Z$(n){return new f.vHH(3303,tn)}();if(!function JG(n){return"start"==n||"done"==n}(r))throw function Y$(n,e){return new f.vHH(3400,tn)}();const a=Qo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const d=Qo(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(La(e,CT),La(e,CT+"-"+t),d[t]=AN),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(u);_>=0&&a.splice(_,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Q$(n){return new f.vHH(3401,tn)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new SN(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(La(e,CT),La(e,CT+"-"+t),this._engine.statesByElement.set(e,d={}));let _=d[t];const b=new TN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),d[t]=b,_||(_=AN),b.value!==G0&&_.value===b.value){if(!function t3(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(_.params,b.params)){const re=[],Re=a.matchStyles(_.value,_.params,re),at=a.matchStyles(b.value,b.params,re);re.length?this._engine.reportError(re):this._engine.afterFlush(()=>{Og(e,Re),Mu(e,at)})}return}const k=Qo(this._engine.playersByElement,e,[]);k.forEach(re=>{re.namespaceId==this.id&&re.triggerName==t&&re.queued&&re.destroy()});let B=a.matchTransition(_.value,b.value,e,b.params),j=!1;if(!B){if(!i)return;B=a.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:_,toState:b,player:u,isFallbackTransition:j}),j||(La(e,wL),u.onStart(()=>{iv(e,wL)})),u.onDone(()=>{let re=this.players.indexOf(u);re>=0&&this.players.splice(re,1);const Re=this._engine.playersByElement.get(e);if(Re){let at=Re.indexOf(u);at>=0&&Re.splice(at,1)}}),this.players.push(u),k.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,IT,!0);r.forEach(i=>{if(i[Fa])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const d=[];if(Object.keys(a).forEach(_=>{if(u.set(_,a[_].value),this._triggers[_]){const b=this.trigger(e,_,G0,i);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&sf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const _=this._triggers[u].fallbackTransition,b=r[u]||AN,I=new TN(G0),T=new SN(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:_,fromState:b,toState:I,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Fa];(!a||a===CL)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){La(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(d=>{if(d.name==r.triggerName){const _=uN(a,r.triggerName,r.fromState.value,r.toState.value);_._data=e,aN(r.player,d.phase,_,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class ZG{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new KG(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let u=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const _=i.get(d);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}}else for(let d=a;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),u=!0;break}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const d=this._fetchNamespace(u);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(LT(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!LT(t))return;const a=t[Fa];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),La(e,DN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),iv(e,DN))}removeNode(e,t,r,i){if(LT(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Fa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return LT(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,IT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,pN,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return sf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Fa];if(r&&r.setForRemoval){if(e[Fa]=CL,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(DN))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)La(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?sf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function J$(n){return new f.vHH(3402,tn)}()}_flushAnimations(e,t){const r=new OT,i=[],a=new Map,u=[],d=new Map,_=new Map,b=new Map,I=new Set;this.disabledNodes.forEach(ht=>{I.add(ht);const Tt=this.driver.query(ht,".ng-animate-queued",!0);for(let Rt=0;Rt<Tt.length;Rt++)I.add(Tt[Rt])});const T=this.bodyNode,k=Array.from(this.statesByElement.keys()),B=TL(k,this.collectedEnterElements),j=new Map;let re=0;B.forEach((ht,Tt)=>{const Rt=fN+re++;j.set(Tt,Rt),ht.forEach(fn=>La(fn,Rt))});const Re=[],at=new Set,ot=new Set;for(let ht=0;ht<this.collectedLeaveElements.length;ht++){const Tt=this.collectedLeaveElements[ht],Rt=Tt[Fa];Rt&&Rt.setForRemoval&&(Re.push(Tt),at.add(Tt),Rt.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(fn=>at.add(fn)):ot.add(Tt))}const mt=new Map,ct=TL(k,Array.from(at));ct.forEach((ht,Tt)=>{const Rt=wT+re++;mt.set(Tt,Rt),ht.forEach(fn=>La(fn,Rt))}),e.push(()=>{B.forEach((ht,Tt)=>{const Rt=j.get(Tt);ht.forEach(fn=>iv(fn,Rt))}),ct.forEach((ht,Tt)=>{const Rt=mt.get(Tt);ht.forEach(fn=>iv(fn,Rt))}),Re.forEach(ht=>{this.processLeaveNode(ht)})});const Ft=[],zt=[];for(let ht=this._namespaceList.length-1;ht>=0;ht--)this._namespaceList[ht].drainQueuedTransitions(t).forEach(Rt=>{const fn=Rt.player,xi=Rt.element;if(Ft.push(fn),this.collectedEnterElements.length){const Ys=xi[Fa];if(Ys&&Ys.setForMove){if(Ys.previousTriggersValues&&Ys.previousTriggersValues.has(Rt.triggerName)){const $g=Ys.previousTriggersValues.get(Rt.triggerName),cf=this.statesByElement.get(Rt.element);cf&&cf[Rt.triggerName]&&(cf[Rt.triggerName].value=$g)}return void fn.destroy()}}const Nu=!T||!this.driver.containsElement(T,xi),ta=mt.get(xi),uf=j.get(xi),ur=this._buildInstruction(Rt,r,uf,ta,Nu);if(ur.errors&&ur.errors.length)return void zt.push(ur);if(Nu)return fn.onStart(()=>Og(xi,ur.fromStyles)),fn.onDestroy(()=>Mu(xi,ur.toStyles)),void i.push(fn);if(Rt.isFallbackTransition)return fn.onStart(()=>Og(xi,ur.fromStyles)),fn.onDestroy(()=>Mu(xi,ur.toStyles)),void i.push(fn);const rB=[];ur.timelines.forEach(Ys=>{Ys.stretchStartingKeyframe=!0,this.disabledNodes.has(Ys.element)||rB.push(Ys)}),ur.timelines=rB,r.append(xi,ur.timelines),u.push({instruction:ur,player:fn,element:xi}),ur.queriedElements.forEach(Ys=>Qo(d,Ys,[]).push(fn)),ur.preStyleProps.forEach((Ys,$g)=>{const cf=Object.keys(Ys);if(cf.length){let Gg=_.get($g);Gg||_.set($g,Gg=new Set),cf.forEach(rk=>Gg.add(rk))}}),ur.postStyleProps.forEach((Ys,$g)=>{const cf=Object.keys(Ys);let Gg=b.get($g);Gg||b.set($g,Gg=new Set),cf.forEach(rk=>Gg.add(rk))})});if(zt.length){const ht=[];zt.forEach(Tt=>{ht.push(function X$(n,e){return new f.vHH(3505,tn)}())}),Ft.forEach(Tt=>Tt.destroy()),this.reportError(ht)}const _n=new Map,Zs=new Map;u.forEach(ht=>{const Tt=ht.element;r.has(Tt)&&(Zs.set(Tt,Tt),this._beforeAnimationBuild(ht.player.namespaceId,ht.instruction,_n))}),i.forEach(ht=>{const Tt=ht.element;this._getPreviousPlayers(Tt,!1,ht.namespaceId,ht.triggerName,null).forEach(fn=>{Qo(_n,Tt,[]).push(fn),fn.destroy()})});const Yc=Re.filter(ht=>SL(ht,_,b)),Qc=new Map;DL(Qc,this.driver,ot,b,qc).forEach(ht=>{SL(ht,_,b)&&Yc.push(ht)});const sw=new Map;B.forEach((ht,Tt)=>{DL(sw,this.driver,new Set(ht),_,"!")}),Yc.forEach(ht=>{const Tt=Qc.get(ht),Rt=sw.get(ht);Qc.set(ht,Object.assign(Object.assign({},Tt),Rt))});const Hg=[],tB=[],nB={};u.forEach(ht=>{const{element:Tt,player:Rt,instruction:fn}=ht;if(r.has(Tt)){if(I.has(Tt))return Rt.onDestroy(()=>Mu(Tt,fn.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(fn.totalTime),void i.push(Rt);let xi=nB;if(Zs.size>1){let ta=Tt;const uf=[];for(;ta=ta.parentNode;){const ur=Zs.get(ta);if(ur){xi=ur;break}uf.push(ta)}uf.forEach(ur=>Zs.set(ur,xi))}const Nu=this._buildAnimation(Rt.namespaceId,fn,_n,a,sw,Qc);if(Rt.setRealPlayer(Nu),xi===nB)Hg.push(Rt);else{const ta=this.playersByElement.get(xi);ta&&ta.length&&(Rt.parentPlayer=sf(ta)),i.push(Rt)}}else Og(Tt,fn.fromStyles),Rt.onDestroy(()=>Mu(Tt,fn.toStyles)),tB.push(Rt),I.has(Tt)&&i.push(Rt)}),tB.forEach(ht=>{const Tt=a.get(ht.element);if(Tt&&Tt.length){const Rt=sf(Tt);ht.setRealPlayer(Rt)}}),i.forEach(ht=>{ht.parentPlayer?ht.syncPlayerEvents(ht.parentPlayer):ht.destroy()});for(let ht=0;ht<Re.length;ht++){const Tt=Re[ht],Rt=Tt[Fa];if(iv(Tt,wT),Rt&&Rt.hasAnimation)continue;let fn=[];if(d.size){let Nu=d.get(Tt);Nu&&Nu.length&&fn.push(...Nu);let ta=this.driver.query(Tt,pN,!0);for(let uf=0;uf<ta.length;uf++){let ur=d.get(ta[uf]);ur&&ur.length&&fn.push(...ur)}}const xi=fn.filter(Nu=>!Nu.destroyed);xi.length?XG(this,Tt,xi):this.processLeaveNode(Tt)}return Re.length=0,Hg.forEach(ht=>{this.players.push(ht),ht.onDone(()=>{ht.destroy();const Tt=this.players.indexOf(ht);this.players.splice(Tt,1)}),ht.play()}),Hg}elementContainsData(e,t){let r=!1;const i=t[Fa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const _=!a||a==G0;d.forEach(b=>{b.queued||!_&&b.triggerName!=i||u.push(b)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,I=b!==a,T=Qo(r,b,[]);this._getPreviousPlayers(b,I,u,d,t.toState).forEach(B=>{const j=B.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),B.destroy(),T.push(B)})}Og(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const d=t.triggerName,_=t.element,b=[],I=new Set,T=new Set,k=t.timelines.map(j=>{const re=j.element;I.add(re);const Re=re[Fa];if(Re&&Re.removedBeforeQueried)return new H0(j.duration,j.delay);const at=re!==_,ot=function e3(n){const e=[];return AL(n,e),e}((r.get(re)||WG).map(_n=>_n.getRealPlayer())).filter(_n=>!!_n.element&&_n.element===re),mt=a.get(re),ct=u.get(re),Ft=XF(0,this._normalizer,0,j.keyframes,mt,ct),zt=this._buildPlayer(j,Ft,ot);if(j.subTimeline&&i&&T.add(re),at){const _n=new SN(e,d,re);_n.setRealPlayer(zt),b.push(_n)}return zt});b.forEach(j=>{Qo(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function YG(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),I.forEach(j=>La(j,uL));const B=sf(k);return B.onDestroy(()=>{I.forEach(j=>iv(j,uL)),Mu(_,t.toStyles)}),T.forEach(j=>{Qo(i,j,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new H0(e.duration,e.delay)}}class SN{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new H0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>aN(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function LT(n){return n&&1===n.nodeType}function IL(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function DL(n,e,t,r,i){const a=[];t.forEach(_=>a.push(IL(_)));const u=[];r.forEach((_,b)=>{const I={};_.forEach(T=>{const k=I[T]=e.computeStyle(b,T,i);(!k||0==k.length)&&(b[Fa]=qG,u.push(b))}),n.set(b,I)});let d=0;return t.forEach(_=>IL(_,a[d++])),u}function TL(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(d){if(!d)return 1;let _=a.get(d);if(_)return _;const b=d.parentNode;return _=t.has(b)?b:i.has(b)?1:u(b),a.set(d,_),_}return e.forEach(d=>{const _=u(d);1!==_&&t.get(_).push(d)}),t}function La(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function iv(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function XG(n,e,t){sf(t).onDone(()=>n.processLeaveNode(e))}function AL(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof QF?AL(r.players,e):e.push(r)}}function SL(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class VT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new ZG(e,t,r),this._timelineEngine=new jG(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const _=[],I=yN(this._driver,a,_,[]);if(_.length)throw function H$(n,e){return new f.vHH(3404,tn)}();d=function LG(n,e,t){return new VG(n,e,t)}(i,I,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=eL(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,d]=eL(r);return this._timelineEngine.listen(u,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let r3=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Mu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mu(this._element,this._initialStyles),this._endStyles&&(Mu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Og(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Og(this._element,this._endStyles),this._endStyles=null),Mu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function MN(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];s3(i)&&(e=e||{},e[i]=n[i])}return e}function s3(n){return"display"===n||"position"===n}class ML{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:pL(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class o3{validateStyleProperty(e){return iL(e)}matchesElement(e,t){return!1}containsElement(e,t){return sL(e,t)}getParentElement(e){return dN(e)}query(e,t,r){return oL(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(_.easing=a);const b={},I=u.filter(k=>k instanceof ML);(function uG(n,e){return 0===n||0===e})(r,i)&&I.forEach(k=>{let B=k.currentSnapshot;Object.keys(B).forEach(j=>b[j]=B[j])}),t=function cG(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(d=>{a.hasOwnProperty(d)||u.push(d),a[d]=t[d]}),u.length)for(var i=1;i<e.length;i++){let d=e[i];u.forEach(function(_){d[_]=pL(n,_)})}}return e}(e,t=t.map(k=>of(k,!1)),b);const T=function n3(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=MN(e[0]),e.length>1&&(r=MN(e[e.length-1]))):e&&(t=MN(e)),t||r?new r3(n,t,r):null}(e,t);return new ML(e,t,_,T)}}let a3=(()=>{class n extends KF{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?ZF(t):t;return xL(this._renderer,null,r,"register",[i]),new l3(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class l3 extends class m${}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new u3(this._id,e,t||{},this._renderer)}}class u3{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return xL(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function xL(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const RL="@.disabled";let c3=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const d=null==u?void 0:u.parentNode(a);d&&u.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new NL("",a,this.engine),this._rendererCache.set(a,I)),I}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const _=I=>{Array.isArray(I)?I.forEach(_):this.engine.registerTrigger(u,d,t,I.name,I)};return r.data.animation.forEach(_),new d3(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,d]=a;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(VT),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class NL{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==RL?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class d3 extends NL{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==RL?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function h3(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function f3(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let p3=(()=>{class n extends VT{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue),f.LFG(hN),f.LFG(CN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const z0=new f.OlP("AnimationModuleType"),kL=[{provide:KF,useClass:a3},{provide:CN,useFactory:function g3(){return new NG}},{provide:VT,useClass:p3},{provide:f.FYo,useFactory:function m3(n,e,t){return new c3(n,e,t)},deps:[Ao,VT,f.R0b]}],OL=[{provide:hN,useFactory:()=>new o3},{provide:z0,useValue:"BrowserAnimations"},...kL],_3=[{provide:hN,useClass:aL},{provide:z0,useValue:"NoopAnimations"},...kL];let y3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?_3:OL}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:OL,imports:[ca]}),n})();const b3=new f.OlP("mat-sanity-checks",{providedIn:"root",factory:function v3(){return!0}});let Fg=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function ZH(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(g$),f.LFG(b3,8),f.LFG(ue))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[FF],FF]}),n})();function E3(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Mg(e)}}}function FL(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function w3(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Mg(e)}}}function C3(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Sr.x,this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}let LL=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class D3{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const VL={enterDuration:225,exitDuration:150},xN=mT({passive:!0}),BL=["mousedown","touchstart"],UL=["mouseup","mouseleave","touchend","touchcancel"];class A3{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=rf(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},VL),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function M3(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,_=t-i.top,b=a.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=d-u+"px",I.style.top=_-u+"px",I.style.height=2*u+"px",I.style.width=2*u+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(I),function S3(n){window.getComputedStyle(n).getPropertyValue("opacity")}(I),I.style.transform="scale(1)";const T=new D3(this,I,r);return T.state=0,this._activeRipples.add(T),r.persistent||(this._mostRecentTransientRipple=T),this._runTimeoutOutsideZone(()=>{const k=T===this._mostRecentTransientRipple;T.state=1,!r.persistent&&(!k||!this._isPointerDown)&&T.fadeOut()},b),T}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},VL),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=rf(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(BL))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(UL),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=$F(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!GF(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,xN)})})}_removeTriggerEvents(){this._triggerElement&&(BL.forEach(e=>{this._triggerElement.removeEventListener(e,this,xN)}),this._pointerUpEventsRegistered&&UL.forEach(e=>{this._triggerElement.removeEventListener(e,this,xN)}))}}const x3=new f.OlP("mat-ripple-global-options");let jL=(()=>{class n{constructor(t,r,i,a,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new A3(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.R0b),f.Y36(xg),f.Y36(x3,8),f.Y36(z0,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&f.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),R3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Fg],Fg]}),n})();var Qi=F(5577),N3=F(1144);const k3=["addListener","removeListener"],O3=["addEventListener","removeEventListener"],P3=["on","off"];function RN(n,e,t,r){if((0,_l.m)(t)&&(r=t,t=void 0),r)return RN(n,e,t).pipe(Gl(r));const[i,a]=function V3(n){return(0,_l.m)(n.addEventListener)&&(0,_l.m)(n.removeEventListener)}(n)?O3.map(u=>d=>n[u](e,d,t)):function F3(n){return(0,_l.m)(n.addListener)&&(0,_l.m)(n.removeListener)}(n)?k3.map(HL(n,e)):function L3(n){return(0,_l.m)(n.on)&&(0,_l.m)(n.off)}(n)?P3.map(HL(n,e)):[];if(!i&&(0,N3.z)(n))return(0,Qi.z)(u=>RN(u,e,t))((0,mi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Fi.y(u=>{const d=(..._)=>u.next(1<_.length?_:_[0]);return i(d),()=>a(d)})}function HL(n,e){return t=>r=>n[t](e,r)}const B3=["connectionContainer"],U3=["inputContainer"],j3=["label"];function H3(n,e){1&n&&(f.ynx(0),f.TgZ(1,"div",14),f._UZ(2,"div",15)(3,"div",16)(4,"div",17),f.qZA(),f.TgZ(5,"div",18),f._UZ(6,"div",15)(7,"div",16)(8,"div",17),f.qZA(),f.BQk())}function $3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",19),f.NdJ("cdkObserveContent",function(){return f.CHM(t),f.oxw().updateOutlineGap()}),f.Hsn(1,1),f.qZA()}if(2&n){const t=f.oxw();f.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function G3(n,e){if(1&n&&(f.ynx(0),f.Hsn(1,2),f.TgZ(2,"span"),f._uU(3),f.qZA(),f.BQk()),2&n){const t=f.oxw(2);f.xp6(3),f.Oqu(t._control.placeholder)}}function z3(n,e){1&n&&f.Hsn(0,3,["*ngSwitchCase","true"])}function W3(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1," *"),f.qZA())}function q3(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"label",20,21),f.NdJ("cdkObserveContent",function(){return f.CHM(t),f.oxw().updateOutlineGap()}),f.YNc(2,G3,4,1,"ng-container",12),f.YNc(3,z3,1,0,"ng-content",12),f.YNc(4,W3,2,0,"span",22),f.qZA()}if(2&n){const t=f.oxw();f.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),f.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),f.uIk("for",t._control.id)("aria-owns",t._control.id),f.xp6(2),f.Q6J("ngSwitchCase",!1),f.xp6(1),f.Q6J("ngSwitchCase",!0),f.xp6(1),f.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function K3(n,e){1&n&&(f.TgZ(0,"div",24),f.Hsn(1,4),f.qZA())}function Z3(n,e){if(1&n&&(f.TgZ(0,"div",25),f._UZ(1,"span",26),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Y3(n,e){if(1&n&&(f.TgZ(0,"div"),f.Hsn(1,5),f.qZA()),2&n){const t=f.oxw();f.Q6J("@transitionMessages",t._subscriptAnimationState)}}function Q3(n,e){if(1&n&&(f.TgZ(0,"div",30),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.Q6J("id",t._hintLabelId),f.xp6(1),f.Oqu(t.hintLabel)}}function J3(n,e){if(1&n&&(f.TgZ(0,"div",27),f.YNc(1,Q3,2,2,"div",28),f.Hsn(2,6),f._UZ(3,"div",29),f.Hsn(4,7),f.qZA()),2&n){const t=f.oxw();f.Q6J("@transitionMessages",t._subscriptAnimationState),f.xp6(1),f.Q6J("ngIf",t.hintLabel)}}const X3=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ez=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],tz=new f.OlP("MatError"),nz={transitionMessages:_$("transitionMessages",[v$("enter",bT({opacity:1,transform:"translateY(0%)"})),b$("void => enter",[bT({opacity:0,transform:"translateY(-5px)"}),y$("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let NN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})();const rz=new f.OlP("MatHint");let kN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["mat-label"]]}),n})(),iz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const sz=new f.OlP("MatPrefix"),oz=new f.OlP("MatSuffix");let $L=0;const lz=FL(class{constructor(n){this._elementRef=n}},"primary"),uz=new f.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),zL=new f.OlP("MatFormField");let cz=(()=>{class n extends lz{constructor(t,r,i,a,u,d,_){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=a,this._platform=u,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Sr.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+$L++,this._labelId="mat-form-field-label-"+$L++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==_,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Mg(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Oh(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(yT(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(yT(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Lo.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Oh(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Oh(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(yT(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,RN(this._label.nativeElement,"transitionend").pipe((0,Dp.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,i=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",a=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const I=r.querySelectorAll(`${i}, ${a}`);for(let T=0;T<I.length;T++)I[T].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,d=0;const _=r.querySelectorAll(i),b=r.querySelectorAll(a);if(this._label&&this._label.nativeElement.children.length){const I=r.getBoundingClientRect();if(0===I.width&&0===I.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const T=this._getStartEnd(I),k=t.children,B=this._getStartEnd(k[0].getBoundingClientRect());let j=0;for(let re=0;re<k.length;re++)j+=k[re].offsetWidth;u=Math.abs(B-T)-5,d=j>0?.75*j+10:0}for(let I=0;I<_.length;I++)_[I].style.width=`${u}px`;for(let I=0;I<b.length;I++)b[I].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.sBO),f.Y36(zH,8),f.Y36(uz,8),f.Y36(xg),f.Y36(f.R0b),f.Y36(z0,8))},n.\u0275cmp=f.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(f.Suo(i,NN,5),f.Suo(i,NN,7),f.Suo(i,kN,5),f.Suo(i,kN,7),f.Suo(i,iz,5),f.Suo(i,tz,5),f.Suo(i,rz,5),f.Suo(i,sz,5),f.Suo(i,oz,5)),2&t){let a;f.iGM(a=f.CRH())&&(r._controlNonStatic=a.first),f.iGM(a=f.CRH())&&(r._controlStatic=a.first),f.iGM(a=f.CRH())&&(r._labelChildNonStatic=a.first),f.iGM(a=f.CRH())&&(r._labelChildStatic=a.first),f.iGM(a=f.CRH())&&(r._placeholderChild=a.first),f.iGM(a=f.CRH())&&(r._errorChildren=a),f.iGM(a=f.CRH())&&(r._hintChildren=a),f.iGM(a=f.CRH())&&(r._prefixChildren=a),f.iGM(a=f.CRH())&&(r._suffixChildren=a)}},viewQuery:function(t,r){if(1&t&&(f.Gf(B3,7),f.Gf(U3,5),f.Gf(j3,5)),2&t){let i;f.iGM(i=f.CRH())&&(r._connectionContainerRef=i.first),f.iGM(i=f.CRH())&&(r._inputContainerRef=i.first),f.iGM(i=f.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&f.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[f._Bn([{provide:zL,useExisting:n}]),f.qOj],ngContentSelectors:ez,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(f.F$t(X3),f.TgZ(0,"div",0)(1,"div",1,2),f.NdJ("click",function(a){return r._control.onContainerClick&&r._control.onContainerClick(a)}),f.YNc(3,H3,9,0,"ng-container",3),f.YNc(4,$3,2,1,"div",4),f.TgZ(5,"div",5,6),f.Hsn(7),f.TgZ(8,"span",7),f.YNc(9,q3,5,16,"label",8),f.qZA()(),f.YNc(10,K3,2,0,"div",9),f.qZA(),f.YNc(11,Z3,2,4,"div",10),f.TgZ(12,"div",11),f.YNc(13,Y3,2,1,"div",12),f.YNc(14,J3,5,2,"div",13),f.qZA()()),2&t&&(f.xp6(3),f.Q6J("ngIf","outline"==r.appearance),f.xp6(1),f.Q6J("ngIf",r._prefixChildren.length),f.xp6(5),f.Q6J("ngIf",r._hasFloatingLabel()),f.xp6(1),f.Q6J("ngIf",r._suffixChildren.length),f.xp6(1),f.Q6J("ngIf","outline"!=r.appearance),f.xp6(1),f.Q6J("ngSwitch",r._getDisplayedMessages()),f.xp6(1),f.Q6J("ngSwitchCase","error"),f.xp6(1),f.Q6J("ngSwitchCase","hint"))},directives:[dr,BH,Pr,ki],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[nz.transitionMessages]},changeDetection:0}),n})(),ON=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Pu,Fg,UH],Fg]}),n})();var Lg=F(515);const WL=mT({passive:!0});let dz=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Lg.E;const r=rf(t),i=this._monitoredElements.get(r);if(i)return i.subject;const a=new Sr.x,u="cdk-text-field-autofilled",d=_=>{"cdk-text-field-autofill-start"!==_.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===_.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>a.next({target:_.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>a.next({target:_.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",d,WL),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:a,unlisten:()=>{r.removeEventListener("animationstart",d,WL)}}),a}stopMonitoring(t){const r=rf(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xg),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const hz=new f.OlP("MAT_INPUT_VALUE_ACCESSOR"),fz=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let pz=0;const gz=C3(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let mz=(()=>{class n extends gz{constructor(t,r,i,a,u,d,_,b,I,T){super(d,a,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=b,this._formField=T,this._uid="mat-input-"+pz++,this.focused=!1,this.stateChanges=new Sr.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(j=>BF().has(j)),this._iOSKeyupListener=j=>{const re=j.target;!re.value&&0===re.selectionStart&&0===re.selectionEnd&&(re.setSelectionRange(1,1),re.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,B=k.nodeName.toLowerCase();this._inputValueAccessor=_||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&I.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===B,this._isTextarea="textarea"===B,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Mg(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,a;return null!==(a=null!==(t=this._required)&&void 0!==t?t:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(_a.required))&&void 0!==a&&a}set required(t){this._required=Mg(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&BF().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Mg(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,r;const i=(null===(r=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===r?void 0:r.call(t))?null:this.placeholder;if(i!==this._previousPlaceholder){const a=this._elementRef.nativeElement;this._previousPlaceholder=i,i?a.setAttribute("placeholder",i):a.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){fz.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(xg),f.Y36(Qr,10),f.Y36(al,8),f.Y36(ll,8),f.Y36(LL),f.Y36(hz,10),f.Y36(dz),f.Y36(f.R0b),f.Y36(zL,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&f.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(f.Ikx("disabled",r.disabled)("required",r.required),f.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),f.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[f._Bn([{provide:NN,useExisting:n}]),f.qOj,f.TTD]}),n})(),_z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[LL],imports:[[qL,ON,Fg],qL,ON]}),n})();const yz=["mat-button",""],vz=["*"],Ez=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],wz=FL(E3(w3(class{constructor(n){this._elementRef=n}})));let Cz=(()=>{class n extends wz{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of Ez)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(p$),f.Y36(z0,8))},n.\u0275cmp=f.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&f.Gf(jL,5),2&t){let i;f.iGM(i=f.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(f.uIk("disabled",r.disabled||null),f.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[f.qOj],attrs:yz,ngContentSelectors:vz,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(f.F$t(),f.TgZ(0,"span",0),f.Hsn(1),f.qZA(),f._UZ(2,"span",1)(3,"span",2)),2&t&&(f.xp6(2),f.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),f.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[jL],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Iz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[R3,Fg],Fg]}),n})();function Dz(n,e){if(1&n&&(f.TgZ(0,"span")(1,"p"),f._uU(2),f.qZA(),f._UZ(3,"br"),f.TgZ(4,"p"),f._uU(5),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.hij(" ",t.DocumentName,""),f.xp6(3),f.Oqu(t.DocumentPrice)}}let Tz=(()=>{class n{constructor(t){this.SetuService=t,this.form=new If({DocumentName:new lc("",_a.required),DocumentPrice:new lc("",_a.required)})}ngOnInit(){this.SetuService.GetDocuments().subscribe(t=>{console.log(t),this.DocumentList=t})}AddDocument(){alert("Hello"),console.log(this.form.value),this.form.valid&&this.SetuService.InsertDocuments(this.form.value)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(OH))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:12,vars:2,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","placeholder","Document Name","formControlName","DocumentName"],["matInput","","placeholder","Document Price","type","number","formControlName","DocumentPrice"],["mat-raised-button","","color","primary","type","submit"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.AddDocument()}),f.TgZ(1,"mat-form-field",1)(2,"mat-label"),f._uU(3,"Document Name"),f.qZA(),f._UZ(4,"input",2),f.qZA(),f.TgZ(5,"mat-form-field",1)(6,"mat-label"),f._uU(7,"Document Price"),f.qZA(),f._UZ(8,"input",3),f.qZA(),f.TgZ(9,"button",4),f._uU(10,"Add"),f.qZA()(),f.YNc(11,Dz,6,2,"span",5)),2&t&&(f.Q6J("formGroup",r.form),f.xp6(11),f.Q6J("ngForOf",r.DocumentList))},directives:[Af,nl,ll,cz,kN,mz,xs,Vr,eu,Sf,Cz,ir],styles:[""]}),n})();var Az=F(9672);function KL(n,e,t){n?(0,Az.f)(t,n,e):e()}function UT(n,e){const t=(0,_l.m)(n)?n:()=>n,r=i=>i.error(t());return new Fi.y(e?i=>e.schedule(r,0,i):r)}function ZL(n){return new Fi.y(e=>{(0,mi.Xf)(n()).subscribe(e)})}var YL=F(727);function QL(){return(0,lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Lt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class xz extends Fi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new YL.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Lt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=YL.w0.EMPTY)}return e}refCount(){return QL()(this)}}function af(n){return(0,lr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Lt.x)(t,void 0,void 0,u=>{a=(0,mi.Xf)(n(u,af(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function q0(n,e){return(0,_l.m)(e)?(0,Qi.z)(n,e,1):(0,Qi.z)(n,1)}function PN(n){return n<=0?()=>Lg.E:(0,lr.e)((e,t)=>{let r=[];e.subscribe((0,Lt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Xo=F(8505);class Kc{constructor(e,t){this.id=e,this.url=t}}class FN extends Kc{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class K0 extends Kc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class JL extends Kc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kz extends Kc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Oz extends Kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pz extends Kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fz extends Kc{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lz extends Kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vz extends Kc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XL{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eV{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bz{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uz{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jz{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hz{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tV{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class $z{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sv(n){return new $z(n)}const nV="ngNavigationCancelingError";function LN(n){const e=Error("NavigationCancelingError: "+n);return e[nV]=!0,e}function zz(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],d=n[a];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!rV(n[i],e[i]))return!1;return!0}function rV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function iV(n){return Array.prototype.concat.apply([],n)}function sV(n){return n.length>0?n[n.length-1]:null}function Ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ru(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,An.D)(Promise.resolve(n)):nt(n)}const Kz={exact:function lV(n,e,t){if(!Bg(n.segments,e.segments)||!jT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!lV(n.children[r],e.children[r],t))return!1;return!0},subset:uV},oV={exact:function Zz(n,e){return xu(n,e)},subset:function Yz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rV(n[t],e[t]))},ignored:()=>!0};function aV(n,e,t){return Kz[t.paths](n.root,e.root,t.matrixParams)&&oV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uV(n,e,t){return cV(n,e,e.segments,t)}function cV(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Bg(i,t)||e.hasChildren()||!jT(i,t,r))}if(n.segments.length===t.length){if(!Bg(n.segments,t)||!jT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!uV(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Bg(n.segments,i)&&jT(n.segments,i,r)&&n.children[Jt])&&cV(n.children[Jt],e,a,r)}}function jT(n,e,t){return e.every((r,i)=>oV[t](n[i].parameters,r.parameters))}class Vg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sv(this.queryParams)),this._queryParamMap}toString(){return Xz.serialize(this)}}class nn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ji(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return HT(this)}}class Z0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sv(this.parameters)),this._parameterMap}toString(){return gV(this)}}function Bg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class dV{}class hV{parse(e){const t=new lW(e);return new Vg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Y0(e.root,!0)}`,r=function nW(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$T(t)}=${$T(i)}`).join("&"):`${$T(t)}=${$T(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function eW(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Xz=new hV;function HT(n){return n.segments.map(e=>gV(e)).join("/")}function Y0(n,e){if(!n.hasChildren())return HT(n);if(e){const t=n.children[Jt]?Y0(n.children[Jt],!1):"",r=[];return Ji(n.children,(i,a)=>{a!==Jt&&r.push(`${a}:${Y0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Jz(n,e){let t=[];return Ji(n.children,(r,i)=>{i===Jt&&(t=t.concat(e(r,i)))}),Ji(n.children,(r,i)=>{i!==Jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Jt?[Y0(n.children[Jt],!1)]:[`${i}:${Y0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${HT(n)}/${t[0]}`:`${HT(n)}/(${t.join("//")})`}}function fV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $T(n){return fV(n).replace(/%3B/gi,";")}function VN(n){return fV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function GT(n){return decodeURIComponent(n)}function pV(n){return GT(n.replace(/\+/g,"%20"))}function gV(n){return`${VN(n.path)}${function tW(n){return Object.keys(n).map(e=>`;${VN(e)}=${VN(n[e])}`).join("")}(n.parameters)}`}const rW=/^[^\/()?;=#]+/;function zT(n){const e=n.match(rW);return e?e[0]:""}const iW=/^[^=?&#]+/,oW=/^[^&#]+/;class lW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new nn(e,t)),r}parseSegment(){const e=zT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Z0(GT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zT(this.remaining);i&&(r=i,this.capture(r))}e[GT(t)]=GT(r)}parseQueryParam(e){const t=function sW(n){const e=n.match(iW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function aW(n){const e=n.match(oW);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=pV(t),a=pV(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Jt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Jt]:new nn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class mV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=BN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=BN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=UN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return UN(e,this._root).map(t=>t.value)}}function BN(n,e){if(n===e.value)return e;for(const t of e.children){const r=BN(n,t);if(r)return r}return null}function UN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=UN(n,t);if(r.length)return r.unshift(e),r}return[]}class Zc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ov(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _V extends mV{constructor(e,t){super(e),this.snapshot=t,jN(this,e)}toString(){return this.snapshot.toString()}}function yV(n,e){const t=function uW(n,e){const u=new WT([],{},{},"",{},Jt,e,null,n.root,-1,{});return new bV("",new Zc(u,[]))}(n,e),r=new Pa([new Z0("",{})]),i=new Pa({}),a=new Pa({}),u=new Pa({}),d=new Pa(""),_=new av(r,i,u,d,a,Jt,e,t.root);return _.snapshot=t.root,new _V(new Zc(_,[]),t)}class av{constructor(e,t,r,i,a,u,d,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>sv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>sv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vV(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function cW(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class WT{constructor(e,t,r,i,a,u,d,_,b,I,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=I,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bV extends mV{constructor(e,t){super(t),this.url=e,jN(this,t)}toString(){return EV(this._root)}}function jN(n,e){e.value._routerState=n,e.children.forEach(t=>jN(n,t))}function EV(n){const e=n.children.length>0?` { ${n.children.map(EV).join(", ")} } `:"";return`${n.value}${e}`}function HN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xu(e.params,t.params)||n.params.next(t.params),function Wz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $N(n,e){const t=xu(n.params,e.params)&&function Qz(n,e){return Bg(n,e)&&n.every((t,r)=>xu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$N(n.parent,e.parent))}function Q0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function hW(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Q0(n,r,i);return Q0(n,r)})}(n,e,t);return new Zc(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Q0(n,d)),u}}const r=function fW(n){return new av(new Pa(n.url),new Pa(n.params),new Pa(n.queryParams),new Pa(n.fragment),new Pa(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Q0(n,a));return new Zc(r,i)}}function qT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function J0(n){return"object"==typeof n&&null!=n&&n.outlets}function GN(n,e,t,r,i){let a={};if(r&&Ji(r,(d,_)=>{a[_]=Array.isArray(d)?d.map(b=>`${b}`):`${d}`}),n===e)return new Vg(t,a,i);const u=wV(n,e,t);return new Vg(u,a,i)}function wV(n,e,t){const r={};return Ji(n.children,(i,a)=>{r[a]=i===e?t:wV(i,e,t)}),new nn(n.segments,r)}class CV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&qT(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(J0);if(i&&i!==sV(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zN{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function IV(n,e,t){if(n||(n=new nn([],{})),0===n.segments.length&&n.hasChildren())return KT(n,e,t);const r=function vW(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],d=t[r];if(J0(d))break;const _=`${d}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!TV(_,b,u))return a;r+=2}else{if(!TV(_,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new nn(n.segments.slice(0,r.pathIndex),{});return a.children[Jt]=new nn(n.segments.slice(r.pathIndex),n.children),KT(a,0,i)}return r.match&&0===i.length?new nn(n.segments,{}):r.match&&!n.hasChildren()?WN(n,e,t):r.match?KT(n,0,i):WN(n,e,t)}function KT(n,e,t){if(0===t.length)return new nn(n.segments,{});{const r=function yW(n){return J0(n[0])?n[0].outlets:{[Jt]:n}}(t),i={};return Ji(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=IV(n.children[u],e,a))}),Ji(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new nn(n.segments,i)}}function WN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(J0(a)){const _=bW(a.outlets);return new nn(r,_)}if(0===i&&qT(t[0])){r.push(new Z0(n.segments[e].path,DV(t[0]))),i++;continue}const u=J0(a)?a.outlets[Jt]:`${a}`,d=i<t.length-1?t[i+1]:null;u&&d&&qT(d)?(r.push(new Z0(u,DV(d))),i+=2):(r.push(new Z0(u,{})),i++)}return new nn(r,{})}function bW(n){const e={};return Ji(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=WN(new nn([],{}),0,t))}),e}function DV(n){const e={};return Ji(n,(t,r)=>e[r]=`${t}`),e}function TV(n,e,t){return n==t.path&&xu(e,t.parameters)}class wW{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),HN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ov(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Ji(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ov(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ov(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ov(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Hz(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Uz(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(HN(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),HN(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=function CW(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=d?d.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=_,u.outlet&&u.outlet.activateWith(i,_),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class qN{constructor(e,t){this.routes=e,this.module=t}}function lf(n){return"function"==typeof n}function Ug(n){return n instanceof Vg}const X0=Symbol("INITIAL_VALUE");function ew(){return Br(n=>function Sz(...n){const e=(0,Lr.yG)(n),t=(0,Lr.jO)(n),{args:r,keys:i}=fa(n);if(0===r.length)return(0,An.D)([],e);const a=new Fi.y(function Mz(n,e,t=Ca.y){return r=>{KL(e,()=>{const{length:i}=n,a=new Array(i);let u=i,d=i;for(let _=0;_<i;_++)KL(e,()=>{const b=(0,An.D)(n[_],e);let I=!1;b.subscribe((0,Lt.x)(r,T=>{a[_]=T,I||(I=!0,d--),d||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Zu(i,u):Ca.y));return t?a.pipe(Gl(t)):a}(n.map(e=>e.pipe((0,Dp.q)(1),Oh(X0)))).pipe(Os((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==X0?i:(a===X0&&(r=!0),r||!1!==a&&u!==t.length-1&&!Ug(a)?i:a),e)},X0),Ra(e=>e!==X0),(0,vt.U)(e=>Ug(e)?e:!0===e),(0,Dp.q)(1)))}class MW{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tw,this.attachRef=null}}class tw{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new MW,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let KN=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=a||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,_=new xW(t,d,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(tw),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class xW{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===av?this.route:e===tw?this.childContexts:this.parent.get(e,t)}}let AV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[KN],encapsulation:2}),n})();function SV(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];RW(r,NW(e,r))}}function RW(n,e){n.children&&SV(n.children,e)}function NW(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ZN(n){const e=n.children&&n.children.map(ZN),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=AV),t}function Va(n){return n.outlet||Jt}function MV(n,e){const t=n.filter(r=>Va(r)===e);return t.push(...n.filter(r=>Va(r)!==e)),t}const xV={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},xV):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||zz)(t,n,e);if(!a)return Object.assign({},xV);const u={};Ji(a.posParams,(_,b)=>{u[b]=_.path});const d=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function YT(n,e,t,r,i="corrected"){if(t.length>0&&function PW(n,e,t){return t.some(r=>QT(n,e,r)&&Va(r)!==Jt)}(n,t,r)){const u=new nn(e,function OW(n,e,t,r){const i={};i[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Va(a)!==Jt){const u=new nn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Va(a)]=u}return i}(n,e,r,new nn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function FW(n,e,t){return t.some(r=>QT(n,e,r))}(n,t,r)){const u=new nn(n.segments,function kW(n,e,t,r,i,a){const u={};for(const d of r)if(QT(n,t,d)&&!i[Va(d)]){const _=new nn([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[Va(d)]=_}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new nn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function QT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function RV(n,e,t,r){return!!(Va(n)===r||r!==Jt&&QT(e,t,n))&&("**"===n.path||ZT(e,n,t).matched)}function NV(n,e,t){return 0===e.length&&!n.children[t]}class JT{constructor(e){this.segmentGroup=e||null}}class kV{constructor(e){this.urlTree=e}}function nw(n){return UT(new JT(n))}function OV(n){return UT(new kV(n))}function LW(n){return UT(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class UW{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=YT(this.urlTree.root,[],[],this.config).segmentGroup,t=new nn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Jt).pipe((0,vt.U)(a=>this.createUrlTree(YN(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(af(a=>{if(a instanceof kV)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof JT?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Jt).pipe((0,vt.U)(i=>this.createUrlTree(YN(i),e.queryParams,e.fragment))).pipe(af(i=>{throw i instanceof JT?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new nn([],{[Jt]:e}):e;return new Vg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(a=>new nn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,An.D)(i).pipe(q0(a=>{const u=r.children[a],d=MV(t,a);return this.expandSegmentGroup(e,d,u,a).pipe((0,vt.U)(_=>({segment:_,outlet:a})))}),Os((a,u)=>(a[u.outlet]=u.segment,a),{}),function Rz(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ra((i,a)=>n(i,a,r)):Ca.y,PN(1),t?_I(e):yI(()=>new Ip))}())}expandSegment(e,t,r,i,a,u){return(0,An.D)(r).pipe(q0(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,u).pipe(af(b=>{if(b instanceof JT)return nt(null);throw b}))),Dh(d=>!!d),af((d,_)=>{if(d instanceof Ip||"EmptyError"===d.name)return NV(t,i,a)?nt(new nn([],{})):nw(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,u,d){return RV(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):nw(t):nw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?OV(a):this.lineralizeSegments(r,a).pipe((0,Qi.z)(u=>{const d=new nn(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:d,consumedSegments:_,remainingSegments:b,positionalParamSegments:I}=ZT(t,i,a);if(!d)return nw(t);const T=this.applyRedirectCommands(_,i.redirectTo,I);return i.redirectTo.startsWith("/")?OV(T):this.lineralizeSegments(i,T).pipe((0,Qi.z)(k=>this.expandSegment(e,t,r,k.concat(b),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?nt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,vt.U)(T=>(r._loadedConfig=T,new nn(i,{})))):nt(new nn(i,{}));const{matched:u,consumedSegments:d,remainingSegments:_}=ZT(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Qi.z)(I=>{const T=I.module,k=I.routes,{segmentGroup:B,slicedSegments:j}=YT(t,d,_,k),re=new nn(B.segments,B.children);if(0===j.length&&re.hasChildren())return this.expandChildren(T,k,re).pipe((0,vt.U)(mt=>new nn(d,mt)));if(0===k.length&&0===j.length)return nt(new nn(d,{}));const Re=Va(r)===a;return this.expandSegment(T,re,k,j,Re?Jt:a,!0).pipe((0,vt.U)(ot=>new nn(d.concat(ot.segments),ot.children)))})):nw(t)}getChildConfig(e,t,r){return t.children?nt(new qN(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Qi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,vt.U)(a=>(t._loadedConfig=a,a))):function VW(n){return UT(LN(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):nt(new qN([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return nt(!0);const a=i.map(u=>{const d=e.get(u);let _;if(function DW(n){return n&&lf(n.canLoad)}(d))_=d.canLoad(t,r);else{if(!lf(d))throw new Error("Invalid CanLoad guard");_=d(t,r)}return Ru(_)});return nt(a).pipe(ew(),(0,Xo.b)(u=>{if(!Ug(u))return;const d=LN(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw d.url=u,d}),(0,vt.U)(u=>!0===u))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return nt(r);if(i.numberOfChildren>1||!i.children[Jt])return LW(e.redirectTo);i=i.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Vg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ji(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Ji(t.children,(d,_)=>{u[_]=this.createSegmentGroup(e,d,r,i)}),new nn(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function YN(n){const e={};for(const r of Object.keys(n.children)){const a=YN(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function jW(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new nn(n.segments.concat(e.segments),e.children)}return n}(new nn(n.segments,e))}class PV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class XT{constructor(e,t){this.component=e,this.route=t}}function $W(n,e,t){const r=n._root;return rw(r,e?e._root:null,t,[r.value])}function eA(n,e,t){const r=function zW(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function rw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ov(e);return n.children.forEach(u=>{(function WW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const _=function qW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Bg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bg(n.url,e.url)||!xu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$N(n,e)||!xu(n.queryParams,e.queryParams);default:return!$N(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new PV(r)):(a.data=u.data,a._resolvedData=u._resolvedData),rw(n,e,a.component?d?d.children:null:t,r,i),_&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new XT(d.outlet.component,u))}else u&&iw(e,d,i),i.canActivateChecks.push(new PV(r)),rw(n,null,a.component?d?d.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Ji(a,(u,d)=>iw(u,t.getContext(d),i)),i}function iw(n,e,t){const r=ov(n),i=n.value;Ji(r,(a,u)=>{iw(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new XT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class nq{}function FV(n){return new Fi.y(e=>e.error(n))}class iq{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=YT(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Jt);if(null===t)return null;const r=new WT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Zc(r,t),a=new bV(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=vV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],d=MV(e,a),_=this.processSegmentGroup(d,u,a);if(null===_)return null;r.push(..._)}const i=LV(r);return function sq(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return NV(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!RV(e,t,r,i))return null;let a,u=[],d=[];if("**"===e.path){const B=r.length>0?sV(r).parameters:{};a=new WT(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UV(e),Va(e),e.component,e,VV(t),BV(t)+r.length,jV(e))}else{const B=ZT(t,e,r);if(!B.matched)return null;u=B.consumedSegments,d=B.remainingSegments,a=new WT(u,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UV(e),Va(e),e.component,e,VV(t),BV(t)+u.length,jV(e))}const _=function oq(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:I}=YT(t,u,d,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===I.length&&b.hasChildren()){const B=this.processChildren(_,b);return null===B?null:[new Zc(a,B)]}if(0===_.length&&0===I.length)return[new Zc(a,[])];const T=Va(e)===i,k=this.processSegment(_,b,I,T?Jt:i);return null===k?null:[new Zc(a,k)]}}function aq(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function LV(n){const e=[],t=new Set;for(const r of n){if(!aq(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=LV(r.children);e.push(new Zc(r.value,i))}return e.filter(r=>!t.has(r))}function VV(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function BV(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function UV(n){return n.data||{}}function jV(n){return n.resolve||{}}function HV(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function QN(n){return Br(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,vt.U)(()=>e)):nt(e)})}class gq extends class pq{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const JN=new f.OlP("ROUTES");class $V{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,vt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new qN(iV(u.injector.get(JN,void 0,f.XFs.Self|f.XFs.Optional)).map(ZN),u)}),af(a=>{throw t._loader$=void 0,a}));return t._loader$=new xz(i,()=>new Sr.x).pipe(QL()),t._loader$}loadModuleFactory(e){return Ru(e()).pipe((0,Qi.z)(t=>t instanceof f.YKP?nt(t):(0,An.D)(this.compiler.compileModuleAsync(t))))}}class _q{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function yq(n){throw n}function vq(n,e,t){return e.parse("/")}function GV(n,e){return nt(null)}const bq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ea=(()=>{class n{constructor(t,r,i,a,u,d,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Sr.x,this.errorHandler=yq,this.malformedUriErrorHandler=vq,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:GV,afterPreactivation:GV},this.urlHandlingStrategy=new _q,this.routeReuseStrategy=new gq,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(f.h0i),this.console=u.get(f.c2e);const T=u.get(f.R0b);this.isNgZoneEnabled=T instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function qz(){return new Vg(new nn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $V(u,d,k=>this.triggerEvent(new XL(k)),k=>this.triggerEvent(new eV(k))),this.routerState=yV(this.currentUrlTree,this.rootComponentType),this.transitions=new Pa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ra(i=>0!==i.id),(0,vt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Br(i=>{let a=!1,u=!1;return nt(i).pipe((0,Xo.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Br(d=>{const _=this.browserUrlTree.toString(),b=!this.navigated||d.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return zV(d.source)&&(this.browserUrlTree=d.extractedUrl),nt(d).pipe(Br(T=>{const k=this.transitions.getValue();return r.next(new FN(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),k!==this.transitions.getValue()?Lg.E:Promise.resolve(T)}),function HW(n,e,t,r){return Br(i=>function BW(n,e,t,r,i){return new UW(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xo.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function lq(n,e,t,r,i){return(0,Qi.z)(a=>function rq(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new iq(n,e,t,r,i,a).recognize();return null===u?FV(new nq):nt(u)}catch(u){return FV(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,vt.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xo.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(B,T)}this.browserUrlTree=T.urlAfterRedirects}const k=new Oz(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(k)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:B,source:j,restoredState:re,extras:Re}=d,at=new FN(k,this.serializeUrl(B),j,re);r.next(at);const ot=yV(B,this.rootComponentType).snapshot;return nt(Object.assign(Object.assign({},d),{targetSnapshot:ot,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Lg.E}),QN(d=>{const{targetSnapshot:_,id:b,extractedUrl:I,rawUrl:T,extras:{skipLocationChange:k,replaceUrl:B}}=d;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:I,rawUrlTree:T,skipLocationChange:!!k,replaceUrl:!!B})}),(0,Xo.b)(d=>{const _=new Pz(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(_)}),(0,vt.U)(d=>Object.assign(Object.assign({},d),{guards:$W(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function KW(n,e){return(0,Qi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function ZW(n,e,t,r){return(0,An.D)(n).pipe((0,Qi.z)(i=>function tq(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?nt(a.map(d=>{const _=eA(d,e,i);let b;if(function SW(n){return n&&lf(n.canDeactivate)}(_))b=Ru(_.canDeactivate(n,e,t,r));else{if(!lf(_))throw new Error("Invalid CanDeactivate guard");b=Ru(_(n,e,t,r))}return b.pipe(Dh())})).pipe(ew()):nt(!0)}(i.component,i.route,t,e,r)),Dh(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Qi.z)(d=>d&&function IW(n){return"boolean"==typeof n}(d)?function YW(n,e,t,r){return(0,An.D)(e).pipe(q0(i=>mE(function JW(n,e){return null!==n&&e&&e(new Bz(n)),nt(!0)}(i.route.parent,r),function QW(n,e){return null!==n&&e&&e(new jz(n)),nt(!0)}(i.route,r),function eq(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function GW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>ZL(()=>nt(u.guards.map(_=>{const b=eA(_,u.node,t);let I;if(function AW(n){return n&&lf(n.canActivateChild)}(b))I=Ru(b.canActivateChild(r,n));else{if(!lf(b))throw new Error("Invalid CanActivateChild guard");I=Ru(b(r,n))}return I.pipe(Dh())})).pipe(ew())));return nt(a).pipe(ew())}(n,i.path,t),function XW(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const i=r.map(a=>ZL(()=>{const u=eA(a,e,t);let d;if(function TW(n){return n&&lf(n.canActivate)}(u))d=Ru(u.canActivate(e,n));else{if(!lf(u))throw new Error("Invalid CanActivate guard");d=Ru(u(e,n))}return d.pipe(Dh())}));return nt(i).pipe(ew())}(n,i.route,t))),Dh(i=>!0!==i,!0))}(r,a,n,e):nt(d)),(0,vt.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Xo.b)(d=>{if(Ug(d.guardsResult)){const b=LN(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw b.url=d.guardsResult,b}const _=new Fz(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(_)}),Ra(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),QN(d=>{if(d.guards.canActivateChecks.length)return nt(d).pipe((0,Xo.b)(_=>{const b=new Lz(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),Br(_=>{let b=!1;return nt(_).pipe(function uq(n,e){return(0,Qi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return nt(t);let a=0;return(0,An.D)(i).pipe(q0(u=>function cq(n,e,t,r){return function dq(n,e,t,r){const i=HV(n);if(0===i.length)return nt({});const a={};return(0,An.D)(i).pipe((0,Qi.z)(u=>function hq(n,e,t,r){const i=eA(n,e,r);return Ru(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Xo.b)(d=>{a[u]=d}))),PN(1),(0,Qi.z)(()=>HV(a).length===i.length?nt(a):Lg.E))}(n._resolve,n,e,r).pipe((0,vt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),vV(n,t).resolve),null)))}(u.route,r,n,e)),(0,Xo.b)(()=>a++),PN(1),(0,Qi.z)(u=>a===i.length?nt(t):Lg.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xo.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Xo.b)(_=>{const b=new Vz(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),QN(d=>{const{targetSnapshot:_,id:b,extractedUrl:I,rawUrl:T,extras:{skipLocationChange:k,replaceUrl:B}}=d;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:I,rawUrlTree:T,skipLocationChange:!!k,replaceUrl:!!B})}),(0,vt.U)(d=>{const _=function dW(n,e,t){const r=Q0(n,e._root,t?t._root:void 0);return new _V(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:_})}),(0,Xo.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new wW(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Xo.b)({next(){a=!0},complete(){a=!0}}),function Nz(n){return(0,lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),af(d=>{if(u=!0,function Gz(n){return n&&n[nV]}(d)){const _=Ug(d.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new JL(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(b),_?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zV(i.source)};this.scheduleNavigation(I,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new kz(i.id,this.serializeUrl(i.extractedUrl),d);r.next(_);try{i.resolve(this.errorHandler(d))}catch(b){i.reject(b)}}return Lg.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const _=Object.assign({},u);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){SV(t),this.config=t.map(ZN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:d,preserveFragment:_}=r,b=i||this.routerState.root,I=_?this.currentUrlTree.fragment:u;let T=null;switch(d){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),function pW(n,e,t,r,i){if(0===t.length)return GN(e.root,e.root,e.root,r,i);const a=function gW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new CV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return Ji(a.outlets,(_,b)=>{d[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((d,_)=>{0==_&&"."===d||(0==_&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new CV(t,e,r)}(t);if(a.toRoot())return GN(e.root,e.root,new nn([],{}),r,i);const u=function mW(n,e,t){if(n.isAbsolute)return new zN(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new zN(a,a===e.root,0)}const r=qT(n.commands[0])?0:1;return function _W(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new zN(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=u.processChildren?KT(u.segmentGroup,u.index,a.commands):IV(u.segmentGroup,u.index,a.commands);return GN(e.root,u.segmentGroup,d,r,i)}(b,this.currentUrlTree,t,T,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ug(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function wq(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},bq):!1===r?Object.assign({},Eq):r,Ug(t))return aV(this.currentUrlTree,t,i);const a=this.parseUrl(t);return aV(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new K0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var d,_;if(this.disposed)return Promise.resolve(!1);let b,I,T;u?(b=u.resolve,I=u.reject,T=u.promise):T=new Promise((j,re)=>{b=j,I=re});const k=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:k,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:b,reject:I,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new JL(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function zV(n){return"imperative"!==n}class WV{}class qV{preload(e,t){return nt(null)}}let KV=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new $V(i,r,_=>t.triggerEvent(new XL(_)),_=>t.triggerEvent(new eV(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ra(t=>t instanceof K0),q0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,An.D)(i).pipe((0,vl.J)(),(0,vt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?nt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Qi.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ea),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(WV))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),tk=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof FN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof K0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new tV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const jg=new f.OlP("ROUTER_CONFIGURATION"),ZV=new f.OlP("ROUTER_FORROOT_GUARD"),Tq=[Ie,{provide:dV,useClass:hV},{provide:ea,useFactory:function Rq(n,e,t,r,i,a,u={},d,_){const b=new ea(null,n,e,t,r,i,iV(a));return d&&(b.urlHandlingStrategy=d),_&&(b.routeReuseStrategy=_),function Nq(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,b),u.enableTracing&&b.events.subscribe(I=>{var T,k;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(k=console.groupEnd)||void 0===k||k.call(console)}),b},deps:[dV,tw,Ie,f.zs3,f.Sil,JN,jg,[class mq{},new f.FiY],[class fq{},new f.FiY]]},tw,{provide:av,useFactory:function kq(n){return n.routerState.root},deps:[ea]},KV,qV,class Dq{preload(e,t){return t().pipe(af(()=>nt(null)))}},{provide:jg,useValue:{enableTracing:!1}}];function Aq(){return new f.PXZ("Router",ea)}let YV=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Tq,QV(t),{provide:ZV,useFactory:xq,deps:[[ea,new f.FiY,new f.tp0]]},{provide:jg,useValue:r||{}},{provide:me,useFactory:Mq,deps:[de,[new f.tBr(We),new f.FiY],jg]},{provide:tk,useFactory:Sq,deps:[ea,Lu,jg]},{provide:WV,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:qV},{provide:f.PXZ,multi:!0,useFactory:Aq},[nk,{provide:f.ip1,multi:!0,useFactory:Oq,deps:[nk]},{provide:JV,useFactory:Pq,deps:[nk]},{provide:f.tb,multi:!0,useExisting:JV}]]}}static forChild(t){return{ngModule:n,providers:[QV(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ZV,8),f.LFG(ea,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Sq(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new tk(n,e,t)}function Mq(n,e,t={}){return t.useHash?new Se(n,e):new Ye(n,e)}function xq(n){return"guarded"}function QV(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:JN,multi:!0,useValue:n}]}let nk=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Sr.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(ea),u=this.injector.get(jg);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?nt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(jg),i=this.injector.get(KV),a=this.injector.get(tk),u=this.injector.get(ea),d=this.injector.get(f.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Oq(n){return n.appInitializer.bind(n)}function Pq(n){return n.bootstrapListener.bind(n)}const JV=new f.OlP("Router Initializer"),Lq=[{path:"",component:Tz}];let Vq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[YV.forRoot(Lq)],YV]}),n})(),Bq=(()=>{class n{constructor(){this.title="AngularDeploymentTesting"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[KN],styles:[""]}),n})();const XV_firebaseConfig={apiKey:"AIzaSyCk9KGj5p6_vcGo-NMzvSw-6Khkam5TZBY",authDomain:"setu-14909.firebaseapp.com",projectId:"setu-14909",storageBucket:"setu-14909.appspot.com",messagingSenderId:"22163583731",appId:"1:22163583731:web:023b11cf1037920c5efd86",measurementId:"G-7DJ0SKREJP"};let Uq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[Bq]}),n.\u0275inj=f.cJS({providers:[],imports:[[ca,Vq,Bn.hO.initializeApp(XV_firebaseConfig),zi,y3,ON,_z,_w,hc,Iz]]}),n})();(0,f.G48)(),Ll().bootstrapModule(Uq).catch(n=>console.error(n))},5867:(Je,we,F)=>{F.d(we,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=F(9681);(0,f.registerVersion)("firebase","9.8.2","app")},127:(Je,we,F)=>{F.d(we,{Z:()=>f.Z});var f=F(3942);f.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,we,F)=>{F.r(we);var f=F(5861),ne=F(3942),L=F(2090),fe=F(9681),oe=F(655),ye=F(1877),ue=F(4859);const Le=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new ye.Yd("@firebase/auth");function Ye(y,...p){We.logLevel<=ye.in.ERROR&&We.error(`Auth (${fe.SDK_VERSION}): ${y}`,...p)}function Se(y,...p){throw $e(y,...p)}function Ie(y,...p){return $e(y,...p)}function De(y,p,m){const E=Object.assign(Object.assign({},je()),{[p]:m});return new L.LL("auth","Firebase",E).create(p,{appName:y.name})}function He(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Se(y,"argument-error"),De(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...p){if("string"!=typeof y){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return me.create(y,...p)}function z(y,p,...m){if(!y)throw $e(p,...m)}function Ce(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Ye(p),new Error(p)}function J(y,p){y||Ce(p)}const ae=new Map;function ie(y){J(y instanceof Function,"Expected a class definition");let p=ae.get(y);return p?(J(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,ae.set(y,p),p)}function Ve(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function pt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class on{constructor(p,m){this.shortDelay=p,this.longDelay=m,J(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kn(y,p){J(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class cn{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rr=new on(3e4,6e4);function Qt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function Ut(y,p,m,E){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(y,p,m,E,M={}){return ui(y,M,(0,f.Z)(function*(){let O={},Q={};E&&("GET"===p?Q=E:O={body:JSON.stringify(E)});const ce=(0,L.xO)(Object.assign({key:y.config.apiKey},Q)).slice(1),Oe=yield y._getAdditionalHeaders();return Oe["Content-Type"]="application/json",y.languageCode&&(Oe["X-Firebase-Locale"]=y.languageCode),cn.fetch()(Qs(y,y.config.apiHost,m,ce),Object.assign({method:p,headers:Oe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ui(y,p,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(y,p,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Xt),p);try{const M=new zr(y),O=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw Ri(y,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const ce=O.ok?Q.errorMessage:Q.error.message,[Oe,et]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw Ri(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Oe)throw Ri(y,"email-already-in-use",Q);if("USER_DISABLED"===Oe)throw Ri(y,"user-disabled",Q);const dt=E[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw De(y,dt,et);Se(y,dt)}}catch(M){if(M instanceof L.ZR)throw M;Se(y,"network-request-failed")}})).apply(this,arguments)}function Nr(y,p,m,E){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(y,p,m,E,M={}){const O=yield Ut(y,p,m,E,M);return"mfaPendingCredential"in O&&Se(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Qs(y,p,m,E){const M=`${p}${m}?${E}`;return y.config.emulator?kn(y.config,M):`${y.config.apiScheme}://${M}`}class zr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),Rr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(y,p,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const M=Ie(y,p,E);return M.customData._tokenResponse=m,M}function ci(){return(ci=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Nn(y,p){return On.apply(this,arguments)}function On(){return(On=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Js(y,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function rr(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function vo(){return(vo=(0,f.Z)(function*(y,p=!1){const m=(0,L.m9)(y),E=yield m.getIdToken(p),M=lt(E);z(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Q=null==O?void 0:O.sign_in_provider;return{claims:M,token:E,authTime:rr(Yt(M.auth_time)),issuedAtTime:rr(Yt(M.iat)),expirationTime:rr(Yt(M.exp)),signInProvider:Q||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(y){return 1e3*Number(y)}function lt(y){const[p,m,E]=y.split(".");if(void 0===p||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,L.tV)(m);return M?JSON.parse(M):(Ye("Failed to decode base64 JWT payload"),null)}catch(M){return Ye("Caught error parsing JWT payload as JSON",M),null}}function vr(y,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof L.ZR&&Wt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Wt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class bo{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class br{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Er(y){return H.apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(y){var p;const m=y.auth,E=yield y.getIdToken(),M=yield vr(y,Js(m,{idToken:E}));z(null==M?void 0:M.users.length,m,"internal-error");const O=M.users[0];y._notifyReloadListener(O);const Q=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?q(O.providerUserInfo):[],ce=Ae(y.providerData,Q),dt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==ce?void 0:ce.length)),gt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ce,metadata:new br(O.createdAt,O.lastLoginAt),isAnonymous:dt};Object.assign(y,gt)})).apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(y){const p=(0,L.m9)(y);yield Er(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ae(y,p){return[...y.filter(E=>!p.some(M=>M.providerId===E.providerId)),...p]}function q(y){return y.map(p=>{var{providerId:m}=p,E=(0,oe._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ke(){return(ke=(0,f.Z)(function*(y,p){const m=yield ui(y,{},(0,f.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:O}=y.config,Q=Qs(y,M,"/v1/token",`key=${O}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",cn.fetch()(Q,{method:"POST",headers:ce,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){z(p.idToken,"internal-error"),z(void 0!==p.idToken,"internal-error"),z(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function wt(y){const p=lt(y);return z(p,"internal-error"),z(void 0!==p.exp,"internal-error"),z(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,f.Z)(function*(){return z(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,f.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Q}=yield function te(y,p){return ke.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(M,O,Number(Q))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:M,expirationTime:O}=m,Q=new Xe;return E&&(z("string"==typeof E,"internal-error",{appName:p}),Q.refreshToken=E),M&&(z("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),O&&(z("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function _t(y,p){z("string"==typeof y||void 0===y,"internal-error",{appName:p})}class At{constructor(p){var{uid:m,auth:E,stsTokenManager:M}=p,O=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new br(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const E=yield vr(m,m.stsTokenManager.getToken(m.auth,p));return z(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function di(y){return vo.apply(this,arguments)}(this,p)}reload(){return function K(y){return Y.apply(this,arguments)}(this)}_assign(p){this!==p&&(z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new At(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,f.Z)(function*(){let M=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield Er(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield vr(p,function bt(y,p){return ci.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,M,O,Q,ce,Oe,et,dt;const gt=null!==(E=m.displayName)&&void 0!==E?E:void 0,mn=null!==(M=m.email)&&void 0!==M?M:void 0,Un=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,gs=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,jf=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,ou=null!==(Oe=m._redirectEventId)&&void 0!==Oe?Oe:void 0,Uo=null!==(et=m.createdAt)&&void 0!==et?et:void 0,fc=null!==(dt=m.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:zn,emailVerified:Hf,isAnonymous:$d,providerData:$f,stsTokenManager:Tm}=m;z(zn&&Tm,p,"internal-error");const Ev=Xe.fromJSON(this.name,Tm);z("string"==typeof zn,p,"internal-error"),_t(gt,p.name),_t(mn,p.name),z("boolean"==typeof Hf,p,"internal-error"),z("boolean"==typeof $d,p,"internal-error"),_t(Un,p.name),_t(gs,p.name),_t(jf,p.name),_t(ou,p.name),_t(Uo,p.name),_t(fc,p.name);const Gd=new At({uid:zn,auth:p,email:mn,emailVerified:Hf,displayName:gt,isAnonymous:$d,photoURL:gs,phoneNumber:Un,tenantId:jf,stsTokenManager:Ev,createdAt:Uo,lastLoginAt:fc});return $f&&Array.isArray($f)&&(Gd.providerData=$f.map(Gf=>Object.assign({},Gf))),ou&&(Gd._redirectEventId=ou),Gd}static _fromIdTokenResponse(p,m,E=!1){return(0,f.Z)(function*(){const M=new Xe;M.updateFromServerResponse(m);const O=new At({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:E});return yield Er(O),O})()}}const Dt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var M=this;return(0,f.Z)(function*(){M.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const M=E.storage[m];return void 0===M?null:M})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function Yn(y,p,m){return`firebase:${y}:${p}:${m}`}class kr{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:M,name:O}=this.auth;this.fullUserKey=Yn(this.userKey,M.apiKey,O),this.fullPersistenceKey=Yn("persistence",M.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?At._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new kr(ie(Dt),p,E);const M=(yield Promise.all(m.map(function(){var et=(0,f.Z)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return et.apply(this,arguments)}}()))).filter(et=>et);let O=M[0]||ie(Dt);const Q=Yn(E,p.config.apiKey,p.name);let ce=null;for(const et of m)try{const dt=yield et._get(Q);if(dt){const gt=At._fromJSON(p,dt);et!==O&&(ce=gt),O=et;break}}catch(dt){}const Oe=M.filter(et=>et._shouldAllowMigration);return O._shouldAllowMigration&&Oe.length?(O=Oe[0],ce&&(yield O._set(Q,ce.toJSON())),yield Promise.all(m.map(function(){var et=(0,f.Z)(function*(dt){if(dt!==O)try{yield dt._remove(Q)}catch(gt){}});return function(dt){return et.apply(this,arguments)}}())),new kr(O,p,E)):new kr(O,p,E)})()}}function Dl(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Qn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ba(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Cs(p))return"Blackberry";if(Jn(p))return"Webos";if(Tl(p))return"Safari";if((p.includes("chrome/")||Ua(p))&&!p.includes("edge/"))return"Chrome";if(Or(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ba(y=(0,L.z$)()){return/firefox\//i.test(y)}function Tl(y=(0,L.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ua(y=(0,L.z$)()){return/crios\//i.test(y)}function Qn(y=(0,L.z$)()){return/iemobile/i.test(y)}function Or(y=(0,L.z$)()){return/android/i.test(y)}function Cs(y=(0,L.z$)()){return/blackberry/i.test(y)}function Jn(y=(0,L.z$)()){return/webos/i.test(y)}function qr(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)}function Xs(y=(0,L.z$)()){return qr(y)||Or(y)||Jn(y)||Cs(y)||/windows phone/i.test(y)||Qn(y)}function na(y,p=[]){let m;switch(y){case"Browser":m=Dl((0,L.z$)());break;case"Worker":m=`${Dl((0,L.z$)())}-${y}`;break;default:m=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${fe.SDK_VERSION}/${E}`}class Kr{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=O=>new Promise((Q,ce)=>{try{Q(p(O))}catch(Oe){ce(Oe)}});E.onAbort=m,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,f.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const M of m.queue)yield M(p),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const O of E)try{O()}catch(Q){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M.message})}})()}}class Ke{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dn(this),this.idTokenSubscription=new dn(this),this.beforeStateQueue=new Kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var M,O;if(!E._deleted&&(E.persistenceManager=yield kr.create(E,p),!E._deleted)){if(null===(M=E._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Q){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var E;const M=yield m.assertedPersistence.getCurrentUser();let O=M,Q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Oe=null==O?void 0:O._redirectEventId,et=yield m.tryRedirectSignIn(p);(!ce||ce===Oe)&&(null==et?void 0:et.user)&&(O=et.user,Q=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(O)}catch(ce){O=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return z(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(M){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){try{yield Er(p)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ze(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const E=p?(0,L.m9)(p):null;return E&&z(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return p&&z(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,f.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&ie(p)||m._popupRedirectResolver;z(E,m,"argument-error"),m.redirectPersistenceManager=yield kr.create(m,[ie(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var E,M;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,M){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,E,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=na(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function ft(y){return(0,L.m9)(y)}class dn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ts(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function ns(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Ni{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ce("not implemented")}_getIdTokenResponse(p){return Ce("not implemented")}_linkToIdToken(p,m){return Ce("not implemented")}_getReauthenticationResolver(p){return Ce("not implemented")}}function Fn(y,p){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:resetPassword",Qt(y,p))})).apply(this,arguments)}function Ha(y,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Al(y,p){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:update",Qt(y,p))})).apply(this,arguments)}function wo(){return(wo=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithPassword",Qt(y,p))})).apply(this,arguments)}function no(y,p){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:sendOobCode",Qt(y,p))})).apply(this,arguments)}function pn(y,p){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,f.Z)(function*(y,p){return no(y,p)})).apply(this,arguments)}function $a(y,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(y,p){return no(y,p)})).apply(this,arguments)}function ki(y,p){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,f.Z)(function*(y,p){return no(y,p)})).apply(this,arguments)}function Xc(y,p){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(y,p){return no(y,p)})).apply(this,arguments)}function ku(){return(ku=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",Qt(y,p))})).apply(this,arguments)}function ed(){return(ed=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithEmailLink",Qt(y,p))})).apply(this,arguments)}class wr extends Ni{constructor(p,m,E,M=null){super("password",E),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new wr(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new wr(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function ir(y,p){return wo.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function is(y,p){return ku.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return Ha(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function zg(y,p){return ed.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ro(y,p){return td.apply(this,arguments)}function td(){return(td=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithIdp",Qt(y,p))})).apply(this,arguments)}class Is extends Ni{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Is(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:M}=m,O=(0,oe._T)(m,["providerId","signInMethod"]);if(!E||!M)return null;const Q=new Is(E,M);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return ro(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,ro(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ro(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,L.xO)(m)}return p}}function qg(y,p){return nd.apply(this,arguments)}function nd(){return(nd=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:sendVerificationCode",Qt(y,p))})).apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Qt(y,p))})).apply(this,arguments)}function rd(){return(rd=(0,f.Z)(function*(y,p){const m=yield Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Qt(y,p));if(m.temporaryProof)throw Ri(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Zg={USER_NOT_FOUND:"user-not-found"};function id(){return(id=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithPhoneNumber",Qt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Zg)})).apply(this,arguments)}class ra extends Ni{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new ra({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new ra({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Ou(y,p){return io.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Kg(y,p){return rd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Yg(y,p){return id.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:O}=p;return E||m||M||O?new ra({verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:O}):null}}class xl{constructor(p){var m,E,M,O,Q,ce;const Oe=(0,L.zd)((0,L.pd)(p)),et=null!==(m=Oe.apiKey)&&void 0!==m?m:null,dt=null!==(E=Oe.oobCode)&&void 0!==E?E:null,gt=function df(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Oe.mode)&&void 0!==M?M:null);z(et&&dt&&gt,"argument-error"),this.apiKey=et,this.operation=gt,this.code=dt,this.continueUrl=null!==(O=Oe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=Oe.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(ce=Oe.tenantId)&&void 0!==ce?ce:null}static parseLink(p){const m=function Ga(y){const p=(0,L.zd)((0,L.pd)(y)).link,m=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||p||y}(p);try{return new xl(m)}catch(E){return null}}}let od=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return wr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const M=xl.parseLink(E);return z(M,"argument-error"),wr._fromEmailAndCode(m,M.code,M.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Cr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Co extends Cr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ss extends Co{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return z("providerId"in m&&"signInMethod"in m,"argument-error"),Is._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return z(p.idToken||p.accessToken,"argument-error"),Is._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ss.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ss.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:O,nonce:Q,providerId:ce}=p;if(!E&&!M&&!m&&!O||!ce)return null;try{return new ss(ce)._credential({idToken:m,accessToken:E,nonce:Q,pendingToken:O})}catch(Oe){return null}}}let ia=(()=>{class y extends Co{constructor(){super("facebook.com")}static credential(m){return Is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ad=(()=>{class y extends Co{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:M}=m;if(!E&&!M)return null;try{return y.credential(E,M)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),hf=(()=>{class y extends Co{constructor(){super("github.com")}static credential(m){return Is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Io extends Ni{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ro(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,ro(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ro(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:M,pendingToken:O}=m;return E&&M&&O&&E===M?new Io(E,O):null}static _create(p,m){return new Io(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fr extends Cr{constructor(p){z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Fr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Fr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Io.fromJSON(p);return z(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Io._create(E,m)}catch(M){return null}}}let ld=(()=>{class y extends Co{constructor(){super("twitter.com")}static credential(m,E){return Is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=m;if(!E||!M)return null;try{return y.credential(E,M)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ir(y,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signUp",Qt(y,p))})).apply(this,arguments)}class fi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,M=!1){return(0,f.Z)(function*(){const O=yield At._fromIdTokenResponse(p,E,M),Q=Fu(E);return new fi({user:O,providerId:Q,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const M=Fu(E);return new fi({user:p,providerId:M,_tokenResponse:E,operationType:m})})()}}function Fu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Lu(){return(Lu=(0,f.Z)(function*(y){var p;const m=ft(y);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new fi({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Ir(m,{returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class aa extends L.ZR{constructor(p,m,E,M){var O;super(m.code,m.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,aa.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,M){return new aa(p,m,E,M)}}function Vu(y,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?aa._fromErrorAndOperation(y,O,p,E):O})}function os(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function gn(){return(gn=(0,f.Z)(function*(y,p){const m=(0,L.m9)(y);yield rn(!0,m,p);const{providerUserInfo:E}=yield Nn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=os(E||[]);return m.providerData=m.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function za(y,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(y,p,m=!1){const E=yield vr(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return fi._forOperation(y,"link",E)})).apply(this,arguments)}function rn(y,p,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,f.Z)(function*(y,p,m){yield Er(p);const M=!1===y?"provider-already-linked":"no-such-provider";z(os(p.providerData).has(m)===y,p.auth,M)})).apply(this,arguments)}function Rl(y,p){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(y,p,m=!1){const{auth:E}=y,M="reauthenticate";try{const O=yield vr(y,Vu(E,M,p,y),m);z(O.idToken,E,"internal-error");const Q=lt(O.idToken);z(Q,E,"internal-error");const{sub:ce}=Q;return z(y.uid===ce,E,"user-mismatch"),fi._forOperation(y,M,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Se(E,"user-mismatch"),O}})).apply(this,arguments)}function hr(y,p){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(y,p,m=!1){const E="signIn",M=yield Vu(y,E,p),O=yield fi._fromIdTokenResponse(y,E,M);return m||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Tn(y,p){return as.apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(y,p){return hr(ft(y),p)})).apply(this,arguments)}function fr(y,p){return To.apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(y,p){const m=(0,L.m9)(y);return yield rn(!1,m,p.providerId),za(m,p)})).apply(this,arguments)}function Ds(y,p){return qa.apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(y,p){return Rl((0,L.m9)(y),p)})).apply(this,arguments)}function Oi(y,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(y,p){return Nr(y,"POST","/v1/accounts:signInWithCustomToken",Qt(y,p))})).apply(this,arguments)}function Et(){return(Et=(0,f.Z)(function*(y,p){const m=ft(y),E=yield Oi(m,{token:p,returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class oo{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Uu._fromServerResponse(p,m):Se(p,"internal-error")}}class Uu extends oo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Uu(m)}}function Ka(y,p,m){var E;z((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),z(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(z(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(z(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Nl(){return(Nl=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y),M={requestType:"PASSWORD_RESET",email:p};m&&Ka(E,M,m),yield $a(E,M)})).apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(y,p,m){yield Fn((0,L.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function xe(){return(xe=(0,f.Z)(function*(y,p){yield Al((0,L.m9)(y),{oobCode:p})})).apply(this,arguments)}function jt(y,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(y,p){const m=(0,L.m9)(y),E=yield Fn(m,{oobCode:p}),M=E.requestType;switch(z(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(E.mfaInfo,m,"internal-error");default:z(E.email,m,"internal-error")}let O=null;return E.mfaInfo&&(O=oo._fromServerResponse(ft(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Ol(){return(Ol=(0,f.Z)(function*(y,p){const{data:m}=yield jt((0,L.m9)(y),p);return m.email})).apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(y,p,m){const E=ft(y),M=yield Ir(E,{returnSecureToken:!0,email:p,password:m}),O=yield fi._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y),M={requestType:"EMAIL_SIGNIN",email:p};z(m.handleCodeInApp,E,"argument-error"),m&&Ka(E,M,m),yield ki(E,M)})).apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y),M=od.credentialWithLink(p,m||Ve());return z(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Tn(E,M)})).apply(this,arguments)}function Dr(y,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:createAuthUri",Qt(y,p))})).apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(y,p){const E={identifier:p,continueUri:pt()?Ve():"http://localhost"},{signinMethods:M}=yield Dr((0,L.m9)(y),E);return M||[]})).apply(this,arguments)}function Wu(){return(Wu=(0,f.Z)(function*(y,p){const m=(0,L.m9)(y),M={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Ka(m.auth,M,p);const{email:O}=yield pn(m.auth,M);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&Ka(E.auth,O,m);const{email:Q}=yield Xc(E.auth,O);Q!==y.email&&(yield y.reload())})).apply(this,arguments)}function qu(y,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(y,p){return Ut(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bl(){return(Bl=(0,f.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,L.m9)(y),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Q=yield vr(E,qu(E.auth,O));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const ce=E.providerData.find(({providerId:Oe})=>"password"===Oe);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Ul(y,p,m){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,f.Z)(function*(y,p,m){const{auth:E}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const Q=yield vr(y,Ha(E,O));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class da{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class pd extends da{constructor(p,m,E,M){super(p,m,E),this.username=M}}class jl extends da{constructor(p,m){super(p,"facebook.com",m)}}class Yr extends pd{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class pf extends da{constructor(p,m){super(p,"google.com",m)}}class Ku extends pd{constructor(p,m,E){super(p,"twitter.com",m,E)}}function sr(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function fd(y){var p,m;if(!y)return null;const{providerId:E}=y,M=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const Q=null===(m=null===(p=lt(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new da(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new jl(O,M);case"github.com":return new Yr(O,M);case"google.com":return new pf(O,M);case"twitter.com":return new Ku(O,M,y.screenName||null);case"custom":case"anonymous":return new da(O,null);default:return new da(O,E,M)}}(m)}class As{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new As("enroll",p)}static _fromMfaPendingCredential(p){return new As("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return As._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return As._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ro{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=ft(p),M=m.customData._serverResponse,O=(M.mfaInfo||[]).map(ce=>oo._fromServerResponse(E,ce));z(M.mfaPendingCredential,E,"internal-error");const Q=As._fromMfaPendingCredential(M.mfaPendingCredential);return new Ro(Q,O,function(){var ce=(0,f.Z)(function*(Oe){const et=yield Oe._process(E,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const dt=Object.assign(Object.assign({},M),{idToken:et.idToken,refreshToken:et.refreshToken});switch(m.operationType){case"signIn":const gt=yield fi._fromIdTokenResponse(E,m.operationType,dt);return yield E._updateCurrentUser(gt.user),gt;case"reauthenticate":return z(m.user,E,"internal-error"),fi._forOperation(m.user,m.operationType,dt);default:Se(E,"internal-error")}});return function(Oe){return ce.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}function md(y,p){return Ut(y,"POST","/v2/accounts/mfaEnrollment:start",Qt(y,p))}class ha{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>oo._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new ha(p)}getSession(){var p=this;return(0,f.Z)(function*(){return As._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var E=this;return(0,f.Z)(function*(){const M=p,O=yield E.getSession(),Q=yield vr(E.user,M._process(E.user.auth,O,m));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){const E="string"==typeof p?p:p.uid,M=yield m.user.getIdToken(),O=yield vr(m.user,function No(y,p){return Ut(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(y,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Q})=>Q!==E),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(Q){if("auth/user-token-expired"!==Q.code)throw Q}})()}}const Hl=new WeakMap,Ss="__sak";class $l{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ss,"1"),this.storage.removeItem(Ss),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ko=(()=>{class y extends $l{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tm(){const y=(0,L.z$)();return Tl(y)||qr(y)}()&&function cr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Xs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),O=this.localCache[E];M!==O&&m(E,O,M)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ce,Oe,et)=>{this.notifyListeners(ce,et)});const M=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!E)return}const O=()=>{const ce=this.storage.getItem(M);!E&&this.localCache[M]===ce||this.notifyListeners(M,ce)},Q=this.storage.getItem(M);!function ja(){return(0,L.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var M=()=>super._set,O=this;return(0,f.Z)(function*(){yield M().call(O,m,E),O.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,M=this;return(0,f.Z)(function*(){const O=yield E().call(M,m);return M.localCache[m]=JSON.stringify(O),O})()}_remove(m){var E=()=>super._remove,M=this;return(0,f.Z)(function*(){yield E().call(M,m),delete M.localCache[m]})()}}return y.type="LOCAL",y})(),us=(()=>{class y extends $l{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let _d=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(O=>O.isListeningto(m));if(E)return E;const M=new y(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const M=m,{eventId:O,eventType:Q,data:ce}=M.data,Oe=E.handlersMap[Q];if(!(null==Oe?void 0:Oe.size))return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const et=Array.from(Oe).map(function(){var gt=(0,f.Z)(function*(mn){return mn(M.origin,ce)});return function(mn){return gt.apply(this,arguments)}}()),dt=yield function fa(y){return Promise.all(y.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(et);M.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:dt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function mi(y="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return y+m}class Lr{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var M=this;return(0,f.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,ce;return new Promise((Oe,et)=>{const dt=mi("",20);O.port1.start();const gt=setTimeout(()=>{et(new Error("unsupported_event"))},E);ce={messageChannel:O,onMessage(mn){const Un=mn;if(Un.data.eventId===dt)switch(Un.data.status){case"ack":clearTimeout(gt),Q=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Oe(Un.data.response);break;default:clearTimeout(gt),clearTimeout(Q),et(new Error("invalid_response"))}}},M.handlers.add(ce),O.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:p,eventId:dt,data:m},[O.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function Lt(){return window}function pa(){return void 0!==Lt().WorkerGlobalScope&&"function"==typeof Lt().importScripts}function Gl(){return(Gl=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Yu="firebaseLocalStorageDb",or="firebaseLocalStorage",ma="fbase_key";class lo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Tr(y,p){return y.transaction([or],p?"readwrite":"readonly").objectStore(or)}function zl(){const y=indexedDB.open(Yu,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(or,{keyPath:ma})}catch(M){m(M)}}),y.addEventListener("success",(0,f.Z)(function*(){const E=y.result;E.objectStoreNames.contains(or)?p(E):(E.close(),yield function Ya(){const y=indexedDB.deleteDatabase(Yu);return new lo(y).toPromise()}(),p(yield zl()))}))})}function xs(y,p,m){return _i.apply(this,arguments)}function _i(){return(_i=(0,f.Z)(function*(y,p,m){const E=Tr(y,!0).put({[ma]:p,value:m});return new lo(E).toPromise()})).apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(y,p){const m=Tr(y,!1).get(p),E=yield new lo(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Vi(y,p){const m=Tr(y,!0).delete(p);return new lo(m).toPromise()}const Oo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield zl()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let M=0;for(;;)try{const O=yield E._openDb();return yield m(O)}catch(O){if(M++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return pa()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=_d._getInstance(function yd(){return pa()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(M,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(M,O){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,M;if(m.activeServiceWorker=yield function ga(){return Gl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Lr(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Zu(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield zl();return yield xs(m,Ss,"1"),yield Vi(m,Ss),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(O=>xs(O,m,E)),M.localCache[m]=E,M.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const M=yield E._withRetries(O=>function Wl(y,p){return Cn.apply(this,arguments)}(O,m));return E.localCache[m]=M,M})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(M=>Vi(M,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(Q=>{const ce=Tr(Q,!1).getAll();return new lo(ce).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Q,value:ce}of E)O.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(ce)&&(m.notifyListeners(Q,ce),M.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!O.has(Q)&&(m.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ja(y,p){return Ut(y,"POST","/v2/accounts/mfaSignIn:start",Qt(y,p))}function Xa(){return(Xa=(0,f.Z)(function*(y){return(yield Ut(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function el(y){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=M=>{const O=Ie("internal-error");O.customData=M,m(O)},E.type="text/javascript",E.charset="UTF-8",function ya(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function yi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const tl=1e12;class ql{constructor(p){this.auth=p,this.counter=tl,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new va(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||tl;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||tl))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(p||tl))||void 0===E||E.execute(),""})()}}class va{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;z(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ju(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xu=yi("rcb"),In=new on(3e4,6e4);class yf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Lt().grecaptcha}load(p,m=""){return z(function vf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Lt().grecaptcha):new Promise((E,M)=>{const O=Lt().setTimeout(()=>{M(Ie(p,"network-request-failed"))},In.get());Lt()[Xu]=()=>{Lt().clearTimeout(O),delete Lt()[Xu];const ce=Lt().grecaptcha;if(!ce)return void M(Ie(p,"internal-error"));const Oe=ce.render;ce.render=(et,dt)=>{const gt=Oe(et,dt);return this.counter++,gt},this.hostLanguage=m,E(ce)},el(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Xu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),M(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Lt().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vd{load(p){return(0,f.Z)(function*(){return new ql(p)})()}clearedOneInstance(){}}const ec="recaptcha",bd={theme:"light",type:"image"};class tc{constructor(p,m=Object.assign({},bd),E){this.parameters=m,this.type=ec,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(E),this.isInvisible="invisible"===this.parameters.size,z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;z(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vd:new yf,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(O=>{const Q=ce=>{!ce||(p.tokenChangeListeners.delete(Q),O(ce))};p.tokenChangeListeners.add(Q),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Lt()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){z(pt()&&!pa(),p.auth,"internal-error"),yield function ba(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Rs(y){return Xa.apply(this,arguments)}(p.auth);z(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class nc{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=ra._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Qr(){return(Qr=(0,f.Z)(function*(y,p,m){const E=ft(y),M=yield Vr(E,p,(0,L.m9)(m));return new nc(M,O=>Tn(E,O))})).apply(this,arguments)}function rc(){return(rc=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y);yield rn(!1,E,"phone");const M=yield Vr(E.auth,p,(0,L.m9)(m));return new nc(M,O=>fr(E,O))})).apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y),M=yield Vr(E.auth,p,(0,L.m9)(m));return new nc(M,O=>Ds(E,O))})).apply(this,arguments)}function Vr(y,p,m){return nl.apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(y,p,m){var E;const M=yield m.verify();try{let O;if(z("string"==typeof M,y,"argument-error"),z(m.type===ec,y,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return z("enroll"===Q.type,y,"internal-error"),(yield md(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{z("signin"===Q.type,y,"internal-error");const ce=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return z(ce,y,"missing-multi-factor-info"),(yield Ja(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield qg(y,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Q}}finally{m._reset()}})).apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(y,p){yield za((0,L.m9)(y),p)})).apply(this,arguments)}let co=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=ft(m)}verifyPhoneNumber(m,E){return Vr(this.auth,m,(0,L.m9)(E))}static credential(m,E){return ra._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:M}=m;return E&&M?ra._fromTokenResponse(E,M):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Bi(y,p){return p?ie(p):(z(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class rl extends Ni{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ro(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ro(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ro(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function bf(y){return hr(y.auth,new rl(y),y.bypassAuthState)}function Ef(y){const{auth:p,user:m}=y;return z(m,p,"internal-error"),Rl(m,new rl(y),y.bypassAuthState)}function im(y){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(y){const{auth:p,user:m}=y;return z(m,p,"internal-error"),za(m,new rl(y),y.bypassAuthState)})).apply(this,arguments)}class Ed{constructor(p,m,E,M,O=!1){this.auth=p,this.resolver=E,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(E,M){p.pendingPromise={resolve:E,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:O,tenantId:Q,error:ce,type:Oe}=p;if(ce)return void m.reject(ce);const et={auth:m.auth,requestUri:E,sessionId:M,tenantId:Q||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Oe)(et))}catch(dt){m.reject(dt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return bf;case"linkViaPopup":case"linkViaRedirect":return im;case"reauthViaPopup":case"reauthViaRedirect":return Ef;default:Se(this.auth,"internal-error")}}resolve(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const il=new on(2e3,1e4);function cs(){return(cs=(0,f.Z)(function*(y,p,m){const E=ft(y);He(y,p,Cr);const M=Bi(E,m);return new Fo(E,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function ic(){return(ic=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y);He(E.auth,p,Cr);const M=Bi(E.auth,m);return new Fo(E.auth,"reauthViaPopup",p,M,E).executeNotNull()})).apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y);He(E.auth,p,Cr);const M=Bi(E.auth,m);return new Fo(E.auth,"linkViaPopup",p,M,E).executeNotNull()})).apply(this,arguments)}let Fo=(()=>{class y extends Ed{constructor(m,E,M,O,Q){super(m,E,O,Q),this.provider=M,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return z(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){J(1===m.filter.length,"Popup operations only handle one event");const E=mi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,M;this.pollId=(null===(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,il.get())};m()}}return y.currentPopupAction=null,y})();const ks=new Map;class sc extends Ed{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=ks.get(m.auth._key());if(!E){try{const O=(yield function oc(y,p){return ds.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(O)}catch(M){E=()=>Promise.reject(M)}ks.set(m.auth._key(),E)}return m.bypassAuthState||ks.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const M=yield E.auth._redirectUserForId(p.eventId);if(M)return E.user=M,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ds(){return(ds=(0,f.Z)(function*(y,p){const m=U(p),E=N(y);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(m));return yield E._remove(m),M})).apply(this,arguments)}function sl(y,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(y,p){return N(y)._set(U(p),"true")})).apply(this,arguments)}function S(y,p){ks.set(y._key(),p)}function N(y){return ie(y._redirectPersistence)}function U(y){return Yn("pendingRedirect",y.config.apiKey,y.name)}function Fe(){return(Fe=(0,f.Z)(function*(y,p,m){const E=ft(y);He(y,p,Cr);const M=Bi(E,m);return yield sl(M,E),M._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y);He(E.auth,p,Cr);const M=Bi(E.auth,m);yield sl(M,E.auth);const O=yield ar(E);return M._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(y,p,m){const E=(0,L.m9)(y);He(E.auth,p,Cr);const M=Bi(E.auth,m);yield rn(!1,E,p.providerId),yield sl(M,E.auth);const O=yield ar(E);return M._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(y,p){return yield ft(y)._initializationPromise,hs(y,p,!1)})).apply(this,arguments)}function hs(y,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,p,m=!1){const E=ft(y),M=Bi(E,p),Q=yield new sc(E,M,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,p)),Q})).apply(this,arguments)}function ar(y){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y){const p=mi(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Cd{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ac(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kl(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Kl(p)){const M=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Id(p))}saveEventToCache(p){this.cachedEventUids.add(Id(p)),this.lastProcessedEventTime=Date.now()}}function Id(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Kl({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Zl(y){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,f.Z)(function*(y,p={}){return Ut(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Cf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yl=/^https?/;function Td(){return(Td=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Zl(y);for(const m of p)try{if(dv(m))return}catch(E){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function dv(y){const p=Ve(),{protocol:m,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===E}if(!Yl.test(m))return!1;if(Cf.test(y))return E===y;const M=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const Ad=new on(3e4,6e4);function lc(){const y=Lt().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Sd=null;function hv(y){return Sd=Sd||function If(y){return new Promise((p,m)=>{var E,M,O;function Q(){lc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{lc(),m(Ie(y,"network-request-failed"))},timeout:Ad.get()})}if(null===(M=null===(E=Lt().gapi)||void 0===E?void 0:E.iframes)||void 0===M?void 0:M.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=Lt().gapi)||void 0===O?void 0:O.load)){const ce=yi("iframefcb");return Lt()[ce]=()=>{gapi.load?Q():m(Ie(y,"network-request-failed"))},el(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Oe=>m(Oe))}Q()}}).catch(p=>{throw Sd=null,p})}(y),Sd}const uc=new on(5e3,15e3),cc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lw(y){const p=y.config;z(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?kn(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:y.name,v:fe.SDK_VERSION},M=aw.get(y.config.apiHost);M&&(E.eid=M);const O=y._getFrameworks();return O.length&&(E.fw=O.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function Jl(){return Jl=(0,f.Z)(function*(y){const p=yield hv(y),m=Lt().gapi;return z(m,y,"internal-error"),p.open({where:document.body,url:lw(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cc,dontclear:!0},E=>new Promise(function(){var M=(0,f.Z)(function*(O,Q){yield E.restyle({setHideOnLeave:!1});const ce=Ie(y,"network-request-failed"),Oe=Lt().setTimeout(()=>{Q(ce)},uc.get());function et(){Lt().clearTimeout(Oe),O(E)}E.ping(et).then(et,()=>{Q(ce)})});return function(O,Q){return M.apply(this,arguments)}}()))}),Jl.apply(this,arguments)}const xd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class am{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function fo(y,p,m,E,M,O){z(y.config.authDomain,y,"auth-domain-config-required"),z(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:fe.SDK_VERSION,eventId:M};if(p instanceof Cr){p.setDefaultLanguage(y.languageCode),Q.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Oe,et]of Object.entries(O||{}))Q[Oe]=et}if(p instanceof Co){const Oe=p.getScopes().filter(et=>""!==et);Oe.length>0&&(Q.scopes=Oe.join(","))}y.tenantId&&(Q.tid=y.tenantId);const ce=Q;for(const Oe of Object.keys(ce))void 0===ce[Oe]&&delete ce[Oe];return`${function Xl({config:y}){return y.emulator?kn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(ce).slice(1)}`}const Mf="webStorageSupport";class Rf extends class cw{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ce("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Rf(p)}_finalizeEnroll(p,m,E){return function Xg(y,p){return Ut(y,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(y,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Qu(y,p){return Ut(y,"POST","/v2/accounts/mfaSignIn:finalize",Qt(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dw=(()=>{class y{constructor(){}static assertion(m){return Rf._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var ll="@firebase/auth";class Nf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{var M;p((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ul(){return window}function ji(){return(ji=(0,f.Z)(function*(y,p,m){var E;const{BuildInfo:M}=ul();J(p.sessionId,"AuthEvent did not contain a session ID");const O=yield nA(p.sessionId),Q={};return qr()?Q.ibi=M.packageName:Or()?Q.apn=M.packageName:Se(y,"operation-not-supported-in-this-environment"),M.displayName&&(Q.appDisplayName=M.displayName),Q.sessionId=O,fo(y,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,Q)})).apply(this,arguments)}function tu(){return(tu=(0,f.Z)(function*(y){const{BuildInfo:p}=ul(),m={};qr()?m.iosBundleId=p.packageName:Or()?m.androidPackageName=p.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Zl(y,m)})).apply(this,arguments)}function Of(){return(Of=(0,f.Z)(function*(y,p,m){const{cordova:E}=ul();let M=()=>{};try{yield new Promise((O,Q)=>{let ce=null;function Oe(){var gt;O();const mn=null===(gt=E.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof mn&&mn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function et(){ce||(ce=window.setTimeout(()=>{Q(Ie(y,"redirect-cancelled-by-user"))},2e3))}function dt(){"visible"===(null==document?void 0:document.visibilityState)&&et()}p.addPassiveListener(Oe),document.addEventListener("resume",et,!1),Or()&&document.addEventListener("visibilitychange",dt,!1),M=()=>{p.removePassiveListener(Oe),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",dt,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function nA(y){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(y){const p=Pf(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pf(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}!function kf(y){(0,fe._registerComponent)(new ue.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),{apiKey:O,authDomain:Q}=E.options;return((ce,Oe)=>{z(O&&!O.includes(":"),"invalid-api-key",{appName:ce.name}),z(!(null==Q?void 0:Q.includes(":")),"argument-error",{appName:ce.name});const et={apiKey:O,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:na(y)},dt=new Ke(ce,Oe,et);return function he(y,p){const m=(null==p?void 0:p.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ie);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(dt,m),dt})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new ue.wA("auth-internal",p=>{const m=ft(p.getProvider("auth").getImmediate());return new Nf(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(ll,"0.20.2",function gv(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,fe.registerVersion)(ll,"0.20.2","esm2017")}("Browser");class pw extends Cd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function fm(y){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,f.Z)(function*(y){const p=yield kd()._get(nu(y));return p&&(yield kd()._remove(nu(y))),p})).apply(this,arguments)}function pm(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function kd(){return ie(ko)}function nu(y){return Yn("authEvent",y.config.apiKey,y.name)}function Pd(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...m]=y.split("?");return(0,L.zd)(m.join("?"))}function Fd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function Ld(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function _m(y=(0,L.z$)()){return!("file:"!==Ld()&&"ionic:"!==Ld()&&"capacitor:"!==Ld()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function vm(){try{const y=self.localStorage,p=mi();if(y)return y.setItem(p,"1"),y.removeItem(p),!function ym(y=(0,L.z$)()){return function hc(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ei(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch(y){return ru()&&(0,L.hl)()}return!1}function ru(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function nt(){return(function mw(){return"http:"===Ld()||"https:"===Ld()}()||(0,L.ru)()||_m())&&!function _w(){return(0,L.b$)()||(0,L.UG)()}()&&vm()&&!ru()}function Lo(){return _m()&&"undefined"!=typeof document}function lr(){return(lr=(0,f.Z)(function*(){return!!Lo()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const wi={LOCAL:"local",NONE:"none",SESSION:"session"},Os=z,Ca="persistence";function Bd(y){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,f.Z)(function*(y){yield y._initializationPromise;const p=jd(),m=Yn(Ca,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function jd(){var y;try{return(null===(y=function Br(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Sn=z;class Bn{constructor(){this.browserResolver=ie(class pv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=us,this._completeRedirectFn=hs,this._overrideRedirectResult=S}_openPopup(p,m,E,M){var O=this;return(0,f.Z)(function*(){var Q;J(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const ce=fo(p,m,E,Ve(),M);return function Sf(y,p,m,E=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const Oe=Object.assign(Object.assign({},xd),{width:E.toString(),height:M.toString(),top:O,left:Q}),et=(0,L.z$)().toLowerCase();m&&(ce=Ua(et)?"_blank":m),Ba(et)&&(p=p||"http://localhost",Oe.scrollbars="yes");const dt=Object.entries(Oe).reduce((mn,[Un,gs])=>`${mn}${Un}=${gs},`,"");if(function Eo(y=(0,L.z$)()){var p;return qr(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(et)&&"_self"!==ce)return function fv(y,p){const m=document.createElement("a");m.href=y,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",ce),new am(null);const gt=window.open(p||"",ce,dt);z(gt,y,"popup-blocked");try{gt.focus()}catch(mn){}return new am(gt)}(p,ce,mi())})()}_openRedirect(p,m,E,M){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(p),function vt(y){Lt().location.href=y}(fo(p,m,E,Ve(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:O}=this.eventManagers[m];return M?Promise.resolve(M):(J(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const E=yield function tA(y){return Jl.apply(this,arguments)}(p),M=new Cd(p);return E.register("authEvent",O=>(z(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=E,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Mf,{type:Mf},M=>{var O;const Q=null===(O=null==M?void 0:M[0])||void 0===O?void 0:O[Mf];void 0!==Q&&m(!!Q),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ql(y){return Td.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Xs()||Tl()||qr()}}),this.cordovaResolver=ie(class yv{constructor(){this._redirectPersistence=us,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hs,this._overrideRedirectResult=S}_initialize(p){var m=this;return(0,f.Z)(function*(){const E=p._key();let M=m.eventManagers.get(E);return M||(M=new pw(p),m.eventManagers.set(E,M),m.attachCallbackListeners(p,M)),M})()}_openPopup(p){Se(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,M){var O=this;return(0,f.Z)(function*(){!function fw(y){var p,m,E,M,O,Q,ce,Oe,et,dt;const gt=ul();z("function"==typeof(null===(p=null==gt?void 0:gt.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(void 0!==(null===(m=null==gt?void 0:gt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(O=null===(M=null===(E=null==gt?void 0:gt.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Oe=null===(ce=null===(Q=null==gt?void 0:gt.cordova)||void 0===Q?void 0:Q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Oe?void 0:Oe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(dt=null===(et=null==gt?void 0:gt.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===dt?void 0:dt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Q=yield O._initialize(p);yield Q.initialized(),Q.resetRedirect(),function D(){ks.clear()}(),yield O._originValidation(p);const ce=function mv(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:pm(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(p,E,M);yield function wa(y,p){return kd()._set(nu(y),p)}(p,ce);const Oe=yield function cm(y,p,m){return ji.apply(this,arguments)}(p,ce,m),et=yield function dm(y){const{cordova:p}=ul();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let M=null;E?p.plugins.browsertab.openUrl(y):M=p.InAppBrowser.open(y,function Jc(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(M)})})}(Oe);return function hm(y,p,m){return Of.apply(this,arguments)}(p,Q,et)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function dc(y){return tu.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:M,BuildInfo:O}=ul(),Q=setTimeout((0,f.Z)(function*(){yield fm(p),m.onEvent(Fd())}),500),ce=function(){var dt=(0,f.Z)(function*(gt){clearTimeout(Q);const mn=yield fm(p);let Un=null;mn&&(null==gt?void 0:gt.url)&&(Un=function _v(y,p){var m,E;const M=function Od(y){const p=Pd(y),m=p.link?decodeURIComponent(p.link):void 0,E=Pd(m).link,M=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Pd(M).link||M||E||m||y}(p);if(M.includes("/__/auth/callback")){const O=Pd(M),Q=O.firebaseError?function Ff(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(O.firebaseError)):null,ce=null===(E=null===(m=null==Q?void 0:Q.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Oe=ce?Ie(ce):null;return Oe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:M,postBody:null}}return null}(mn,gt.url)),m.onEvent(Un||Fd())});return function(mn){return dt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const Oe=M,et=`${O.packageName.toLowerCase()}://`;ul().handleOpenURL=function(){var dt=(0,f.Z)(function*(gt){if(gt.toLowerCase().startsWith(et)&&ce({url:gt}),"function"==typeof Oe)try{Oe(gt)}catch(mn){console.error(mn)}});return function(gt){return dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=us,this._completeRedirectFn=hs,this._overrideRedirectResult=S}_initialize(p){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,M){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,m,E,M)})()}_openRedirect(p,m,E,M){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,m,E,M)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Lo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Vd(){return lr.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Bf(y){return y.unwrap()}function Vo(y){return fs(y)}function fs(y){const{_tokenResponse:p}=y instanceof L.ZR?y.customData:y;if(!p)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return co.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=ad;break;case"facebook.com":E=ia;break;case"github.com":E=hf;break;case"twitter.com":E=ld;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:Q,pendingToken:ce,nonce:Oe}=p;return O||Q||M||ce?ce?m.startsWith("saml.")?Io._create(m,ce):Is._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:M,accessToken:O}):new ss(m).credential({idToken:M,accessToken:O,rawNonce:Oe}):null}return y instanceof L.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function P(y,p){return p.catch(m=>{throw m instanceof L.ZR&&function be(y,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Em(y,function Xn(y,p){var m;const E=(0,L.m9)(y),M=p;return z(p.customData.operationType,E,"argument-error"),z(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Ro._fromError(E,M)}(y,p));else if(E){const M=fs(p),O=p;M&&(O.credential=M,O.tenantId=E.tenantId||void 0,O.email=E.email||void 0,O.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const M=m.user;return{operationType:m.operationType,credential:Vo(m),additionalUserInfo:sr(m),user:ps.getOrCreate(M)}})}function Hi(y,p){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,f.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>P(y,m.confirm(E))}})).apply(this,arguments)}class Em{constructor(p,m){this.resolver=m,this.auth=function bm(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return P(Bf(this.auth),this.resolver.resolveSignIn(p))}}class ps{constructor(p){this._delegate=p,this.multiFactor=function em(y){const p=(0,L.m9)(y);return Hl.has(p)||Hl.set(p,ha._fromUser(p)),Hl.get(p)}(p)}static getOrCreate(p){return ps.USER_MAP.has(p)||ps.USER_MAP.set(p,new ps(p)),ps.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,f.Z)(function*(){return P(m.auth,fr(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,f.Z)(function*(){return Hi(E.auth,function er(y,p,m){return rc.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,f.Z)(function*(){return P(m.auth,function wf(y,p,m){return bi.apply(this,arguments)}(m._delegate,p,Bn))})()}linkWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield Bd(ft(m.auth)),function Kt(y,p,m){return function St(y,p,m){return Vn.apply(this,arguments)}(y,p,m)}(m._delegate,p,Bn)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,f.Z)(function*(){return P(m.auth,Ds(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Hi(this.auth,function rm(y,p,m){return Jr.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return P(this.auth,function wd(y,p,m){return ic.apply(this,arguments)}(this._delegate,p,Bn))}reauthenticateWithRedirect(p){var m=this;return(0,f.Z)(function*(){return yield Bd(ft(m.auth)),function rt(y,p,m){return function it(y,p,m){return Ct.apply(this,arguments)}(y,p,m)}(m._delegate,p,Bn)})()}sendEmailVerification(p){return function Pi(y,p){return Wu.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,f.Z)(function*(){return yield function ff(y,p){return gn.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function dd(y,p){return Ul((0,L.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function hd(y,p){return Ul((0,L.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function uo(y,p){return vi.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Vl(y,p){return Bl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Fl(y,p,m){return Ll.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const iu=z;let wm=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=m.options;iu(M,"invalid-api-key",{appName:m.name}),iu(M,"invalid-api-key",{appName:m.name});const O="undefined"!=typeof window?Bn:void 0;this._delegate=E.initialize({options:{persistence:Im(M,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Le),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Zr(y,p,m){const E=ft(y);z(E._canInitEmulator,E,"emulator-config-failed"),z(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const M=!!(null==m?void 0:m.disableWarnings),O=ts(p),{host:Q,port:ce}=function Hn(y){const p=ts(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const O=M[1];return{host:O,port:ns(E.substr(O.length+1))}}{const[O,Q]=E.split(":");return{host:O,port:ns(Q)}}}(p);E.config.emulator={url:`${O}//${Q}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:ce,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function bn(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function ua(y,p){return xe.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return jt(this._delegate,m)}confirmPasswordReset(m,E){return function kl(y,p,m){return Hu.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var M=this;return(0,f.Z)(function*(){return P(M._delegate,function So(y,p,m){return pi.apply(this,arguments)}(M._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Pl(y,p){return ao.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function cd(y,p){const m=xl.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){iu(nt(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function pr(y,p){return ho.apply(this,arguments)}(m._delegate,Bn);return E?P(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Lf(y,p){ft(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,M){const{next:O,error:Q,complete:ce}=Cm(m,E,M);return this._delegate.onAuthStateChanged(O,Q,ce)}onIdTokenChanged(m,E,M){const{next:O,error:Q,complete:ce}=Cm(m,E,M);return this._delegate.onIdTokenChanged(O,Q,ce)}sendSignInLinkToEmail(m,E){return function Gu(y,p,m){return zu.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ju(y,p,m){return Nl.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,f.Z)(function*(){let M;switch(function Vf(y,p){Os(Object.values(wi).includes(p),y,"invalid-persistence-type"),(0,L.b$)()?Os(p!==wi.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?Os(p===wi.NONE,y,"unsupported-persistence-type"):ru()?Os(p===wi.NONE||p===wi.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):Os(p===wi.NONE||vm(),y,"unsupported-persistence-type")}(E._delegate,m),m){case wi.SESSION:M=us;break;case wi.LOCAL:M=(yield ie(Oo)._isAvailable())?Oo:ko;break;case wi.NONE:M=Dt;break;default:return Se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return P(this._delegate,function ud(y){return Lu.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return P(this._delegate,Tn(this._delegate,m))}signInWithCustomToken(m){return P(this._delegate,function la(y,p){return Et.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return P(this._delegate,function $u(y,p,m){return Tn((0,L.m9)(y),od.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return P(this._delegate,function Qg(y,p,m){return Ts.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Hi(this._delegate,function Ln(y,p,m){return Qr.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,f.Z)(function*(){return iu(nt(),E._delegate,"operation-not-supported-in-this-environment"),P(E._delegate,function sm(y,p,m){return cs.apply(this,arguments)}(E._delegate,m,Bn))})()}signInWithRedirect(m){var E=this;return(0,f.Z)(function*(){return iu(nt(),E._delegate,"operation-not-supported-in-this-environment"),yield Bd(E._delegate),function X(y,p,m){return function le(y,p,m){return Fe.apply(this,arguments)}(y,p,m)}(E._delegate,m,Bn)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function wn(y,p){return Ol.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=wi,y})();function Cm(y,p,m){let E=y;"function"!=typeof y&&({next:E,error:p,complete:m}=y);const M=E;return{next:Q=>M(Q&&ps.getOrCreate(Q)),error:p,complete:m}}function Im(y,p){const m=function bv(y,p){const m=jd();if(!m)return[];const E=Yn(Ca,y,p);switch(m.getItem(E)){case wi.NONE:return[Dt];case wi.LOCAL:return[Oo,us];case wi.SESSION:return[us];default:return[]}}(y,p);if("undefined"!=typeof self&&!m.includes(Oo)&&m.push(Oo),"undefined"!=typeof window)for(const E of[ko,us])m.includes(E)||m.push(E);return m.includes(Dt)||m.push(Dt),m}class Bo{constructor(){this.providerId="phone",this._delegate=new co(Bf(ne.Z.auth()))}static credential(p,m){return co.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Bo.PHONE_SIGN_IN_METHOD=co.PHONE_SIGN_IN_METHOD,Bo.PROVIDER_ID=co.PROVIDER_ID;const Uf=z;class su{constructor(p,m,E=ne.Z.app()){var M;Uf(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new tc(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dl(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new wm(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:od,FacebookAuthProvider:ia,GithubAuthProvider:hf,GoogleAuthProvider:ad,OAuthProvider:ss,SAMLAuthProvider:Fr,PhoneAuthProvider:Bo,PhoneMultiFactorGenerator:dw,RecaptchaVerifier:su,TwitterAuthProvider:ld,Auth:wm,AuthCredential:Ni,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(ne.Z)},8306:(Je,we,F)=>{F.d(we,{y:()=>W});var f=F(930),ne=F(727),L=F(8822),fe=F(4671);var ue=F(2416),de=F(576),pe=F(2806);let W=(()=>{class Ne{constructor(je){je&&(this._subscribe=je)}lift(je){const me=new Ne;return me.source=this,me.operator=je,me}subscribe(je,me,Te){const We=function ze(Ne){return Ne&&Ne instanceof f.Lv||function se(Ne){return Ne&&(0,de.m)(Ne.next)&&(0,de.m)(Ne.error)&&(0,de.m)(Ne.complete)}(Ne)&&(0,ne.Nn)(Ne)}(je)?je:new f.Hp(je,me,Te);return(0,pe.x)(()=>{const{operator:Ye,source:Se}=this;We.add(Ye?Ye.call(We,Se):Se?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(je){try{return this._subscribe(je)}catch(me){je.error(me)}}forEach(je,me){return new(me=G(me))((Te,We)=>{const Ye=new f.Hp({next:Se=>{try{je(Se)}catch(Ie){We(Ie),Ye.unsubscribe()}},error:We,complete:Te});this.subscribe(Ye)})}_subscribe(je){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(je)}[L.L](){return this}pipe(...je){return function ye(Ne){return 0===Ne.length?fe.y:1===Ne.length?Ne[0]:function(je){return Ne.reduce((me,Te)=>Te(me),je)}}(je)(this)}toPromise(je){return new(je=G(je))((me,Te)=>{let We;this.subscribe(Ye=>We=Ye,Ye=>Te(Ye),()=>me(We))})}}return Ne.create=Le=>new Ne(Le),Ne})();function G(Ne){var Le;return null!==(Le=null!=Ne?Ne:ue.v.Promise)&&void 0!==Le?Le:Promise}},7579:(Je,we,F)=>{F.d(we,{x:()=>ue});var f=F(8306),ne=F(727);const fe=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),ye=F(2806);let ue=(()=>{class pe extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const se=new de(this,this);return se.operator=G,se}_throwIfClosed(){if(this.closed)throw new fe}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:se}=this;for(;se.length;)se.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:se,isStopped:ze,observers:Ne}=this;return se||ze?ne.Lc:(this.currentObservers=null,Ne.push(G),new ne.w0(()=>{this.currentObservers=null,(0,oe.P)(Ne,G)}))}_checkFinalizedStatuses(G){const{hasError:se,thrownError:ze,isStopped:Ne}=this;se?G.error(ze):Ne&&G.complete()}asObservable(){const G=new f.y;return G.source=this,G}}return pe.create=(W,G)=>new de(W,G),pe})();class de extends ue{constructor(W,G){super(),this.destination=W,this.source=G}next(W){var G,se;null===(se=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===se||se.call(G,W)}error(W){var G,se;null===(se=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===se||se.call(G,W)}complete(){var W,G;null===(G=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===G||G.call(W)}_subscribe(W){var G,se;return null!==(se=null===(G=this.source)||void 0===G?void 0:G.subscribe(W))&&void 0!==se?se:ne.Lc}}},930:(Je,we,F)=>{F.d(we,{Hp:()=>je,Lv:()=>se});var f=F(576),ne=F(727),L=F(2416),fe=F(7849),oe=F(5032);const ye=pe("C",void 0,void 0);function pe(Se,Ie,De){return{kind:Se,value:Ie,error:De}}var W=F(3410),G=F(2806);class se extends ne.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ne.Nn)(Ie)&&Ie.add(this)):this.destination=Ye}static create(Ie,De,He){return new je(Ie,De,He)}next(Ie){this.isStopped?We(function de(Se){return pe("N",Se,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?We(function ue(Se){return pe("E",void 0,Se)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?We(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ne(Se,Ie){return ze.call(Se,Ie)}class Le{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:De}=this;if(De.next)try{De.next(Ie)}catch(He){me(He)}}error(Ie){const{partialObserver:De}=this;if(De.error)try{De.error(Ie)}catch(He){me(He)}else me(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(De){me(De)}}}class je extends se{constructor(Ie,De,He){let $e;if(super(),(0,f.m)(Ie)||!Ie)$e={next:null!=Ie?Ie:void 0,error:null!=De?De:void 0,complete:null!=He?He:void 0};else{let z;this&&L.v.useDeprecatedNextContext?(z=Object.create(Ie),z.unsubscribe=()=>this.unsubscribe(),$e={next:Ie.next&&Ne(Ie.next,z),error:Ie.error&&Ne(Ie.error,z),complete:Ie.complete&&Ne(Ie.complete,z)}):$e=Ie}this.destination=new Le($e)}}function me(Se){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Se):(0,fe.h)(Se)}function We(Se,Ie){const{onStoppedNotification:De}=L.v;De&&W.z.setTimeout(()=>De(Se,Ie))}const Ye={closed:!0,next:oe.Z,error:function Te(Se){throw Se},complete:oe.Z}},727:(Je,we,F)=>{F.d(we,{Lc:()=>ye,w0:()=>oe,Nn:()=>ue});var f=F(576);const L=(0,F(3888).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((se,ze)=>`${ze+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var fe=F(8737);class oe{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ne of G)Ne.remove(this);else G.remove(this);const{initialTeardown:se}=this;if((0,f.m)(se))try{se()}catch(Ne){W=Ne instanceof L?Ne.errors:[Ne]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ne of ze)try{de(Ne)}catch(Le){W=null!=W?W:[],Le instanceof L?W=[...W,...Le.errors]:W.push(Le)}}if(W)throw new L(W)}}add(W){var G;if(W&&W!==this)if(this.closed)de(W);else{if(W instanceof oe){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(W)}}_hasParent(W){const{_parentage:G}=this;return G===W||Array.isArray(G)&&G.includes(W)}_addParent(W){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(W),G):G?[G,W]:W}_removeParent(W){const{_parentage:G}=this;G===W?this._parentage=null:Array.isArray(G)&&(0,fe.P)(G,W)}remove(W){const{_finalizers:G}=this;G&&(0,fe.P)(G,W),W instanceof oe&&W._removeParent(this)}}oe.EMPTY=(()=>{const pe=new oe;return pe.closed=!0,pe})();const ye=oe.EMPTY;function ue(pe){return pe instanceof oe||pe&&"closed"in pe&&(0,f.m)(pe.remove)&&(0,f.m)(pe.add)&&(0,f.m)(pe.unsubscribe)}function de(pe){(0,f.m)(pe)?pe():pe.unsubscribe()}},2416:(Je,we,F)=>{F.d(we,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,F)=>{F.d(we,{E:()=>ne});const ne=new(F(8306).y)(oe=>oe.complete())},8996:(Je,we,F)=>{F.d(we,{D:()=>Ie});var f=F(8421),ne=F(5363),L=F(9468),ye=F(8306),de=F(2202),pe=F(576),W=F(9672);function se(De,He){if(!De)throw new Error("Iterable cannot be null");return new ye.y($e=>{(0,W.f)($e,He,()=>{const z=De[Symbol.asyncIterator]();(0,W.f)($e,He,()=>{z.next().then(Ce=>{Ce.done?$e.complete():$e.next(Ce.value)})},0,!0)})})}var ze=F(3670),Ne=F(8239),Le=F(1144),je=F(6495),me=F(2206),Te=F(4532),We=F(3260);function Ie(De,He){return He?function Se(De,He){if(null!=De){if((0,ze.c)(De))return function fe(De,He){return(0,f.Xf)(De).pipe((0,L.R)(He),(0,ne.Q)(He))}(De,He);if((0,Le.z)(De))return function ue(De,He){return new ye.y($e=>{let z=0;return He.schedule(function(){z===De.length?$e.complete():($e.next(De[z++]),$e.closed||this.schedule())})})}(De,He);if((0,Ne.t)(De))return function oe(De,He){return(0,f.Xf)(De).pipe((0,L.R)(He),(0,ne.Q)(He))}(De,He);if((0,me.D)(De))return se(De,He);if((0,je.T)(De))return function G(De,He){return new ye.y($e=>{let z;return(0,W.f)($e,He,()=>{z=De[de.h](),(0,W.f)($e,He,()=>{let Ce,J;try{({value:Ce,done:J}=z.next())}catch(ae){return void $e.error(ae)}J?$e.complete():$e.next(Ce)},0,!0)}),()=>(0,pe.m)(null==z?void 0:z.return)&&z.return()})}(De,He);if((0,We.L)(De))return function Ye(De,He){return se((0,We.Q)(De),He)}(De,He)}throw(0,Te.z)(De)}(De,He):(0,f.Xf)(De)}},8421:(Je,we,F)=>{F.d(we,{Xf:()=>ze});var f=F(655),ne=F(1144),L=F(8239),fe=F(8306),oe=F(3670),ye=F(2206),ue=F(4532),de=F(6495),pe=F(3260),W=F(576),G=F(7849),se=F(8822);function ze(Se){if(Se instanceof fe.y)return Se;if(null!=Se){if((0,oe.c)(Se))return function Ne(Se){return new fe.y(Ie=>{const De=Se[se.L]();if((0,W.m)(De.subscribe))return De.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,ne.z)(Se))return function Le(Se){return new fe.y(Ie=>{for(let De=0;De<Se.length&&!Ie.closed;De++)Ie.next(Se[De]);Ie.complete()})}(Se);if((0,L.t)(Se))return function je(Se){return new fe.y(Ie=>{Se.then(De=>{Ie.closed||(Ie.next(De),Ie.complete())},De=>Ie.error(De)).then(null,G.h)})}(Se);if((0,ye.D)(Se))return Te(Se);if((0,de.T)(Se))return function me(Se){return new fe.y(Ie=>{for(const De of Se)if(Ie.next(De),Ie.closed)return;Ie.complete()})}(Se);if((0,pe.L)(Se))return function We(Se){return Te((0,pe.Q)(Se))}(Se)}throw(0,ue.z)(Se)}function Te(Se){return new fe.y(Ie=>{(function Ye(Se,Ie){var De,He,$e,z;return(0,f.mG)(this,void 0,void 0,function*(){try{for(De=(0,f.KL)(Se);!(He=yield De.next()).done;)if(Ie.next(He.value),Ie.closed)return}catch(Ce){$e={error:Ce}}finally{try{He&&!He.done&&(z=De.return)&&(yield z.call(De))}finally{if($e)throw $e.error}}Ie.complete()})})(Se,Ie).catch(De=>Ie.error(De))})}},6451:(Je,we,F)=>{F.d(we,{T:()=>ye});var f=F(8189),ne=F(8421),L=F(515),fe=F(7669),oe=F(8996);function ye(...ue){const de=(0,fe.yG)(ue),pe=(0,fe._6)(ue,1/0),W=ue;return W.length?1===W.length?(0,ne.Xf)(W[0]):(0,f.J)(pe)((0,oe.D)(W,de)):L.E}},5403:(Je,we,F)=>{F.d(we,{x:()=>ne});var f=F(930);function ne(fe,oe,ye,ue,de){return new L(fe,oe,ye,ue,de)}class L extends f.Lv{constructor(oe,ye,ue,de,pe,W){super(oe),this.onFinalize=pe,this.shouldUnsubscribe=W,this._next=ye?function(G){try{ye(G)}catch(se){oe.error(se)}}:super._next,this._error=de?function(G){try{de(G)}catch(se){oe.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(G){oe.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(Je,we,F)=>{F.d(we,{U:()=>L});var f=F(4482),ne=F(5403);function L(fe,oe){return(0,f.e)((ye,ue)=>{let de=0;ye.subscribe((0,ne.x)(ue,pe=>{ue.next(fe.call(oe,pe,de++))}))})}},8189:(Je,we,F)=>{F.d(we,{J:()=>L});var f=F(5577),ne=F(4671);function L(fe=1/0){return(0,f.z)(ne.y,fe)}},5577:(Je,we,F)=>{F.d(we,{z:()=>de});var f=F(4004),ne=F(8421),L=F(4482),fe=F(9672),oe=F(5403),ue=F(576);function de(pe,W,G=1/0){return(0,ue.m)(W)?de((se,ze)=>(0,f.U)((Ne,Le)=>W(se,Ne,ze,Le))((0,ne.Xf)(pe(se,ze))),G):("number"==typeof W&&(G=W),(0,L.e)((se,ze)=>function ye(pe,W,G,se,ze,Ne,Le,je){const me=[];let Te=0,We=0,Ye=!1;const Se=()=>{Ye&&!me.length&&!Te&&W.complete()},Ie=He=>Te<se?De(He):me.push(He),De=He=>{Ne&&W.next(He),Te++;let $e=!1;(0,ne.Xf)(G(He,We++)).subscribe((0,oe.x)(W,z=>{null==ze||ze(z),Ne?Ie(z):W.next(z)},()=>{$e=!0},void 0,()=>{if($e)try{for(Te--;me.length&&Te<se;){const z=me.shift();Le?(0,fe.f)(W,Le,()=>De(z)):De(z)}Se()}catch(z){W.error(z)}}))};return pe.subscribe((0,oe.x)(W,Ie,()=>{Ye=!0,Se()})),()=>{null==je||je()}}(se,ze,pe,G)))}},5363:(Je,we,F)=>{F.d(we,{Q:()=>fe});var f=F(9672),ne=F(4482),L=F(5403);function fe(oe,ye=0){return(0,ne.e)((ue,de)=>{ue.subscribe((0,L.x)(de,pe=>(0,f.f)(de,oe,()=>de.next(pe),ye),()=>(0,f.f)(de,oe,()=>de.complete(),ye),pe=>(0,f.f)(de,oe,()=>de.error(pe),ye)))})}},3099:(Je,we,F)=>{F.d(we,{B:()=>ye});var f=F(8996),ne=F(5698),L=F(7579),fe=F(930),oe=F(4482);function ye(de={}){const{connector:pe=(()=>new L.x),resetOnError:W=!0,resetOnComplete:G=!0,resetOnRefCountZero:se=!0}=de;return ze=>{let Ne=null,Le=null,je=null,me=0,Te=!1,We=!1;const Ye=()=>{null==Le||Le.unsubscribe(),Le=null},Se=()=>{Ye(),Ne=je=null,Te=We=!1},Ie=()=>{const De=Ne;Se(),null==De||De.unsubscribe()};return(0,oe.e)((De,He)=>{me++,!We&&!Te&&Ye();const $e=je=null!=je?je:pe();He.add(()=>{me--,0===me&&!We&&!Te&&(Le=ue(Ie,se))}),$e.subscribe(He),Ne||(Ne=new fe.Hp({next:z=>$e.next(z),error:z=>{We=!0,Ye(),Le=ue(Se,W,z),$e.error(z)},complete:()=>{Te=!0,Ye(),Le=ue(Se,G),$e.complete()}}),(0,f.D)(De).subscribe(Ne))})(ze)}}function ue(de,pe,...W){return!0===pe?(de(),null):!1===pe?null:pe(...W).pipe((0,ne.q)(1)).subscribe(()=>de())}},9468:(Je,we,F)=>{F.d(we,{R:()=>ne});var f=F(4482);function ne(L,fe=0){return(0,f.e)((oe,ye)=>{ye.add(L.schedule(()=>oe.subscribe(ye),fe))})}},5698:(Je,we,F)=>{F.d(we,{q:()=>fe});var f=F(515),ne=F(4482),L=F(5403);function fe(oe){return oe<=0?()=>f.E:(0,ne.e)((ye,ue)=>{let de=0;ye.subscribe((0,L.x)(ue,pe=>{++de<=oe&&(ue.next(pe),oe<=de&&ue.complete())}))})}},8505:(Je,we,F)=>{F.d(we,{b:()=>oe});var f=F(576),ne=F(4482),L=F(5403),fe=F(4671);function oe(ye,ue,de){const pe=(0,f.m)(ye)||ue||de?{next:ye,error:ue,complete:de}:ye;return pe?(0,ne.e)((W,G)=>{var se;null===(se=pe.subscribe)||void 0===se||se.call(pe);let ze=!0;W.subscribe((0,L.x)(G,Ne=>{var Le;null===(Le=pe.next)||void 0===Le||Le.call(pe,Ne),G.next(Ne)},()=>{var Ne;ze=!1,null===(Ne=pe.complete)||void 0===Ne||Ne.call(pe),G.complete()},Ne=>{var Le;ze=!1,null===(Le=pe.error)||void 0===Le||Le.call(pe,Ne),G.error(Ne)},()=>{var Ne,Le;ze&&(null===(Ne=pe.unsubscribe)||void 0===Ne||Ne.call(pe)),null===(Le=pe.finalize)||void 0===Le||Le.call(pe)}))}):fe.y}},4408:(Je,we,F)=>{F.d(we,{o:()=>oe});var f=F(727);class ne extends f.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const L={setInterval(ye,ue,...de){const{delegate:pe}=L;return(null==pe?void 0:pe.setInterval)?pe.setInterval(ye,ue,...de):setInterval(ye,ue,...de)},clearInterval(ye){const{delegate:ue}=L;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ye)},delegate:void 0};var fe=F(8737);class oe extends ne{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){if(this.closed)return this;this.state=ue;const pe=this.id,W=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(W,pe,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(W,this.id,de),this}requestAsyncId(ue,de,pe=0){return L.setInterval(ue.flush.bind(ue,this),pe)}recycleAsyncId(ue,de,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return de;L.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ue,de);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let W,pe=!1;try{this.work(ue)}catch(G){pe=!0,W=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:pe}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(pe,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,F)=>{F.d(we,{v:()=>L});var f=F(6063);class ne{constructor(oe,ye=ne.now){this.schedulerActionCtor=oe,this.now=ye}schedule(oe,ye=0,ue){return new this.schedulerActionCtor(this,oe).schedule(ue,ye)}}ne.now=f.l.now;class L extends ne{constructor(oe,ye=ne.now){super(oe,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:ye}=this;if(this._active)return void ye.push(oe);let ue;this._active=!0;do{if(ue=oe.execute(oe.state,oe.delay))break}while(oe=ye.shift());if(this._active=!1,ue){for(;oe=ye.shift();)oe.unsubscribe();throw ue}}}},4986:(Je,we,F)=>{F.d(we,{z:()=>L});var f=F(4408);const L=new(F(7565).v)(f.o)},6063:(Je,we,F)=>{F.d(we,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Je,we,F)=>{F.d(we,{z:()=>f});const f={setTimeout(ne,L,...fe){const{delegate:oe}=f;return(null==oe?void 0:oe.setTimeout)?oe.setTimeout(ne,L,...fe):setTimeout(ne,L,...fe)},clearTimeout(ne){const{delegate:L}=f;return((null==L?void 0:L.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},2202:(Je,we,F)=>{F.d(we,{h:()=>ne});const ne=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,F)=>{F.d(we,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,F)=>{F.d(we,{_6:()=>ye,jO:()=>fe,yG:()=>oe});var f=F(576);function L(ue){return ue[ue.length-1]}function fe(ue){return(0,f.m)(L(ue))?ue.pop():void 0}function oe(ue){return function ne(ue){return ue&&(0,f.m)(ue.schedule)}(L(ue))?ue.pop():void 0}function ye(ue,de){return"number"==typeof L(ue)?ue.pop():de}},8737:(Je,we,F)=>{function f(ne,L){if(ne){const fe=ne.indexOf(L);0<=fe&&ne.splice(fe,1)}}F.d(we,{P:()=>f})},3888:(Je,we,F)=>{function f(ne){const fe=ne(oe=>{Error.call(oe),oe.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}F.d(we,{d:()=>f})},2806:(Je,we,F)=>{F.d(we,{O:()=>fe,x:()=>L});var f=F(2416);let ne=null;function L(oe){if(f.v.useDeprecatedSynchronousErrorHandling){const ye=!ne;if(ye&&(ne={errorThrown:!1,error:null}),oe(),ye){const{errorThrown:ue,error:de}=ne;if(ne=null,ue)throw de}}else oe()}function fe(oe){f.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=oe)}},9672:(Je,we,F)=>{function f(ne,L,fe,oe=0,ye=!1){const ue=L.schedule(function(){fe(),ye?ne.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(ne.add(ue),!ye)return ue}F.d(we,{f:()=>f})},4671:(Je,we,F)=>{function f(ne){return ne}F.d(we,{y:()=>f})},1144:(Je,we,F)=>{F.d(we,{z:()=>f});const f=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(Je,we,F)=>{F.d(we,{D:()=>ne});var f=F(576);function ne(L){return Symbol.asyncIterator&&(0,f.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(Je,we,F)=>{function f(ne){return"function"==typeof ne}F.d(we,{m:()=>f})},3670:(Je,we,F)=>{F.d(we,{c:()=>L});var f=F(8822),ne=F(576);function L(fe){return(0,ne.m)(fe[f.L])}},6495:(Je,we,F)=>{F.d(we,{T:()=>L});var f=F(2202),ne=F(576);function L(fe){return(0,ne.m)(null==fe?void 0:fe[f.h])}},8239:(Je,we,F)=>{F.d(we,{t:()=>ne});var f=F(576);function ne(L){return(0,f.m)(null==L?void 0:L.then)}},3260:(Je,we,F)=>{F.d(we,{L:()=>fe,Q:()=>L});var f=F(655),ne=F(576);function L(oe){return(0,f.FC)(this,arguments,function*(){const ue=oe.getReader();try{for(;;){const{value:de,done:pe}=yield(0,f.qq)(ue.read());if(pe)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(de)}}finally{ue.releaseLock()}})}function fe(oe){return(0,ne.m)(null==oe?void 0:oe.getReader)}},4482:(Je,we,F)=>{F.d(we,{A:()=>ne,e:()=>L});var f=F(576);function ne(fe){return(0,f.m)(null==fe?void 0:fe.lift)}function L(fe){return oe=>{if(ne(oe))return oe.lift(function(ye){try{return fe(ye,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Je,we,F)=>{function f(){}F.d(we,{Z:()=>f})},7849:(Je,we,F)=>{F.d(we,{h:()=>L});var f=F(2416),ne=F(3410);function L(fe){ne.z.setTimeout(()=>{const{onUnhandledError:oe}=f.v;if(!oe)throw fe;oe(fe)})}},4532:(Je,we,F)=>{function f(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(we,{z:()=>f})},655:(Je,we,F)=>{function fe(J,ae){var ie={};for(var ve in J)Object.prototype.hasOwnProperty.call(J,ve)&&ae.indexOf(ve)<0&&(ie[ve]=J[ve]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ve=Object.getOwnPropertySymbols(J);he<ve.length;he++)ae.indexOf(ve[he])<0&&Object.prototype.propertyIsEnumerable.call(J,ve[he])&&(ie[ve[he]]=J[ve[he]])}return ie}function de(J,ae,ie,ve){return new(ie||(ie=Promise))(function(Ve,pt){function Zt(on){try{Ze(ve.next(on))}catch(kn){pt(kn)}}function Bt(on){try{Ze(ve.throw(on))}catch(kn){pt(kn)}}function Ze(on){on.done?Ve(on.value):function he(Ve){return Ve instanceof ie?Ve:new ie(function(pt){pt(Ve)})}(on.value).then(Zt,Bt)}Ze((ve=ve.apply(J,ae||[])).next())})}function me(J){return this instanceof me?(this.v=J,this):new me(J)}function Te(J,ae,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ve=ie.apply(J,ae||[]),Ve=[];return he={},pt("next"),pt("throw"),pt("return"),he[Symbol.asyncIterator]=function(){return this},he;function pt(cn){ve[cn]&&(he[cn]=function(Xt){return new Promise(function(Rr,Qt){Ve.push([cn,Xt,Rr,Qt])>1||Zt(cn,Xt)})})}function Zt(cn,Xt){try{!function Bt(cn){cn.value instanceof me?Promise.resolve(cn.value.v).then(Ze,on):kn(Ve[0][2],cn)}(ve[cn](Xt))}catch(Rr){kn(Ve[0][3],Rr)}}function Ze(cn){Zt("next",cn)}function on(cn){Zt("throw",cn)}function kn(cn,Xt){cn(Xt),Ve.shift(),Ve.length&&Zt(Ve[0][0],Ve[0][1])}}function Ye(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ae=J[Symbol.asyncIterator];return ae?ae.call(J):(J=function se(J){var ae="function"==typeof Symbol&&Symbol.iterator,ie=ae&&J[ae],ve=0;if(ie)return ie.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ve>=J.length&&(J=void 0),{value:J&&J[ve++],done:!J}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ie={},ve("next"),ve("throw"),ve("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ve(Ve){ie[Ve]=J[Ve]&&function(pt){return new Promise(function(Zt,Bt){!function he(Ve,pt,Zt,Bt){Promise.resolve(Bt).then(function(Ze){Ve({value:Ze,done:Zt})},pt)}(Zt,Bt,(pt=J[Ve](pt)).done,pt.value)})}}}F.d(we,{FC:()=>Te,KL:()=>Ye,_T:()=>fe,mG:()=>de,qq:()=>me})},5e3:(Je,we,F)=>{F.d(we,{$8M:()=>el,$Z:()=>IC,AFp:()=>iD,AaK:()=>de,BQk:()=>g_,CHM:()=>Ao,CRH:()=>zI,CZH:()=>ly,CqO:()=>DC,EJc:()=>TE,EpF:()=>m_,F$t:()=>Nb,F4k:()=>yh,FYo:()=>MI,FiY:()=>ar,G48:()=>_D,Gf:()=>GI,GfV:()=>U_,Gpc:()=>G,Hsn:()=>TC,Ikx:()=>$s,JOm:()=>O,LFG:()=>it,LSH:()=>Fd,Lbi:()=>jp,NdJ:()=>_s,OlP:()=>In,Oqu:()=>vp,PXZ:()=>OE,Q6J:()=>Db,QGY:()=>Mc,Qsj:()=>$S,R0b:()=>Gs,RDi:()=>Vu,Rgc:()=>Fp,SBq:()=>Sh,Sil:()=>wM,Suo:()=>pE,TTD:()=>ss,TgZ:()=>Sc,VLi:()=>xE,X6Q:()=>Kp,XFs:()=>bt,Xpm:()=>_t,Y36:()=>Ac,YKP:()=>Np,YNc:()=>pC,Yjl:()=>Ua,Yz7:()=>Xt,ZZ4:()=>jh,_Bn:()=>L_,_UZ:()=>Sb,_Vd:()=>Rp,_c5:()=>Xp,_uU:()=>jC,aQg:()=>xn,c2e:()=>uy,cJS:()=>Qt,cg1:()=>qb,dDg:()=>ME,deG:()=>_f,dqk:()=>Wt,eFA:()=>pD,ekj:()=>b_,f3M:()=>Kt,g9A:()=>oD,h0i:()=>xh,hGG:()=>VM,hij:()=>w_,iGM:()=>$I,ifc:()=>Yt,ip1:()=>ay,kL8:()=>lI,lG2:()=>Tl,n5z:()=>Xa,oAB:()=>kr,oxw:()=>Rb,q4F:()=>j_,qLn:()=>be,qOj:()=>lb,qZA:()=>mp,sBO:()=>gy,sIi:()=>up,s_b:()=>Nh,soG:()=>Hp,tBr:()=>ei,tb:()=>aD,tp0:()=>Ea,uIk:()=>r_,vHH:()=>Le,vpe:()=>yl,wAp:()=>It,xp6:()=>Mw,ynx:()=>yu,z2F:()=>PE,zSh:()=>Jv,zs3:()=>Vs});var f=F(7579),ne=F(727),L=F(8306),fe=F(6451),oe=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=ye({__forward_ref__:ye});function G(s){return s.__forward_ref__=G,s.toString=function(){return de(this())},s}function se(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===G}class Le extends Error{constructor(o,l){super(function je(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function Ie(s,o){const l=o?` in ${o}`:"";throw new Le(-201,`No provider for ${Te(s)} found${l}`)}function Bt(s,o){null==s&&function Ze(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ut(s){return Xi(s,es)||Xi(s,zr)}function Xi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Nr(s){return s&&(s.hasOwnProperty(Qs)||s.hasOwnProperty(Ri))?s[Qs]:null}const es=ye({\u0275prov:ye}),Qs=ye({\u0275inj:ye}),zr=ye({ngInjectableDef:ye}),Ri=ye({ngInjectorDef:ye});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let ci;function On(s){const o=ci;return ci=s,o}function Js(s,o,l){const c=Ut(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&bt.Optional?null:void 0!==o?o:void Ie(de(s),"Injector")}function rr(s){return{toString:s}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const lt="undefined"!=typeof globalThis&&globalThis,wt="undefined"!=typeof window&&window,vr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=lt||"undefined"!=typeof global&&global||wt||vr,Er={},H=[],K=ye({\u0275cmp:ye}),Y=ye({\u0275dir:ye}),Ae=ye({\u0275pipe:ye}),q=ye({\u0275mod:ye}),te=ye({\u0275fac:ye}),ke=ye({__NG_ELEMENT_ID__:ye});let Xe=0;function _t(s){return rr(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||H,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,id:"c",styles:s.styles||H,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return c.id+=Xe++,c.inputs=Ba(s.inputs,l),c.outputs=Ba(s.outputs),g&&g.forEach(w=>w(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(vn):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Dt):null,c})}function vn(s){return Qn(s)||function Or(s){return s[Y]||null}(s)}function Dt(s){return function Cs(s){return s[Ae]||null}(s)}const Yn={};function kr(s){return rr(()=>{const o={type:s.type,bootstrap:s.bootstrap||H,declarations:s.declarations||H,imports:s.imports||H,exports:s.exports||H,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Yn[s.id]=s.type),o})}function Ba(s,o){if(null==s)return Er;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=c,o&&(o[h]=g)}return l}const Tl=_t;function Ua(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Qn(s){return s[K]||null}function Jn(s,o){const l=s[q]||null;if(!l&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return l}function Pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ki(s){return Array.isArray(s)&&!0===s[1]}function Ml(s){return 0!=(8&s.flags)}function Xc(s){return 2==(2&s.flags)}function rs(s){return 1==(1&s.flags)}function is(s){return null!==s.template}function ku(s){return 0!=(512&s[2])}function Cr(s,o){return s.hasOwnProperty(te)?s[te]:null}class Co{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function ss(){return ia}function ia(s){return s.type.prototype.ngOnChanges&&(s.setInput=hf),ad}function ad(){const s=Io(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===Er)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function hf(s,o,l,c){const h=Io(s)||function sa(s,o){return s[Pu]=o}(s,{previous:Er,current:null}),g=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[l],C=v[w];g[w]=new Co(C&&C.currentValue,o,v===Er),s[c]=o}ss.ngInherit=!0;const Pu="__ngSimpleChanges__";function Io(s){return s[Pu]||null}let aa;function Vu(s){aa=s}function gn(s){return!!s.listen}const za={createRenderer:(s,o)=>function os(){return void 0!==aa?aa:"undefined"!=typeof document?document:void 0}()};function rn(s){for(;Array.isArray(s);)s=s[0];return s}function so(s,o){return rn(o[s])}function hr(s,o){return rn(o[s.index])}function Tn(s,o){return s.data[o]}function fr(s,o){const l=o[s];return Pr(l)?l:l[0]}function To(s){return 4==(4&s[2])}function Ds(s){return 128==(128&s[2])}function Oi(s,o){return null==o?null:s[o]}function ls(s){s[18]=0}function la(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Et={lFrame:da(null),bindingsEnabled:!0};function kl(){return Et.bindingsEnabled}function xe(){return Et.lFrame.lView}function jt(){return Et.lFrame.tView}function Ao(s){return Et.lFrame.contextLView=s,s[8]}function wn(){let s=Ol();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ol(){return Et.lFrame.currentTNode}function pi(s,o){const l=Et.lFrame;l.currentTNode=s,l.isParent=o}function $u(){return Et.lFrame.isParent}function Gu(){Et.lFrame.isParent=!1}function ao(){return Et.lFrame.bindingIndex++}function Ll(s,o){const l=Et.lFrame;l.bindingIndex=l.bindingRootIndex=s,ca(o)}function ca(s){Et.lFrame.currentDirectiveIndex=s}function Bl(){return Et.lFrame.currentQueryIndex}function dd(s){Et.lFrame.currentQueryIndex=s}function hd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ul(s,o,l){if(l&bt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&bt.Host||(h=hd(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=Et.lFrame=fd();return c.currentTNode=o,c.lView=s,!0}function Mo(s){const o=fd(),l=s[1];Et.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function fd(){const s=Et.lFrame,o=null===s?null:s.child;return null===o?da(s):o}function da(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function pd(){const s=Et.lFrame;return Et.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const jl=pd;function Yr(){const s=pd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function sr(){return Et.lFrame.selectedIndex}function xo(s){Et.lFrame.selectedIndex=s}function $n(){const s=Et.lFrame;return Tn(s.tView,s.selectedIndex)}function Za(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function As(s,o,l){md(s,o,3,l)}function Ro(s,o,l,c){(3&s[2])===l&&md(s,o,l,c)}function Xn(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function md(s,o,l,c){const g=null!=c?c:-1,v=o.length-1;let w=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=c&&w>=c)break}else o[C]<0&&(s[18]+=65536),(w<g||-1==g)&&(Xg(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Xg(s,o,l,c){const h=l[c]<0,g=l[c+1],w=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class ha{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function ko(s,o,l){const c=gn(s);let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const v=l[h++],w=l[h++],C=l[h++];c?s.setAttribute(o,w,C,v):o.setAttributeNS(v,w,C)}else{const v=g,w=l[++h];us(v)?c&&s.setProperty(o,v,w):c?s.setAttribute(o,v,w):o.setAttribute(v,w),h++}}return h}function mf(s){return 3===s||4===s||6===s}function us(s){return 64===s.charCodeAt(0)}function fa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||_d(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function _d(s,o,l,c,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===l){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function mi(s){return-1!==s}function Lr(s){return 32767&s}function vt(s,o){let l=function Lt(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let pa=!0;function ga(s){const o=pa;return pa=s,o}let Yu=0;function or(s,o){const l=lo(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,ma(c.data,s),ma(o,null),ma(c.blueprint,null));const h=Tr(s,o),g=s.injectorIndex;if(mi(h)){const v=Lr(h),w=vt(h,o),C=w[1].data;for(let x=0;x<8;x++)o[g+x]=w[v+x]|C[v+x]}return o[g+8]=h,g}function ma(s,o){s.push(0,0,0,0,0,0,0,0,o)}function lo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Tr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(c=2===v?g.declTNode:1===v?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Ya(s,o,l){!function Ms(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(ke)&&(c=l[ke]),null==c&&(c=l[ke]=Yu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function xs(s,o,l){if(l&bt.Optional)return s;Ie(o,"NodeInjector")}function _i(s,o,l,c){if(l&bt.Optional&&void 0===c&&(c=null),0==(l&(bt.Self|bt.Host))){const h=s[9],g=On(void 0);try{return h?h.get(o,c,l&bt.Optional):Js(o,c,l&bt.Optional)}finally{On(g)}}return xs(c,o,l)}function Wl(s,o,l,c=bt.Default,h){if(null!==s){const g=function Oo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ke)?s[ke]:void 0;return"number"==typeof o?o>=0?255&o:Vi:o}(l);if("function"==typeof g){if(!Ul(o,s,c))return c&bt.Host?xs(h,l,c):_i(o,l,c,h);try{const v=g(c);if(null!=v||c&bt.Optional)return v;Ie(l)}finally{jl()}}else if("number"==typeof g){let v=null,w=lo(s,o),C=-1,x=c&bt.Host?o[16][6]:null;for((-1===w||c&bt.SkipSelf)&&(C=-1===w?Tr(s,o):o[w+8],-1!==C&&Qu(c,!1)?(v=o[1],w=Lr(C),o=vt(C,o)):w=-1);-1!==w;){const R=o[1];if(Ja(g,w,R.data)){const V=nm(w,o,l,v,c,x);if(V!==Cn)return V}C=o[w+8],-1!==C&&Qu(c,o[1].data[w+8]===x)&&Ja(g,w,o)?(v=R,w=Lr(C),o=vt(C,o)):w=-1}}}return _i(o,l,c,h)}const Cn={};function Vi(){return new Rs(wn(),xe())}function nm(s,o,l,c,h,g){const v=o[1],w=v.data[s+8],R=_a(w,v,l,null==c?Xc(w)&&pa:c!=v&&0!=(3&w.type),h&bt.Host&&g===w);return null!==R?Qa(o,v,R,w):Cn}function _a(s,o,l,c,h){const g=s.providerIndexes,v=o.data,w=1048575&g,C=s.directiveStart,R=g>>20,$=h?w+R:s.directiveEnd;for(let ee=c?w:w+R;ee<$;ee++){const Ee=v[ee];if(ee<C&&l===Ee||ee>=C&&Ee.type===l)return ee}if(h){const ee=v[C];if(ee&&is(ee)&&ee.type===l)return C}return null}function Qa(s,o,l,c){let h=s[l];const g=o.data;if(function Hl(s){return s instanceof ha}(h)){const v=h;v.resolving&&function We(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${l}`)}(Te(g[l]));const w=ga(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?On(v.injectImpl):null;Ul(s,c,bt.Default);try{h=s[l]=v.factory(void 0,g,s,c),o.firstCreatePass&&l>=c.directiveStart&&function cv(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const v=ia(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==C&&On(C),ga(w),v.resolving=!1,jl()}}return h}function Ja(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Qu(s,o){return!(s&bt.Self||s&bt.Host&&o)}class Rs{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Wl(this._tNode,this._lView,o,c,l)}}function Xa(s){return rr(()=>{const o=s.prototype.constructor,l=o[te]||ya(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[te]||ya(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function ya(s){return ze(s)?()=>{const o=ya(se(s));return o&&o()}:Cr(s)}function el(s){return function zl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const g=l[h];if(mf(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(wn(),s)}const Po="__parameters__";function va(s,o,l){return rr(()=>{const c=function ql(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(C,x,R){const V=C.hasOwnProperty(Po)?C[Po]:Object.defineProperty(C,Po,{value:[]})[Po];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class In{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Xt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _f=new In("AnalyzeForEntryComponents");function Jr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Jr(c,o)):o!==s&&o.push(c)}return o}function Vr(s,o){s.forEach(l=>Array.isArray(l)?Vr(l,o):o(l))}function nl(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function uo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vi(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function Xr(s,o,l){let c=il(s,o);return c>=0?s[1|c]=l:(c=~c,function rl(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Ed(s,o){const l=il(s,o);if(l>=0)return s[1|l]}function il(s,o){return function cs(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const g=c+(h-c>>1),v=s[g<<l];if(o===v)return g<<l;v>o?h=g:c=g+1}return~(h<<l)}(s,o,1)}const ds={},sl="__NG_DI_FLAG__",ol="ngTempTokenPath",S=/\n/gm,U="__source",X=ye({provide:String,useValue:ye});let le;function Fe(s){const o=le;return le=s,o}function rt(s,o=bt.Default){if(void 0===le)throw new Le(203,"");return null===le?Js(s,void 0,o):le.get(s,o&bt.Optional?null:void 0,o)}function it(s,o=bt.Default){return(function Nn(){return ci}()||rt)(se(s),o)}const Kt=it;function St(s){const o=[];for(let l=0;l<s.length;l++){const c=se(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Le(900,"");let h,g=bt.Default;for(let v=0;v<c.length;v++){const w=c[v],C=pr(w);"number"==typeof C?-1===C?h=w.token:g|=C:h=w}o.push(it(h,g))}else o.push(it(c))}return o}function Vn(s,o){return s[sl]=o,s.prototype[sl]=o,s}function pr(s){return s[sl]}const ei=Vn(va("Inject",s=>({token:s})),-1),ar=Vn(va("Optional"),8),Ea=Vn(va("SkipSelf"),4);class Af{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function fo(s){return s instanceof Af?s.changingThisBreaksApplicationSecurity:s}const kf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ul=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function Fd(s){const o=function hc(){const s=xe();return s&&s[12]}();return o?o.sanitize(Gn.URL,s)||"":function Xl(s,o){const l=function Mf(s){return s instanceof Af&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?fo(s):function eu(s){return(s=String(s)).match(kf)||s.match(ul)?s:"unsafe:"+s}(me(s))}const ru="__ngContext__";function nt(s,o){s[ru]=o}function Vd(s){const o=function Lo(s){return s[ru]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Bf(s){return s.ngOriginalError}function Vo(s,...o){s.error(...o)}class be{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function bm(s){return s&&s.ngErrorLogger||Vo}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Bf(o);for(;l&&Bf(l);)l=Bf(l);return l||null}}const Bo=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function y(s){return s instanceof Function?s():s}var O=(()=>((O=O||{})[O.Important=1]="Important",O[O.DashCase=2]="DashCase",O))();function ce(s,o){return undefined(s,o)}function dt(s){const o=s[3];return ki(o)?o[3]:o}function Un(s){return jf(s[13])}function gs(s){return jf(s[4])}function jf(s){for(;null!==s&&!ki(s);)s=s[4];return s}function Uo(s,o,l,c,h){if(null!=c){let g,v=!1;ki(c)?g=c:Pr(c)&&(v=!0,c=c[0]);const w=rn(c);0===s&&null!==l?null==h?Dv(o,l,w):au(o,l,w,h||null,!0):1===s&&null!==l?au(o,l,w,h||null,!0):2===s?function Rm(s,o,l){const c=qf(s,o);c&&function yw(s,o,l,c){gn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function iA(s,o,l,c,h){const g=l[7];g!==rn(l)&&Uo(o,s,c,g,h);for(let w=10;w<l.length;w++){const C=l[w];Qf(C[1],C,s,o,c,g)}}(o,s,g,l,h)}}function $d(s,o,l){if(gn(s))return s.createElement(o,l);{const c=null!==l?function Lu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function pc(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,la(h,-1)),l.splice(c,1)}function wv(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&pc(h,c),o>0&&(s[l-1][4]=c[4]);const g=uo(s,10+o);!function $f(s,o){Qf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function zd(s,o){if(!(256&o[2])){const l=o[11];gn(l)&&l.destroyNode&&Qf(s,o,l,3,null,null),function Gd(s){let o=s[13];if(!o)return Cv(s[1],s);for(;o;){let l=null;if(Pr(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Pr(o)&&Cv(o[1],o),o=o[3];null===o&&(o=s),Pr(o)&&Cv(o[1],o),l=o&&o[4]}o=l}}(o)}}function Cv(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function zf(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof ha)){const g=l[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],C=g[v+1];try{C.call(w)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function rA(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(o):rn(o[v]),C=c[h=l[g+2]],x=l[g+3];"boolean"==typeof x?w.removeEventListener(l[g],C,x):x>=0?c[h=x]():c[h=-x].unsubscribe(),g+=2}else{const v=c[h=l[g+1]];l[g].call(v)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();o[7]=null}}(s,o),1===o[1].type&&gn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ki(o[3])){l!==o[3]&&pc(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Wf(s,o,l){return function Iv(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Yt.None||h===Yt.Emulated)return null}return hr(c,l)}(s,o.parent,l)}function au(s,o,l,c,h){gn(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function Dv(s,o,l){gn(s)?s.appendChild(o,l):o.appendChild(l)}function Tv(s,o,l,c,h){null!==c?au(s,o,l,c,h):Dv(s,o,l)}function qf(s,o){return gn(s)?s.parentNode(o):o.parentNode}function Sm(s,o,l){return Sv(s,o,l)}let Sv=function Av(s,o,l){return 40&s.type?hr(s,l):null};function Zf(s,o,l,c){const h=Wf(s,c,o),g=o[11],w=Sm(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)Tv(g,h,l[C],w,!1);else Tv(g,h,l,w,!1)}function Mm(s,o){if(null!==o){const l=o.type;if(3&l)return hr(o,s);if(4&l)return Yf(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Mm(s,c);{const h=s[o.index];return ki(h)?Yf(-1,h):rn(h)}}if(32&l)return ce(o,s)()||rn(s[o.index]);{const c=xm(s,o);return null!==c?Array.isArray(c)?c[0]:Mm(dt(s[16]),c):Mm(s,o.next)}}return null}function xm(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Yf(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return Mm(c,h)}return o[7]}function Mv(s,o,l,c,h,g,v){for(;null!=l;){const w=c[l.index],C=l.type;if(v&&0===o&&(w&&nt(rn(w),c),l.flags|=4),64!=(64&l.flags))if(8&C)Mv(s,o,l.child,c,h,g,!1),Uo(o,s,h,w,g);else if(32&C){const x=ce(l,c);let R;for(;R=x();)Uo(o,s,h,R,g);Uo(o,s,h,w,g)}else 16&C?ww(s,o,c,l,h,g):Uo(o,s,h,w,g);l=v?l.projectionNext:l.next}}function Qf(s,o,l,c,h,g){Mv(l,c,s.firstChild,o,h,g,!1)}function ww(s,o,l,c,h,g){const v=l[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)Uo(o,s,h,C[x],g);else Mv(s,o,C,v[3],h,g,!0)}function xv(s,o,l){gn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Nm(s,o,l){gn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Rv(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}l=h+1}}const Cw="ng-template";function oA(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==Rv(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Iw(s){return 4===s.type&&s.value!==Cw}function aA(s,o,l){return o===(4!==s.type||l?s.value:Cw)}function Dw(s,o,l){let c=4;const h=s.attrs||[],g=function lu(s){for(let o=0;o<s.length;o++)if(mf(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!aA(s,C,l)||""===C&&1===o.length){if(po(c))return!1;v=!0}}else{const x=8&c?C:o[++w];if(8&c&&null!==s.attrs){if(!oA(s.attrs,x,l)){if(po(c))return!1;v=!0}continue}const V=lA(8&c?"class":C,h,Iw(s),l);if(-1===V){if(po(c))return!1;v=!0;continue}if(""!==x){let $;$=V>g?"":h[V+1].toLowerCase();const ee=8&c?$:null;if(ee&&-1!==Rv(ee,x,0)||2&c&&x!==$){if(po(c))return!1;v=!0}}}}else{if(!v&&!po(c)&&!po(C))return!1;if(v&&po(C))continue;v=!1,c=C|1&c}}return po(c)||v}function po(s){return 0==(1&s)}function lA(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function Nv(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Tw(s,o,l=!1){for(let c=0;c<o.length;c++)if(Dw(s,o[c],l))return!0;return!1}function cA(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Aw(s,o){return s?":not("+o.trim()+")":o}function km(s){let o=s[0],l=1,c=2,h="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const w=s[++l];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!po(v)&&(o+=Aw(g,h),h=""),c=v,g=g||!po(c);l++}return""!==h&&(o+=Aw(g,h)),o}const Ot={};function Mw(s){xw(jt(),xe(),sr()+s,!1)}function xw(s,o,l,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&As(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Ro(o,g,0,l)}xo(l)}function qd(s,o){return s<<17|o<<2}function go(s){return s>>17&32767}function kv(s){return 2|s}function Ia(s){return(131068&s)>>2}function Om(s,o){return-131069&s|o<<2}function Pm(s){return 1|s}function Vw(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],g=l[c+1];if(-1!==g){const v=s.data[g];dd(h),v.contentQueries(2,o[g],g)}}}function mc(s,o,l,c,h,g,v,w,C,x){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,ls(R),R[3]=R[15]=s,R[8]=l,R[10]=v||s&&s[10],R[11]=w||s&&s[11],R[12]=C||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=g,R[16]=2==o.type?s[16]:R,R}function du(s,o,l,c,h){let g=s.data[o];if(null===g)g=function Bv(s,o,l,c,h){const g=Ol(),v=$u(),C=s.data[o]=function fl(s,o,l,c,h,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,l,c,h),function Wu(){return Et.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=h;const v=function So(){const s=Et.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return pi(g,!0),g}function _c(s,o,l,c){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Yd(s,o,l){Mo(o);try{const c=s.viewQuery;null!==c&&Yv(1,c,l);const h=s.template;null!==h&&Uv(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Vw(s,o),s.staticViewQueries&&Yv(2,s.viewQuery,l);const g=s.components;null!==g&&function gA(s,o){for(let l=0;l<o.length;l++)Ww(s,o[l])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Yr()}}function yc(s,o,l,c){const h=o[2];if(256!=(256&h)){Mo(o);try{ls(o),function Pl(s){return Et.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Uv(s,o,l,2,c);const v=3==(3&h);if(v){const x=s.preOrderCheckHooks;null!==x&&As(o,x,null)}else{const x=s.preOrderHooks;null!==x&&Ro(o,x,0,null),Xn(o,0)}if(function IA(s){for(let o=Un(s);null!==o;o=gs(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],g=h[3];0==(1024&h[2])&&la(g,1),h[2]|=1024}}}(o),function Zv(s){for(let o=Un(s);null!==o;o=gs(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];Ds(c)&&yc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Vw(s,o),v){const x=s.contentCheckHooks;null!==x&&As(o,x)}else{const x=s.contentHooks;null!==x&&Ro(o,x,1),Xn(o,1)}!function $o(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)xo(~h);else{const g=h,v=l[++c],w=l[++c];Ll(v,g),w(2,o[g])}}}finally{xo(-1)}}(s,o);const w=s.components;null!==w&&function ms(s,o){for(let l=0;l<o.length;l++)Wm(s,o[l])}(o,w);const C=s.viewQuery;if(null!==C&&Yv(2,C,c),v){const x=s.viewCheckHooks;null!==x&&As(o,x)}else{const x=s.viewHooks;null!==x&&Ro(o,x,2),Xn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,la(o[3],-1))}finally{Yr()}}}function Qd(s,o,l,c){const h=o[10],v=To(o);try{!v&&h.begin&&h.begin(),v&&Yd(s,o,c),yc(s,o,l,c)}finally{!v&&h.end&&h.end()}}function Uv(s,o,l,c,h){const g=sr(),v=2&c;try{xo(-1),v&&o.length>20&&xw(s,o,20,!1),l(c,h)}finally{xo(g)}}function jv(s,o,l){if(Ml(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function Hv(s,o,l){!kl()||(function Hw(s,o,l,c){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||or(l,o),nt(c,o);const v=l.initialInputs;for(let w=h;w<g;w++){const C=s.data[w],x=is(C);x&&EA(o,l,C);const R=Qa(o,s,w,l);nt(R,o),null!==v&&wA(0,w-h,R,C,0,v),x&&(fr(l.index,o)[8]=R)}}(s,o,l,hr(l,o)),128==(128&l.flags)&&function $w(s,o,l){const c=l.directiveStart,h=l.directiveEnd,v=l.index,w=function qu(){return Et.lFrame.currentDirectiveIndex}();try{xo(v);for(let C=c;C<h;C++){const x=s.data[C],R=o[C];ca(C),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&qv(x,R)}}finally{xo(-1),ca(w)}}(s,o,l))}function $v(s,o,l=hr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],w=-1===v?l(o,s):s[v];s[h++]=w}}}function Bw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=yn(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function yn(s,o,l,c,h,g,v,w,C,x){const R=20+c,V=R+h,$=function mA(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Ot);return l}(R,V),ee="function"==typeof x?x():x;return $[1]={type:s,blueprint:$,template:l,queries:null,viewQuery:w,declTNode:o,data:$.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function vc(s,o,l,c){const h=Fs(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&Ym(s).push(c,h.length-1))}function Jd(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function ni(s,o,l,c,h,g,v,w){const C=hr(o,l);let R,x=o.inputs;!w&&null!=x&&(R=x[c])?(ip(s,l,R,c,h),Xc(o)&&function yA(s,o){const l=fr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function _A(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,gn(g)?g.setProperty(C,c,h):us(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function Gm(s,o,l,c){let h=!1;if(kl()){const g=function Xd(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Tw(l,v.selectors,!1)&&(h||(h=[]),Ya(or(l,o),s,v.type),is(v)?(eh(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===c?null:{"":-1};if(null!==g){h=!0,zm(l,s.data.length,g.length);for(let R=0;R<g.length;R++){const V=g[R];V.providersResolver&&V.providersResolver(V)}let w=!1,C=!1,x=_c(s,o,g.length,null);for(let R=0;R<g.length;R++){const V=g[R];l.mergedAttrs=fa(l.mergedAttrs,V.hostAttrs),th(s,l,o,x,V),bA(x,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const $=V.type.prototype;!w&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),x++}!function Pt(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,v=[];let w=null,C=null;for(let x=o.directiveStart;x<c;x++){const R=h[x],V=R.inputs,$=null===g||Iw(o)?null:CA(V,g);v.push($),w=Jd(V,x,w),C=Jd(R.outputs,x,C)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=C}(s,l)}v&&function tp(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new Le(-301,!1);c.push(o[h],g)}}}(l,c,v)}return l.mergedAttrs=fa(l.mergedAttrs,l.attrs),h}function Wv(s,o,l,c,h,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~o.index;(function vA(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(w)!=C&&w.push(C),w.push(c,h,v)}}function qv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function eh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function bA(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;is(o)&&(l[""]=s)}}function zm(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function th(s,o,l,c,h){s.data[c]=h;const g=h.factory||(h.factory=Cr(h.type)),v=new ha(g,is(h),null);s.blueprint[c]=v,l[c]=v,Wv(s,o,0,c,_c(s,l,h.hostVars,Ot),h)}function EA(s,o,l){const c=hr(o,s),h=Bw(l),g=s[10],v=Zm(s,mc(s,h,null,l.onPush?64:16,c,o,g,g.createRenderer(c,l),null,null));s[o.index]=v}function Ps(s,o,l,c,h,g){const v=hr(s,o);!function Kv(s,o,l,c,h,g,v){if(null==g)gn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const w=null==v?me(g):v(g,c||"",h);gn(s)?s.setAttribute(o,h,w,l):l?o.setAttributeNS(l,h,w):o.setAttribute(h,w)}}(o[11],v,g,s.value,l,c,h)}function wA(s,o,l,c,h,g){const v=g[o];if(null!==v){const w=c.setInput;for(let C=0;C<v.length;){const x=v[C++],R=v[C++],V=v[C++];null!==w?c.setInput(l,V,x,R):l[R]=V}}}function CA(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function zw(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function Wm(s,o){const l=fr(o,s);if(Ds(l)){const c=l[1];80&l[2]?yc(c,l,c.template,l[8]):l[5]>0&&qm(l)}}function qm(s){for(let c=Un(s);null!==c;c=gs(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const v=g[1];yc(v,g,v.template,g[8])}else g[5]>0&&qm(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=fr(l[c],s);Ds(h)&&h[5]>0&&qm(h)}}function Ww(s,o){const l=fr(o,s),c=l[1];(function Km(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Yd(c,l,l[8])}function Zm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function nh(s){for(;s;){s[2]|=64;const o=dt(s);if(ku(s)&&!o)return s;s=o}return null}function qw(s){!function np(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=Vd(l),h=c[1];Qd(h,c,h.template,l)}}(s[8])}function Yv(s,o,l){dd(0),o(s,l)}const TA=(()=>Promise.resolve(null))();function Fs(s){return s[7]||(s[7]=[])}function Ym(s){return s.cleanup||(s.cleanup=[])}function Jm(s,o){const l=s[9],c=l?l.get(be,null):null;c&&c.handleError(o)}function ip(s,o,l,c,h){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],C=o[v],x=s.data[v];null!==x.setInput?x.setInput(C,h,c,w):C[w]=h}}function Ls(s,o,l){const c=so(o,s);!function zn(s,o,l){gn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function Ta(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?h=pe(h,w):2==g&&(c=pe(c,w+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const Qv=new In("INJECTOR",-1);class sh{get(o,l=ds){if(l===ds){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return l}}const Jv=new In("Set Injector scope."),sp={},Xm={};let bc;function Xv(){return void 0===bc&&(bc=new sh),bc}function op(s,o=null,l=null,c){const h=fu(s,o,l,c);return h._resolveInjectorDefTypes(),h}function fu(s,o=null,l=null,c){return new eb(s,l,o||Xv(),c)}class eb{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&Vr(l,w=>this.processProvider(w,o,l)),Vr([o],w=>this.processInjectorType(w,[],g)),this.records.set(Qv,pu(void 0,this));const v=this.records.get(Jv);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:de(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=ds,c=bt.Default){this.assertNotDestroyed();const h=Fe(this),g=On(void 0);try{if(!(c&bt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=function Kw(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(o)&&Ut(o);w=C&&this.injectableDefInScope(C)?pu(tb(o),sp):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&bt.Self?Xv():this.parent).get(o,l=c&bt.Optional&&l===ds?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[ol]=v[ol]||[]).unshift(de(o)),h)throw v;return function ho(s,o,l,c){const h=s[ol];throw o[U]&&h.unshift(o[U]),s.message=function hs(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=de(o);if(Array.isArray(o))h=o.map(de).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):de(w)))}h=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(S,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[ol]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{On(g),Fe(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(de(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,l,c){if(!(o=se(o)))return!1;let h=Nr(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==c.indexOf(v);if(void 0!==g&&(h=Nr(g)),null==h)return!1;if(null!=h.imports&&!w){let R;c.push(v);try{Vr(h.imports,V=>{this.processInjectorType(V,l,c)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:$,providers:ee}=R[V];Vr(ee,Ee=>this.processProvider(Ee,$,ee||H))}}this.injectorDefTypes.add(v);const C=Cr(v)||(()=>new v);this.records.set(v,pu(C,sp));const x=h.providers;if(null!=x&&!w){const R=o;Vr(x,V=>this.processProvider(V,R,x))}return void 0!==g&&void 0!==o.providers}processProvider(o,l,c){let h=wc(o=se(o))?o:se(o&&o.provide);const g=function Go(s,o,l){return nb(s)?pu(void 0,s.useValue):pu(oh(s),sp)}(o);if(wc(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=pu(void 0,sp,!0),v.factory=()=>St(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,l){return l.value===sp&&(l.value=Xm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function ah(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=se(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function tb(s){const o=Ut(s),l=null!==o?o.factory:Cr(s);if(null!==l)return l;if(s instanceof In)throw new Le(204,!1);if(s instanceof Function)return function Mn(s){const o=s.length;if(o>0)throw vi(o,"?"),new Le(204,!1);const l=function ui(s){const o=s&&(s[es]||s[zr]);if(o){const l=function yr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Le(204,!1)}function oh(s,o,l){let c;if(wc(s)){const h=se(s);return Cr(h)||tb(h)}if(nb(s))c=()=>se(s.useValue);else if(function Ec(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...St(s.deps||[]));else if(function rb(s){return!(!s||!s.useExisting)}(s))c=()=>it(se(s.useExisting));else{const h=se(s&&(s.useClass||s.provide));if(!function ib(s){return!!s.deps}(s))return Cr(h)||tb(h);c=()=>new h(...St(s.deps))}return c}function pu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function nb(s){return null!==s&&"object"==typeof s&&X in s}function wc(s){return"function"==typeof s}let Vs=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return op({name:""},c,l,"");{const g=null!==(h=l.name)&&void 0!==h?h:"";return op({name:g},l.parent,l.providers,g)}}}return s.THROW_IF_NOT_FOUND=ds,s.NULL=new sh,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>it(Qv)}),s.__NG_ELEMENT_ID__=-1,s})();function NA(s,o){Za(Vd(s)[1],wn())}function lb(s){let o=function aC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(is(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Le(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const v=s;v.inputs=lh(s.inputs),v.declaredInputs=lh(s.declaredInputs),v.outputs=lh(s.outputs);const w=h.hostBindings;w&&kA(s,w);const C=h.viewQuery,x=h.contentQueries;if(C&&ub(s,C),x&&uC(s,x),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),is(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===lb&&(l=!1)}}o=Object.getPrototypeOf(o)}!function lC(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=fa(h.hostAttrs,l=fa(l,h.hostAttrs))}}(c)}function lh(s){return s===Er?{}:s===H?[]:s}function ub(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function uC(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,g)=>{o(c,h,g),l(c,h,g)}:o}function kA(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let t_=null;function uh(){if(!t_){const s=Wt.Symbol;if(s&&s.iterator)t_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(t_=c)}}}return t_}function up(s){return!!n_(s)&&(Array.isArray(s)||!(s instanceof Map)&&uh()in s)}function n_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ri(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function r_(s,o,l,c){const h=xe();return ri(h,ao(),o)&&(jt(),Ps($n(),h,s,o,l,c)),r_}function pC(s,o,l,c,h,g,v,w){const C=xe(),x=jt(),R=s+20,V=x.firstCreatePass?function pb(s,o,l,c,h,g,v,w,C){const x=o.consts,R=du(o,s,4,v||null,Oi(x,w));Gm(o,l,R,Oi(x,C)),Za(o,R);const V=R.tViews=yn(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,x,C,o,l,c,h,g,v):x.data[R];pi(V,!1);const $=C[11].createComment("");Zf(x,C,$,V),nt($,C),Zm(C,C[R]=zw($,C,$,V)),rs(V)&&Hv(x,C,V),null!=v&&$v(C,V,w)}function Ac(s,o=bt.Default){const l=xe();return null===l?it(s,o):Wl(wn(),l,se(s),o)}function IC(){throw new Error("invalid")}function Db(s,o,l){const c=xe();return ri(c,ao(),o)&&ni(jt(),$n(),c,s,o,c[11],l,!1),Db}function Tb(s,o,l,c,h){const v=h?"class":"style";ip(s,l,o.inputs[v],v,c)}function Sc(s,o,l,c){const h=xe(),g=jt(),v=20+s,w=h[11],C=h[v]=$d(w,o,function Jg(){return Et.lFrame.currentNamespace}()),x=g.firstCreatePass?function Ab(s,o,l,c,h,g,v){const w=o.consts,x=du(o,s,2,h,Oi(w,g));return Gm(o,l,x,Oi(w,v)),null!==x.attrs&&Ta(x,x.attrs,!1),null!==x.mergedAttrs&&Ta(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,g,h,0,o,l,c):g.data[v];pi(x,!0);const R=x.mergedAttrs;null!==R&&ko(w,C,R);const V=x.classes;null!==V&&Nm(w,C,V);const $=x.styles;return null!==$&&xv(w,C,$),64!=(64&x.flags)&&Zf(g,h,C,x),0===function Ka(){return Et.lFrame.elementDepthCount}()&&nt(C,h),function ju(){Et.lFrame.elementDepthCount++}(),rs(x)&&(Hv(g,h,x),jv(g,x,h)),null!==c&&$v(h,x),Sc}function mp(){let s=wn();$u()?Gu():(s=s.parent,pi(s,!1));const o=s;!function Nl(){Et.lFrame.elementDepthCount--}();const l=jt();return l.firstCreatePass&&(Za(l,s),Ml(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function tm(s){return 0!=(16&s.flags)}(o)&&Tb(l,o,xe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function An(s){return 0!=(32&s.flags)}(o)&&Tb(l,o,xe(),o.stylesWithoutHost,!1),mp}function Sb(s,o,l,c){return Sc(s,o,l,c),mp(),Sb}function yu(s,o,l){const c=xe(),h=jt(),g=s+20,v=h.firstCreatePass?function Sa(s,o,l,c,h){const g=o.consts,v=Oi(g,c),w=du(o,s,8,"ng-container",v);return null!==v&&Ta(w,v,!0),Gm(o,l,w,Oi(g,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(g,h,c,o,l):h.data[g];pi(v,!0);const w=c[g]=c[11].createComment("");return Zf(h,c,w,v),nt(w,c),rs(v)&&(Hv(h,c,v),jv(h,v,c)),null!=l&&$v(c,v),yu}function g_(){let s=wn();const o=jt();return $u()?Gu():(s=s.parent,pi(s,!1)),o.firstCreatePass&&(Za(o,s),Ml(s)&&o.queries.elementEnd(s)),g_}function m_(){return xe()}function Mc(s){return!!s&&"function"==typeof s.then}function yh(s){return!!s&&"function"==typeof s.subscribe}const DC=yh;function _s(s,o,l,c){const h=xe(),g=jt(),v=wn();return function _p(s,o,l,c,h,g,v,w){const C=rs(c),R=s.firstCreatePass&&Ym(s),V=o[8],$=Fs(o);let ee=!0;if(3&c.type||w){const Ge=hr(c,o),tt=w?w(Ge):Ge,Me=$.length,yt=w?Vt=>w(rn(Vt[c.index])):c.index;if(gn(l)){let Vt=null;if(!w&&C&&(Vt=function GA(s,o,l,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===c){const w=o[7],C=h[g+2];return w.length>C?w[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=g,Vt.__ngLastListenerFn__=g,ee=!1;else{g=ys(c,o,V,g,!1);const en=l.listen(tt,h,g);$.push(g,en),R&&R.push(h,yt,Me,Me+1)}}else g=ys(c,o,V,g,!0),tt.addEventListener(h,g,v),$.push(g),R&&R.push(h,yt,Me,v)}else g=ys(c,o,V,g,!1);const Ee=c.outputs;let Be;if(ee&&null!==Ee&&(Be=Ee[h])){const Ge=Be.length;if(Ge)for(let tt=0;tt<Ge;tt+=2){const zs=o[Be[tt]][Be[tt+1]].subscribe(g),Rn=$.length;$.push(g,zs),R&&R.push(h,c.index,Rn,-(Rn+1))}}}(g,h,h[11],v,s,o,!!l,c),_s}function __(s,o,l,c){try{return!1!==l(c)}catch(h){return Jm(s,h),!1}}function ys(s,o,l,c,h){return function g(v){if(v===Function)return c;const w=2&s.flags?fr(s.index,o):o;0==(32&o[2])&&nh(w);let C=__(o,0,c,v),x=g.__ngNextListenerFn__;for(;x;)C=__(o,0,x,v)&&C,x=x.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Rb(s=1){return function pf(s){return(Et.lFrame.contextLView=function Ku(s,o){for(;s>0;)o=o[15],s--;return o}(s,Et.lFrame.contextLView))[8]}(s)}function zA(s,o){let l=null;const c=function uA(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const g=o[h];if("*"!==g){if(null===c?Tw(s,g,!0):cA(c,g))return h}else l=h}return l}function Nb(s){const o=xe()[16][6];if(!o.projection){const c=o.projection=vi(s?s.length:1,null),h=c.slice();let g=o.child;for(;null!==g;){const v=s?zA(g,s):0;null!==v&&(h[v]?h[v].projectionNext=g:c[v]=g,h[v]=g),g=g.next}}}function TC(s,o=0,l){const c=xe(),h=jt(),g=du(h,20+s,16,null,l||null);null===g.projection&&(g.projection=o),Gu(),64!=(64&g.flags)&&function Ew(s,o,l){ww(o[11],0,o,l,Wf(s,l,o),Sm(l.parent||o[6],l,o))}(h,c,g)}function RC(s,o,l,c,h){const g=s[l+1],v=null===o;let w=c?go(g):Ia(g),C=!1;for(;0!==w&&(!1===C||v);){const R=s[w+1];NC(s[w],o)&&(C=!0,s[w+1]=c?Pm(R):kv(R)),w=c?go(R):Ia(R)}C&&(s[l+1]=c?kv(g):Pm(g))}function NC(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&il(s,o)>=0}function b_(s,o){return function zo(s,o,l,c){const h=xe(),g=jt(),v=function Pi(s){const o=Et.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);g.firstUpdatePass&&function $b(s,o,l,c){const h=s.data;if(null===h[l+1]){const g=h[sr()],v=function FC(s,o){return o>=s.expandoStartIndex}(s,l);(function UC(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function LC(s,o,l,c){const h=function Vl(s){const o=Et.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=_o(l=wh(null,s,o,l,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=wh(h,s,o,l,c),null===g){let C=function VC(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Ia(c))return s[go(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=wh(null,s,o,C[1],c),C=_o(C,o.attrs,c),function BC(s,o,l,c){s[go(l?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function vs(s,o,l){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=_o(c,s[g].hostAttrs,l);return _o(c,o.attrs,l)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,c),function WA(s,o,l,c,h,g){let v=g?o.classBindings:o.styleBindings,w=go(v),C=Ia(v);s[c]=l;let R,x=!1;if(Array.isArray(l)){const V=l;R=V[1],(null===R||il(V,R)>0)&&(x=!0)}else R=l;if(h)if(0!==C){const $=go(s[w+1]);s[c+1]=qd($,w),0!==$&&(s[$+1]=Om(s[$+1],c)),s[w+1]=function kw(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=qd(w,0),0!==w&&(s[w+1]=Om(s[w+1],c)),w=c;else s[c+1]=qd(C,0),0===w?w=c:s[C+1]=Om(s[C+1],c),C=c;x&&(s[c+1]=kv(s[c+1])),RC(s,R,c,!0),RC(s,R,c,!1),function qA(s,o,l,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&il(g,o)>=0&&(l[c+1]=Pm(l[c+1]))}(o,R,s,c,g),v=qd(w,C),g?o.classBindings=v:o.styleBindings=v}(h,g,o,l,v,c)}}(g,s,v,c),o!==Ot&&ri(h,v,o)&&function Gb(s,o,l,c,h,g,v,w){if(!(3&o.type))return;const C=s.data,x=C[w+1];xa(function Ov(s){return 1==(1&s)}(x)?zb(C,o,l,h,Ia(x),v):void 0)||(xa(g)||function Nw(s){return 2==(2&s)}(x)&&(g=zb(C,null,l,h,w,v)),function sA(s,o,l,c,h){const g=gn(s);if(o)h?g?s.addClass(l,c):l.classList.add(c):g?s.removeClass(l,c):l.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:O.DashCase;if(null==h)g?s.removeStyle(l,c,v):l.style.removeProperty(c);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=O.Important),g?s.setStyle(l,c,h,v):l.style.setProperty(c,h,w?"important":"")}}}(c,v,so(sr(),l),h,g))}(g,g.data[sr()],h,h[11],s,h[v+1]=function Ek(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(fo(s)))),s}(o,l),c,v)}(s,o,null,!0),b_}function wh(s,o,l,c,h){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=o[w],c=_o(c,g.hostAttrs,h),g!==s);)w++;return null!==s&&(l.directiveStylingLast=w),c}function _o(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xr(s,v,!!l||o[++g]))}return void 0===s?null:s}function zb(s,o,l,c,h,g){const v=null===o;let w;for(;h>0;){const C=s[h],x=Array.isArray(C),R=x?C[1]:C,V=null===R;let $=l[h+1];$===Ot&&($=V?H:void 0);let ee=V?Ed($,c):R===c?$:void 0;if(x&&!xa(ee)&&(ee=Ed(C,c)),xa(ee)&&(w=ee,v))return w;const Ee=s[h+1];h=v?go(Ee):Ia(Ee)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(w=Ed(C,c))}return w}function xa(s){return void 0!==s}function jC(s,o=""){const l=xe(),c=jt(),h=s+20,g=c.firstCreatePass?du(c,h,1,o,null):c.data[h],v=l[h]=function fc(s,o){return gn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Zf(c,l,v,g),pi(g,!1)}function vp(s){return w_("",s,""),vp}function w_(s,o,l){const c=xe(),h=function hh(s,o,l,c){return ri(s,ao(),l)?o+me(l)+c:Ot}(c,s,o,l);return h!==Ot&&Ls(c,sr(),h),w_}function $s(s,o,l){const c=xe();return ri(c,ao(),o)&&ni(jt(),$n(),c,s,o,c[11],l,!0),$s}const ml=void 0;var lS=["en",[["a","p"],["AM","PM"],ml],[["AM","PM"],ml,ml],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ml,"{1} 'at' {0}",ml],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aI(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Nc={};function qb(s){const o=function Dk(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Kb(o);if(l)return l;const c=o.split("-")[0];if(l=Kb(c),l)return l;if("en"===c)return lS;throw new Error(`Missing locale data for the locale "${s}".`)}function lI(s){return qb(s)[It.PluralCase]}function Kb(s){return s in Nc||(Nc[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),Nc[s]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const I_="en-US";let uI=I_;function F_(s,o,l,c,h){if(s=se(s),Array.isArray(s))for(let g=0;g<s.length;g++)F_(s[g],o,l,c,h);else{const g=jt(),v=xe();let w=wc(s)?s:se(s.provide),C=oh(s);const x=wn(),R=1048575&x.providerIndexes,V=x.directiveStart,$=x.providerIndexes>>20;if(wc(s)||!s.multi){const ee=new ha(C,h,Ac),Ee=Xb(w,o,h?R:R+$,V);-1===Ee?(Ya(or(x,v),g,w),Th(g,s,o.length),o.push(w),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(ee),v.push(ee)):(l[Ee]=ee,v[Ee]=ee)}else{const ee=Xb(w,o,R+$,V),Ee=Xb(w,o,R,R+$),Be=ee>=0&&l[ee],Ge=Ee>=0&&l[Ee];if(h&&!Ge||!h&&!Be){Ya(or(x,v),g,w);const tt=function II(s,o,l,c,h){const g=new ha(s,l,Ac);return g.multi=[],g.index=o,g.componentProviders=0,Jb(g,h,c&&!l),g}(h?jS:US,l.length,h,c,C);!h&&Ge&&(l[Ee].providerFactory=tt),Th(g,s,o.length,0),o.push(w),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(tt),v.push(tt)}else Th(g,s,ee>-1?ee:Ee,Jb(l[h?Ee:ee],C,!h&&c));!h&&c&&Ge&&l[Ee].componentProviders++}}}function Th(s,o,l,c){const h=wc(o),g=function gu(s){return!!s.useClass}(o);if(h||g){const C=(g?se(o.useClass):o).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=x.indexOf(l);-1===R?x.push(l,[c,C]):x[R+1].push(c,C)}else x.push(l,C)}}}function Jb(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Xb(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function US(s,o,l,c){return eE(this.multi,[])}function jS(s,o,l,c){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Qa(l,l[1],this.providerFactory.index,c);g=w.slice(0,v),eE(h,g);for(let C=v;C<w.length;C++)g.push(w[C])}else g=[],eE(h,g);return g}function eE(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function L_(s,o=[]){return l=>{l.providersResolver=(c,h)=>function xp(s,o,l){const c=jt();if(c.firstCreatePass){const h=is(s);F_(l,c.data,c.blueprint,h,!0),F_(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class V_{}class tE{resolveComponentFactory(o){throw function TI(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Rp=(()=>{class s{}return s.NULL=new tE,s})();function HS(){return bu(wn(),xe())}function bu(s,o){return new Sh(hr(s,o))}let Sh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=HS,s})();function AI(s){return s instanceof Sh?s.nativeElement:s}class MI{}let $S=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function B_(){const s=xe(),l=fr(wn().index,s);return function GS(s){return s[11]}(Pr(l)?l:s)}(),s})(),nE=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class U_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const j_=new U_("13.3.10"),H_={};function $_(s,o,l,c,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&c.push(rn(g)),ki(g))for(let w=10;w<g.length;w++){const C=g[w],x=C[1].firstChild;null!==x&&$_(C[1],C,x,c)}const v=l.type;if(8&v)$_(s,o,l.child,c);else if(32&v){const w=ce(l,o);let C;for(;C=w();)c.push(C)}else if(16&v){const w=xm(o,l);if(Array.isArray(w))c.push(...w);else{const C=dt(o[16]);$_(C[1],C,w,c,!0)}}l=h?l.projectionNext:l.next}return c}class Mh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return $_(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ki(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(wv(o,c),uo(l,c))}this._attachedToViewContainer=!1}zd(this._lView[1],this._lView)}onDestroy(o){vc(this._lView[1],this._lView,null,o)}markForCheck(){nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function rp(s,o,l){const c=o[10];c.begin&&c.begin();try{yc(s,o,s.template,l)}catch(h){throw Jm(o,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ev(s,o){Qf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class G_ extends Mh{constructor(o){super(o),this._view=o}detectChanges(){qw(this._view)}checkNoChanges(){}get context(){return null}}class xI extends Rp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Qn(o);return new rE(l,this.ngModule)}}function RI(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class rE extends V_{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Wd(s){return s.map(km).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return RI(this.componentDef.inputs)}get outputs(){return RI(this.componentDef.outputs)}create(o,l,c,h){const g=(h=h||this.ngModule)?function WS(s,o){return{get:(l,c,h)=>{const g=s.get(l,H_,h);return g!==H_||c===H_?g:o.get(l,c,h)}}}(o,h.injector):o,v=g.get(MI,za),w=g.get(nE,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=c?function Hm(s,o,l){if(gn(s))return s.selectRootElement(o,l===Yt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):$d(v.createRenderer(null,this.componentDef),x,function zS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),V=this.componentDef.onPush?576:528,$=function e_(s,o){return{components:[],scheduler:s||Bo,clean:TA,playerHandler:o||null,flags:0}}(),ee=yn(0,null,null,1,0,null,null,null,null,null),Ee=mc(null,ee,$,V,null,null,v,C,w,g);let Be,Ge;Mo(Ee);try{const tt=function oC(s,o,l,c,h,g){const v=l[1];l[20]=s;const C=du(v,20,2,"#host",null),x=C.mergedAttrs=o.hostAttrs;null!==x&&(Ta(C,x,!0),null!==s&&(ko(h,s,x),null!==C.classes&&Nm(h,s,C.classes),null!==C.styles&&xv(h,s,C.styles)));const R=c.createRenderer(s,o),V=mc(l,Bw(o),null,o.onPush?64:16,l[20],C,c,R,g||null,null);return v.firstCreatePass&&(Ya(or(C,l),v,o.type),eh(v,C),zm(C,l.length,1)),Zm(l,V),l[20]=V}(R,this.componentDef,Ee,v,C);if(R)if(c)ko(C,R,["ng-version",j_.full]);else{const{attrs:Me,classes:yt}=function Sw(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&l.push(g);else{if(!po(h))break;h=g}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Me&&ko(C,R,Me),yt&&yt.length>0&&Nm(C,R,yt.join(" "))}if(Ge=Tn(ee,20),void 0!==l){const Me=Ge.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Vt=l[yt];Me.push(null!=Vt?Array.from(Vt):null)}}Be=function ab(s,o,l,c,h){const g=l[1],v=function zv(s,o,l){const c=wn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),th(s,c,o,_c(s,o,1,null),l));const h=Qa(o,s,c.directiveStart,c);nt(h,o);const g=hr(c,o);return g&&nt(g,o),h}(g,l,o);if(c.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=wn();o.contentQueries(1,v,C.directiveStart)}const w=wn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(xo(w.index),Wv(l[1],w,0,w.directiveStart,w.directiveEnd,o),qv(o,v)),v}(tt,this.componentDef,Ee,$,[NA]),Yd(ee,Ee,null)}finally{Yr()}return new KS(this.componentType,Be,bu(Ge,Ee),Ee,Ge)}}class KS extends class DI{}{constructor(o,l,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new G_(h),this.componentType=o}get injector(){return new Rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class xh{}class Np{}const kc=new Map;class iE extends xh{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xI(this);const c=Jn(o);this._bootstrapComponents=y(c.bootstrap),this._r3Injector=fu(o,l,[{provide:xh,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],de(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=Vs.THROW_IF_NOT_FOUND,c=bt.Default){return o===Vs||o===xh||o===Qv?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class W_ extends Np{constructor(o){super(),this.moduleType=o,null!==Jn(o)&&function QS(s){const o=new Set;!function l(c){const h=Jn(c,!0),g=h.id;null!==g&&(function z_(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${de(o)} vs ${de(o.name)}`)}(g,kc.get(g),c),kc.set(g,c));const v=y(h.imports);for(const w of v)o.has(w)||(o.add(w),l(w))}(s)}(o)}create(o){return new iE(this.moduleType,o)}}function FI(s){return o=>{setTimeout(s,void 0,o)}}const yl=class Wk extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,g,v;let w=o,C=l||(()=>null),x=c;if(o&&"object"==typeof o){const V=o;w=null===(h=V.next)||void 0===h?void 0:h.bind(V),C=null===(g=V.error)||void 0===g?void 0:g.bind(V),x=null===(v=V.complete)||void 0===v?void 0:v.bind(V)}this.__isAsync&&(C=FI(C),w&&(w=FI(w)),x&&(x=FI(x)));const R=super.subscribe({next:w,error:C,complete:x});return o instanceof ne.w0&&o.add(R),R}};function qk(){return this._results[uh()]()}class LI{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=uh(),c=LI.prototype;c[l]||(c[l]=qk)}get changes(){return this._changes||(this._changes=new yl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Jr(o);(this._changesDetected=!function rm(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fp=(()=>{class s{}return s.__NG_ELEMENT_ID__=lE,s})();const sM=Fp,aE=class extends sM{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=mc(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(l)),Yd(l,c,o),new Mh(c)}};function lE(){return Rh(wn(),xe())}function Rh(s,o){return 4&s.type?new aE(o,s,bu(s,o)):null}let Nh=(()=>{class s{}return s.__NG_ELEMENT_ID__=uE,s})();function uE(){return BI(wn(),xe())}const cE=Nh,Z_=class extends cE{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return bu(this._hostTNode,this._hostLView)}get injector(){return new Rs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Tr(this._hostTNode,this._hostLView);if(mi(o)){const l=vt(o,this._hostLView),c=Lr(o);return new Rs(l[1].data[c+8],l)}return new Rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Y_(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,g){const v=o&&!function er(s){return"function"==typeof s}(o);let w;if(v)w=l;else{const V=l||{};w=V.index,c=V.injector,h=V.projectableNodes,g=V.ngModuleRef}const C=v?o:new rE(Qn(o)),x=c||this.parentInjector;if(!g&&null==C.ngModule){const $=(v?x:this.parentInjector).get(xh,null);$&&(g=$)}const R=C.create(x,h,void 0,g);return this.insert(R.hostView,w),R}insert(o,l){const c=o._lView,h=c[1];if(function qa(s){return ki(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],$=new Z_(V,V[6],V[3]);$.detach($.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function Gf(s,o,l,c){const h=10+c,g=l.length;c>0&&(l[h-1][4]=o),c<g-10?(o[4]=l[h],nl(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function Am(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(h,c,v,g);const w=Yf(g,v),C=c[11],x=qf(C,v[7]);return null!==x&&function Tm(s,o,l,c,h,g){c[0]=h,c[6]=o,Qf(s,c,l,1,h,g)}(h,v[6],C,c,x,w),o.attachToViewContainerRef(),nl(VI(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Y_(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=wv(this._lContainer,l);c&&(uo(VI(this._lContainer),l),zd(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=wv(this._lContainer,l);return c&&null!=uo(VI(this._lContainer),l)?new Mh(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function Y_(s){return s[8]}function VI(s){return s[8]||(s[8]=[])}function BI(s,o){let l;const c=o[s.index];if(ki(c))l=c;else{let h;if(8&s.type)h=rn(c);else{const g=o[11];h=g.createComment("");const v=hr(s,o);au(g,qf(g,v),h,function vw(s,o){return gn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=l=zw(c,o,h,s),Zm(o,l)}return new Z_(l,s,o)}class Q_{constructor(o){this.queryList=o,this.matches=null}clone(){return new Q_(this.queryList)}setDirty(){this.queryList.setDirty()}}class J_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<c;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new J_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==qI(o,l).matches&&this.queries[l].setDirty()}}class kh{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class dE{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new dE(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class X_{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new X_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,l,lM(l,g)),this.matchTNodeWithReadOption(o,l,_a(l,o,g,!1,!1))}else c===Fp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,_a(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Sh||h===Nh||h===Fp&&4&l.type)this.addMatch(l.index,-2);else{const g=_a(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function lM(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function jI(s,o,l,c){return-1===l?function uM(s,o){return 11&s.type?bu(s,o):4&s.type?Rh(s,o):null}(o,s):-2===l?function HI(s,o,l){return l===Sh?bu(o,s):l===Fp?Rh(o,s):l===Nh?BI(o,s):void 0}(s,o,c):Qa(s,s[1],l,o)}function hE(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,v=l.matches,w=[];for(let C=0;C<v.length;C+=2){const x=v[C];w.push(x<0?null:jI(o,g[x],v[C+1],l.metadata.read))}h.matches=w}return h.matches}function fE(s,o,l,c){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const v=hE(s,o,h,l);for(let w=0;w<g.length;w+=2){const C=g[w];if(C>0)c.push(v[w/2]);else{const x=g[w+1],R=o[-C];for(let V=10;V<R.length;V++){const $=R[V];$[17]===$[3]&&fE($[1],$,x,c)}if(null!==R[9]){const V=R[9];for(let $=0;$<V.length;$++){const ee=V[$];fE(ee[1],ee,x,c)}}}}}return c}function $I(s){const o=xe(),l=jt(),c=Bl();dd(c+1);const h=qI(l,c);if(s.dirty&&To(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?fE(l,o,c,[]):hE(l,o,h,c);s.reset(g,AI),s.notifyOnChanges()}return!0}return!1}function GI(s,o,l){const c=jt();c.firstCreatePass&&(WI(c,new kh(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),gE(c,xe(),o)}function pE(s,o,l,c){const h=jt();if(h.firstCreatePass){const g=wn();WI(h,new kh(o,l,c),g.index),function dM(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}gE(h,xe(),l)}function zI(){return function cM(s,o){return s[19].queries[o].queryList}(xe(),Bl())}function gE(s,o,l){const c=new LI(4==(4&l));vc(s,o,c,c.destroy),null===o[19]&&(o[19]=new J_),o[19].queries.push(new Q_(c))}function WI(s,o,l){null===s.queries&&(s.queries=new dE),s.queries.track(new X_(o,l))}function qI(s,o){return s.queries.getByIndex(o)}function oy(...s){}const ay=new In("Application Initializer");let ly=(()=>{class s{constructor(l){this.appInits=l,this.resolve=oy,this.reject=oy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Mc(g))l.push(g);else if(DC(g)){const v=new Promise((w,C)=>{g.subscribe({complete:w,error:C})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(it(ay,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const iD=new In("AppId",{providedIn:"root",factory:function sD(){return`${Pc()}${Pc()}${Pc()}`}});function Pc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oD=new In("Platform Initializer"),jp=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aD=new In("appBootstrapListener");let uy=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Hp=new In("LocaleId",{providedIn:"root",factory:()=>Kt(Hp,bt.Optional|bt.SkipSelf)||function cy(){return"undefined"!=typeof $localize&&$localize.locale||I_}()}),TE=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class cD{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let wM=(()=>{class s{compileModuleSync(l){return new W_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=y(Jn(l).declarations).reduce((v,w)=>{const C=Qn(w);return C&&v.push(new rE(C)),v},[]);return new cD(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const AE=(()=>Promise.resolve(0))();function dy(s){"undefined"==typeof Zone?AE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Gs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yl(!1),this.onMicrotaskEmpty=new yl(!1),this.onStable=new yl(!1),this.onError=new yl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function IM(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function oi(s){const o=()=>{!function Ur(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Lh(s),s.isCheckStableRunning=!0,$p(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Lh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,g,v,w)=>{try{return hy(s),l.invokeTask(h,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),hD(s)}},onInvoke:(l,c,h,g,v,w,C)=>{try{return hy(s),l.invoke(h,g,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),hD(s)}},onHasTask:(l,c,h,g)=>{l.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Lh(s),$p(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,SE,oy,oy);try{return g.runTask(v,l,c)}finally{g.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const SE={};function $p(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Lh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function hy(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hD(s){s._nesting--,$p(s)}class DM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yl,this.onMicrotaskEmpty=new yl,this.onStable=new yl,this.onError=new yl}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let ME=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gs.assertNotInAngularZone(),dy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dy(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(it(Gs))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),TM=(()=>{class s{constructor(){this._applications=new Map,Gp.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Gp.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class AM{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function xE(s){Gp=s}let Gp=new AM,Fc=null;const fy=new In("AllowMultipleToken"),RE=new In("PlatformOnDestroy");class OE{constructor(o,l){this.name=o,this.token=l}}function pD(s,o,l=[]){const c=`Platform: ${o}`,h=new In(c);return(g=[])=>{let v=py();if(!v||v.injector.get(fy,!1)){const w=[...l,...g,{provide:h,useValue:!0}];s?s(w):function fD(s){if(Fc&&!Fc.get(fy,!1))throw new Le(400,"");Fc=s;const o=s.get(Wp),l=s.get(oD,null);l&&l.forEach(c=>c())}(function gD(s=[],o){return Vs.create({name:o,providers:[{provide:Jv,useValue:"platform"},{provide:RE,useValue:()=>Fc=null},...s]})}(w,c))}return function zp(s){const o=py();if(!o)throw new Le(401,"");return o}()}}function py(){var s;return null!==(s=null==Fc?void 0:Fc.get(Wp))&&void 0!==s?s:null}let Wp=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const w=function xM(s,o){let l;return l="noop"===s?new DM:("zone.js"===s?void 0:s)||new Gs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:Gs,useValue:w}];return w.run(()=>{const x=Vs.create({providers:C,parent:this.injector,name:l.moduleType.name}),R=l.create(x),V=R.injector.get(be,null);if(!V)throw new Le(402,"");return w.runOutsideAngular(()=>{const $=w.onError.subscribe({next:ee=>{V.handleError(ee)}});R.onDestroy(()=>{FE(this._modules,R),$.unsubscribe()})}),function RM(s,o,l){try{const c=l();return Mc(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,w,()=>{const $=R.injector.get(ly);return $.runInitializers(),$.donePromise.then(()=>(function hS(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(uI=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Hp,I_)||I_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,c=[]){const h=Lc({},c);return function SM(s,o,l){const c=new W_(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const c=l.injector.get(PE);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Le(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(RE,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(it(Vs))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Lc(s,o){return Array.isArray(o)?o.reduce(Lc,s):Object.assign(Object.assign({},s),o)}let PE=(()=>{class s{constructor(l,c,h,g){this._zone=l,this._injector=c,this._exceptionHandler=h,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new L.y(C=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Gs.assertNotInAngularZone(),dy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{x.unsubscribe(),R.unsubscribe()}});this.isStable=(0,fe.T)(v,w.pipe((0,oe.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Le(405,"");let h;h=l instanceof V_?l:this._injector.get(Rp).resolveComponentFactory(l),this.componentTypes.push(h.componentType);const g=function kE(s){return s.isBoundToModule}(h)?void 0:this._injector.get(xh),w=h.create(Vs.NULL,[],c||h.selector,g),C=w.location.nativeElement,x=w.injector.get(ME,null),R=x&&w.injector.get(TM);return x&&R&&R.registerApplication(C,x),w.onDestroy(()=>{this.detachView(w.hostView),FE(this.components,w),R&&R.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;FE(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(aD,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(it(Gs),it(Vs),it(be),it(ly))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function FE(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let qp=!0,LE=!1;function Kp(){return LE=!0,qp}function _D(){if(LE)throw new Error("Cannot enable prod mode after platform setup.");qp=!1}let gy=(()=>{class s{}return s.__NG_ELEMENT_ID__=yD,s})();function yD(s){return function VE(s,o,l){if(Xc(s)&&!l){const c=fr(s.index,o);return new Mh(c,c)}return 47&s.type?new Mh(o[16],o):null}(wn(),xe(),16==(16&s))}class by{constructor(){}supports(o){return up(o)}create(o){return new HE(o)}}const FM=(s,o)=>o;class HE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||FM}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,g=null;for(;l||c;){const v=!c||l&&l.currentIndex<GE(c,h,g)?l:c,w=GE(v,h,g),C=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const x=w-h,R=C-h;if(x!=R){for(let $=0;$<x;$++){const ee=$<g.length?g[$]:g[$]=0,Ee=ee+$;R<=Ee&&Ee<x&&(g[$]=ee+1)}g[v.previousIndex]=R-x}}w!==C&&o(v,w,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!up(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),c=!0),l=l._next}else h=0,function LA(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[uh()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,w=>{v=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,w,v,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new Uh(l,c),g,h),o}_verifyReinsertion(o,l,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Cu),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cu),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Uh{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $E{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Cu{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new $E,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GE(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class ID{constructor(){}supports(o){return o instanceof Map||n_(o)}create(){return new Bc}}class Bc{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||n_(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const c=new wl(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class wl{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jp(){return new jh([new by])}let jh=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Jp()),deps:[[s,new Ea,new ar]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Le(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Jp}),s})();function WE(){return new xn([new ID])}let xn=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||WE()),deps:[[s,new Ea,new ar]]}}find(l){const c=this.factories.find(g=>g.supports(l));if(c)return c;throw new Le(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:WE}),s})();const Xp=pD(null,"core",[]);let VM=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(it(PE))},s.\u0275mod=kr({type:s}),s.\u0275inj=Qt({}),s})()},3942:(Je,we,F)=>{F.d(we,{Z:()=>Le});var f=F(2090),ne=F(4859),L=F(9681),fe=F(1877);class oe{constructor(me,Te){this._delegate=me,this.firebase=Te,(0,L._addComponent)(me,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(me,Te=L._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(me);return!Ye.isInitialized()&&"EXPLICIT"===(null===(We=Ye.getComponent())||void 0===We?void 0:We.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Te})}_removeServiceInstance(me,Te=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Te)}_addComponent(me){(0,L._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,L._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function pe(){const je=function de(je){const me={},Te={__esModule:!0,initializeApp:function Se($e,z={}){const Ce=L.initializeApp($e,z);if((0,f.r3)(me,Ce.name))return me[Ce.name];const J=new je(Ce,Te);return me[Ce.name]=J,J},app:Ye,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function De($e){const z=$e.name,Ce=z.replace("-compat","");if(L._registerComponent($e)&&"PUBLIC"===$e.type){const J=(ae=Ye())=>{if("function"!=typeof ae[Ce])throw ue.create("invalid-app-argument",{appName:z});return ae[Ce]()};void 0!==$e.serviceProps&&(0,f.ZB)(J,$e.serviceProps),Te[Ce]=J,je.prototype[Ce]=function(...ae){return this._getService.bind(this,z).apply(this,$e.multipleInstances?ae:[])}}return"PUBLIC"===$e.type?Te[Ce]:null},removeApp:function We($e){delete me[$e]},useAsService:function He($e,z){return"serverAuth"===z?null:z},modularAPIs:L}};function Ye($e){if(!(0,f.r3)(me,$e=$e||L._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:$e});return me[$e]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function Ie(){return Object.keys(me).map($e=>me[$e])}}),Ye.App=je,Te}(oe);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function me(Te){(0,f.ZB)(je,Te)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),je}(),G=new fe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=W;!function Ne(je){(0,L.registerVersion)("@firebase/app-compat","0.1.26",je)}()},9681:(Je,we,F)=>{F.r(we),F.d(we,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>es,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Xt,_apps:()=>on,_clearComponents:()=>Xi,_components:()=>kn,_getProvider:()=>Qt,_registerComponent:()=>Rr,_removeServiceInstance:()=>Ut,deleteApp:()=>bt,getApp:()=>zr,getApps:()=>Ri,initializeApp:()=>Qs,onLog:()=>On,registerVersion:()=>Nn,setLogLevel:()=>Js});var f=F(5861),ne=F(4859),L=F(1877),fe=F(2090),oe=F(8766);class ye{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function ue(q){const te=q.getComponent();return"VERSION"===(null==te?void 0:te.type)}(ke)){const Xe=ke.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(ke=>ke).join(" ")}}const de="@firebase/app",W=new L.Yd("@firebase/app"),Bt="[DEFAULT]",Ze={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,kn=new Map;function cn(q,te){try{q.container.addComponent(te)}catch(ke){W.debug(`Component ${te.name} failed to register with FirebaseApp ${q.name}`,ke)}}function Xt(q,te){q.container.addOrOverwriteComponent(te)}function Rr(q){const te=q.name;if(kn.has(te))return W.debug(`There were multiple attempts to register component ${te}.`),!1;kn.set(te,q);for(const ke of on.values())cn(ke,q);return!0}function Qt(q,te){const ke=q.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),q.container.getProvider(te)}function Ut(q,te,ke=Bt){Qt(q,te).clearInstance(ke)}function Xi(){kn.clear()}const yr=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Nr{constructor(te,ke,Xe){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const es="9.8.2";function Qs(q,te={}){"object"!=typeof te&&(te={name:te});const ke=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},te),Xe=ke.name;if("string"!=typeof Xe||!Xe)throw yr.create("bad-app-name",{appName:String(Xe)});const _t=on.get(Xe);if(_t){if((0,fe.vZ)(q,_t.options)&&(0,fe.vZ)(ke,_t.config))return _t;throw yr.create("duplicate-app",{appName:Xe})}const At=new ne.H0(Xe);for(const Dt of kn.values())At.addComponent(Dt);const vn=new Nr(q,ke,At);return on.set(Xe,vn),vn}function zr(q=Bt){const te=on.get(q);if(!te)throw yr.create("no-app",{appName:q});return te}function Ri(){return Array.from(on.values())}function bt(q){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(q){const te=q.name;on.has(te)&&(on.delete(te),yield Promise.all(q.container.getProviders().map(ke=>ke.delete())),q.isDeleted=!0)})).apply(this,arguments)}function Nn(q,te,ke){var Xe;let _t=null!==(Xe=Ze[q])&&void 0!==Xe?Xe:q;ke&&(_t+=`-${ke}`);const At=_t.match(/\s|\//),vn=te.match(/\s|\//);if(At||vn){const Dt=[`Unable to register library "${_t}" with version "${te}":`];return At&&Dt.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),At&&vn&&Dt.push("and"),vn&&Dt.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void W.warn(Dt.join(" "))}Rr(new ne.wA(`${_t}-version`,()=>({library:_t,version:te}),"VERSION"))}function On(q,te){if(null!==q&&"function"!=typeof q)throw yr.create("invalid-log-argument");(0,L.Am)(q,te)}function Js(q){(0,L.Ub)(q)}const Pn="firebase-heartbeat-store";let di=null;function vo(){return di||(di=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(q,te)=>{0===te&&q.createObjectStore(Pn)}}).catch(q=>{throw yr.create("storage-open",{originalErrorMessage:q.message})})),di}function lt(){return(lt=(0,f.Z)(function*(q){try{return(yield vo()).transaction(Pn).objectStore(Pn).get(hi(q))}catch(te){throw yr.create("storage-get",{originalErrorMessage:te.message})}})).apply(this,arguments)}function wt(q,te){return vr.apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(q,te){try{const Xe=(yield vo()).transaction(Pn,"readwrite");return yield Xe.objectStore(Pn).put(te,hi(q)),Xe.done}catch(ke){throw yr.create("storage-set",{originalErrorMessage:ke.message})}})).apply(this,arguments)}function hi(q){return`${q.name}!${q.options.appId}`}class br{constructor(te){this.container=te,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new K(ke),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var te=this;return(0,f.Z)(function*(){const Xe=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Er();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==_t&&!te._heartbeatsCache.heartbeats.some(At=>At.date===_t))return te._heartbeatsCache.heartbeats.push({date:_t,agent:Xe}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(At=>{const vn=new Date(At.date).valueOf();return Date.now()-vn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,f.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const ke=Er(),{heartbeatsToSend:Xe,unsentEntries:_t}=function H(q,te=1024){const ke=[];let Xe=q.slice();for(const _t of q){const At=ke.find(vn=>vn.agent===_t.agent);if(At){if(At.dates.push(_t.date),Y(ke)>te){At.dates.pop();break}}else if(ke.push({agent:_t.agent,dates:[_t.date]}),Y(ke)>te){ke.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:ke,unsentEntries:Xe}}(te._heartbeatsCache.heartbeats),At=(0,fe.L)(JSON.stringify({version:2,heartbeats:Xe}));return te._heartbeatsCache.lastSentHeartbeatDate=ke,_t.length>0?(te._heartbeatsCache.heartbeats=_t,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),At})()}}function Er(){return(new Date).toISOString().substring(0,10)}class K{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,f.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function Yt(q){return lt.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var ke=this;return(0,f.Z)(function*(){var Xe;if(yield ke._canUseIndexedDBPromise){const At=yield ke.read();return wt(ke.app,{lastSentHeartbeatDate:null!==(Xe=te.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var ke=this;return(0,f.Z)(function*(){var Xe;if(yield ke._canUseIndexedDBPromise){const At=yield ke.read();return wt(ke.app,{lastSentHeartbeatDate:null!==(Xe=te.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:[...At.heartbeats,...te.heartbeats]})}})()}}function Y(q){return(0,fe.L)(JSON.stringify({version:2,heartbeats:q})).length}!function Ae(q){Rr(new ne.wA("platform-logger",te=>new ye(te),"PRIVATE")),Rr(new ne.wA("heartbeat",te=>new br(te),"PRIVATE")),Nn(de,"0.7.25",q),Nn(de,"0.7.25","esm2017"),Nn("fire-js","")}("")},4859:(Je,we,F)=>{F.d(we,{H0:()=>de,wA:()=>L,zt:()=>oe});var f=F(5861),ne=F(2090);class L{constructor(W,G,se){this.name=W,this.instanceFactory=G,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const fe="[DEFAULT]";class oe{constructor(W,G){this.name=W,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const G=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(G)){const se=new ne.BH;if(this.instancesDeferred.set(G,se),this.isInitialized(G)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:G});ze&&se.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(G).promise}getImmediate(W){var G;const se=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),ze=null!==(G=null==W?void 0:W.optional)&&void 0!==G&&G;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Ne){if(ze)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ue(pe){return"EAGER"===pe.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:fe})}catch(G){}for(const[G,se]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(G);try{const Ne=this.getOrInitializeService({instanceIdentifier:ze});se.resolve(Ne)}catch(Ne){}}}}clearInstance(W=fe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,f.Z)(function*(){const G=Array.from(W.instances.values());yield Promise.all([...G.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...G.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=fe){return this.instances.has(W)}getOptions(W=fe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:G={}}=W,se=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:se,options:G});for(const[Ne,Le]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Ne)&&Le.resolve(ze);return ze}onInit(W,G){var se;const ze=this.normalizeInstanceIdentifier(G),Ne=null!==(se=this.onInitCallbacks.get(ze))&&void 0!==se?se:new Set;Ne.add(W),this.onInitCallbacks.set(ze,Ne);const Le=this.instances.get(ze);return Le&&W(Le,ze),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,G){const se=this.onInitCallbacks.get(G);if(se)for(const ze of se)try{ze(W,G)}catch(Ne){}}getOrInitializeService({instanceIdentifier:W,options:G={}}){let se=this.instances.get(W);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=W,pe===fe?void 0:pe),options:G}),this.instances.set(W,se),this.instancesOptions.set(W,G),this.invokeOnInitCallbacks(se,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,se)}catch(ze){}var pe;return se||null}normalizeInstanceIdentifier(W=fe){return this.component?this.component.multipleInstances?W:fe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const G=this.getProvider(W.name);if(G.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);G.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const G=new oe(W,this);return this.providers.set(W,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,F)=>{F.d(we,{Am:()=>pe,Ub:()=>de,Yd:()=>ue,in:()=>ne});const f=[];var ne=(()=>{return(W=ne||(ne={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",ne;var W})();const L={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},fe=ne.INFO,oe={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ye=(W,G,...se)=>{if(G<W.logLevel)return;const ze=(new Date).toISOString(),Ne=oe[G];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ne](`[${ze}]  ${W.name}:`,...se)};class ue{constructor(G){this.name=G,this._logLevel=fe,this._logHandler=ye,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ne))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...G),this._logHandler(this,ne.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...G),this._logHandler(this,ne.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...G),this._logHandler(this,ne.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...G),this._logHandler(this,ne.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...G),this._logHandler(this,ne.ERROR,...G)}}function de(W){f.forEach(G=>{G.setLogLevel(W)})}function pe(W,G){for(const se of f){let ze=null;G&&G.level&&(ze=L[G.level]),se.userLogHandler=null===W?null:(Ne,Le,...je)=>{const me=je.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(We){return null}}).filter(Te=>Te).join(" ");Le>=(null!=ze?ze:Ne.logLevel)&&W({level:ne[Le].toLowerCase(),message:me,args:je,type:Ne.name})}}}},8766:(Je,we,F)=>{F.d(we,{Lj:()=>Se,X3:()=>Ye});var f=F(5861);let L,fe;const ue=new WeakMap,de=new WeakMap,pe=new WeakMap,W=new WeakMap,G=new WeakMap;let Ne={get(z,Ce,J){if(z instanceof IDBTransaction){if("done"===Ce)return de.get(z);if("objectStoreNames"===Ce)return z.objectStoreNames||pe.get(z);if("store"===Ce)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Te(z[Ce])},set:(z,Ce,J)=>(z[Ce]=J,!0),has:(z,Ce)=>z instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in z};function me(z){return"function"==typeof z?function je(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...Ce){return z.apply(We(this),Ce),Te(ue.get(this))}:function(...Ce){return Te(z.apply(We(this),Ce))}:function(Ce,...J){const ae=z.call(We(this),Ce,...J);return pe.set(ae,Ce.sort?Ce.sort():[Ce]),Te(ae)}}(z):(z instanceof IDBTransaction&&function ze(z){if(de.has(z))return;const Ce=new Promise((J,ae)=>{const ie=()=>{z.removeEventListener("complete",ve),z.removeEventListener("error",he),z.removeEventListener("abort",he)},ve=()=>{J(),ie()},he=()=>{ae(z.error||new DOMException("AbortError","AbortError")),ie()};z.addEventListener("complete",ve),z.addEventListener("error",he),z.addEventListener("abort",he)});de.set(z,Ce)}(z),((z,Ce)=>Ce.some(J=>z instanceof J))(z,function oe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Ne):z)}function Te(z){if(z instanceof IDBRequest)return function se(z){const Ce=new Promise((J,ae)=>{const ie=()=>{z.removeEventListener("success",ve),z.removeEventListener("error",he)},ve=()=>{J(Te(z.result)),ie()},he=()=>{ae(z.error),ie()};z.addEventListener("success",ve),z.addEventListener("error",he)});return Ce.then(J=>{J instanceof IDBCursor&&ue.set(J,z)}).catch(()=>{}),G.set(Ce,z),Ce}(z);if(W.has(z))return W.get(z);const Ce=me(z);return Ce!==z&&(W.set(z,Ce),G.set(Ce,z)),Ce}const We=z=>G.get(z);function Ye(z,Ce,{blocked:J,upgrade:ae,blocking:ie,terminated:ve}={}){const he=indexedDB.open(z,Ce),Ve=Te(he);return ae&&he.addEventListener("upgradeneeded",pt=>{ae(Te(he.result),pt.oldVersion,pt.newVersion,Te(he.transaction))}),J&&he.addEventListener("blocked",()=>J()),Ve.then(pt=>{ve&&pt.addEventListener("close",()=>ve()),ie&&pt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Ve}function Se(z,{blocked:Ce}={}){const J=indexedDB.deleteDatabase(z);return Ce&&J.addEventListener("blocked",()=>Ce()),Te(J).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],He=new Map;function $e(z,Ce){if(!(z instanceof IDBDatabase)||Ce in z||"string"!=typeof Ce)return;if(He.get(Ce))return He.get(Ce);const J=Ce.replace(/FromIndex$/,""),ae=Ce!==J,ie=De.includes(J);if(!(J in(ae?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ie.includes(J))return;const ve=function(){var he=(0,f.Z)(function*(Ve,...pt){const Zt=this.transaction(Ve,ie?"readwrite":"readonly");let Bt=Zt.store;return ae&&(Bt=Bt.index(pt.shift())),(yield Promise.all([Bt[J](...pt),ie&&Zt.done]))[0]});return function(pt){return he.apply(this,arguments)}}();return He.set(Ce,ve),ve}!function Le(z){Ne=z(Ne)}(z=>aB(oB({},z),{get:(Ce,J,ae)=>$e(Ce,J)||z.get(Ce,J,ae),has:(Ce,J)=>!!$e(Ce,J)||z.has(Ce,J)}))},5861:(Je,we,F)=>{function f(L,fe,oe,ye,ue,de,pe){try{var W=L[de](pe),G=W.value}catch(se){return void oe(se)}W.done?fe(G):Promise.resolve(G).then(ye,ue)}function ne(L){return function(){var fe=this,oe=arguments;return new Promise(function(ye,ue){var de=L.apply(fe,oe);function pe(G){f(de,ye,ue,pe,W,"next",G)}function W(G){f(de,ye,ue,pe,W,"throw",G)}pe(void 0)})}}F.d(we,{Z:()=>ne})}},Je=>{Je(Je.s=2648)}]);